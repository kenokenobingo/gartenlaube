(this.webpackJsonpgartenlaube=this.webpackJsonpgartenlaube||[]).push([[4],{11:function(e,t,n){"use strict";(function(e){n.d(t,"m",(function(){return Y})),n.d(t,"C",(function(){return K})),n.d(t,"g",(function(){return H})),n.d(t,"s",(function(){return z})),n.d(t,"c",(function(){return q})),n.d(t,"d",(function(){return J})),n.d(t,"k",(function(){return Q})),n.d(t,"o",(function(){return X})),n.d(t,"n",(function(){return ee})),n.d(t,"J",(function(){return te})),n.d(t,"j",(function(){return ne})),n.d(t,"h",(function(){return re})),n.d(t,"b",(function(){return ae})),n.d(t,"I",(function(){return ce})),n.d(t,"K",(function(){return se})),n.d(t,"e",(function(){return oe})),n.d(t,"B",(function(){return ie})),n.d(t,"v",(function(){return ue})),n.d(t,"q",(function(){return de})),n.d(t,"A",(function(){return le})),n.d(t,"t",(function(){return be})),n.d(t,"i",(function(){return je})),n.d(t,"a",(function(){return fe})),n.d(t,"y",(function(){return pe})),n.d(t,"f",(function(){return Oe})),n.d(t,"F",(function(){return he})),n.d(t,"l",(function(){return me})),n.d(t,"G",(function(){return ve})),n.d(t,"z",(function(){return xe})),n.d(t,"x",(function(){return Ne})),n.d(t,"u",(function(){return ge})),n.d(t,"E",(function(){return Ee})),n.d(t,"H",(function(){return Ae})),n.d(t,"w",(function(){return we})),n.d(t,"p",(function(){return Ie})),n.d(t,"D",(function(){return ye})),n.d(t,"r",(function(){return Ce}));var r,a,c,s,o,i,u,d,l,b,j,f,p,O,h,m,v,x,N,g,E,A,w,I,y=n(7),C=n(427),D=n(265),k=n(428),_=n.n(k);Object(C.config)({path:Object(D.resolve)(e,"../.env")});var T=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COUPON_URL:"",REACT_APP_SNAPSHOT_SPACE:"tribute",REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS:"0x40e4C2FCb05b6dF086F8f04A223F1dD06ea490D7",REACT_APP_SNAPSHOT_HUB_API_URL:"https://gazebo-snapshot.herokuapp.com",REACT_APP_ENVIRONMENT:"development",REACT_APP_INFURA_PROJECT_ID_DEV:"bf0aa3eba9bb4bec8c533deede02a9d8",REACT_APP_MULTICALL_CONTRACT_ADDRESS:"0xbE5e7310B892C344741afDbb28e8e11126d83458",REACT_APP_GRAPH_API_URL:"https://api.thegraph.com/subgraphs/name/kenokenobingo/gartenlaube"}),S=T.REACT_APP_DAO_REGISTRY_CONTRACT_ADDRESS,R=T.REACT_APP_DEFAULT_CHAIN_NAME_LOCAL,P=T.REACT_APP_ENVIRONMENT,F=T.REACT_APP_GRAPH_API_URL,L=T.REACT_APP_INFURA_PROJECT_ID_DEV,M=T.REACT_APP_INFURA_PROJECT_ID_LOCAL,B=T.REACT_APP_INFURA_PROJECT_ID_PROD,G=T.REACT_APP_MULTICALL_CONTRACT_ADDRESS,U=T.REACT_APP_SNAPSHOT_HUB_API_URL,V=T.REACT_APP_COUPON_API_URL,W=T.REACT_APP_SNAPSHOT_SPACE,Y=P,K="localhost"===Y?"/snapshot-hub":U,H=V,z=F,q={MAINNET:1,ROPSTEN:3,RINKEBY:4,GOERLI:5,KOVAN:42,GANACHE:1337},J=(r={},Object(y.a)(r,q.MAINNET,"Main Ethereum Network"),Object(y.a)(r,q.ROPSTEN,"Ropsten Test Network"),Object(y.a)(r,q.RINKEBY,"Rinkeby Test Network"),Object(y.a)(r,q.GOERLI,"G\xf6rli Test Network"),Object(y.a)(r,q.KOVAN,"Kovan Test Network"),Object(y.a)(r,q.GANACHE,"Ganache Test Network"),r),Q="production"===P?q.MAINNET:"development"===P?q.RINKEBY:R?q[R]:q.GANACHE,X=(a={},Object(y.a)(a,q.MAINNET,"https://etherscan.io"),Object(y.a)(a,q.ROPSTEN,"https://ropsten.etherscan.io"),Object(y.a)(a,q.RINKEBY,"https://rinkeby.etherscan.io"),Object(y.a)(a,q.GOERLI,"https://goerli.etherscan.io"),Object(y.a)(a,q.KOVAN,"https://kovan.etherscan.io"),a),$=(c={},Object(y.a)(c,q.MAINNET,"wss://mainnet.infura.io/ws/v3"),Object(y.a)(c,q.ROPSTEN,"wss://ropsten.infura.io/ws/v3"),Object(y.a)(c,q.RINKEBY,"wss://rinkeby.infura.io/ws/v3"),Object(y.a)(c,q.GOERLI,"wss://goerli.infura.io/ws/v3"),Object(y.a)(c,q.KOVAN,"wss://kovan.infura.io/ws/v3"),c),Z="production"===P?B:"development"===P?L:M,ee=$[Q]?"".concat($[Q],"/").concat(Z):Q===q.GANACHE?"ws://127.0.0.1:7545":"",te={injected:{display:{name:"MetaMask",description:"Connect with the provider in your Browser"},package:null},walletconnect:{display:{name:"WalletConnect",description:"Connect with your mobile wallet"},package:_.a,options:{infuraId:Z,qrcodeModalOptions:{mobileLinks:["rainbow","metamask","argent","trust"]}}}},ne=S,re=(s={},Object(y.a)(s,q.MAINNET,""),Object(y.a)(s,q.ROPSTEN,""),Object(y.a)(s,q.RINKEBY,"0x58F6db89F218aB8c24e9f5Dd51bFf8b8f3BA4147"),Object(y.a)(s,q.GOERLI,""),Object(y.a)(s,q.KOVAN,""),Object(y.a)(s,q.GANACHE,"0x482Af6a6258F172aDDBa02937eB11A8e5e4c6b89"),s),ae=(o={},Object(y.a)(o,q.MAINNET,""),Object(y.a)(o,q.ROPSTEN,""),Object(y.a)(o,q.RINKEBY,"0xe103D07971BbE7DE8F336bB3B56F47acce396a2e"),Object(y.a)(o,q.GOERLI,""),Object(y.a)(o,q.KOVAN,""),Object(y.a)(o,q.GANACHE,"0xdFa0436224Da291EB96fE9520243598e5B20a455"),o),ce=(i={},Object(y.a)(i,q.MAINNET,""),Object(y.a)(i,q.ROPSTEN,""),Object(y.a)(i,q.RINKEBY,"0xF314Dc90b4413c63a1761ADE424e6A79c4D88f6C"),Object(y.a)(i,q.GOERLI,""),Object(y.a)(i,q.KOVAN,""),Object(y.a)(i,q.GANACHE,"0x9a5eFFb194c9ABdf3B283A3809F79c03324Ca8d7"),u={},Object(y.a)(u,q.MAINNET,""),Object(y.a)(u,q.ROPSTEN,""),Object(y.a)(u,q.RINKEBY,"0xcA946D7c176De5C77122fc1e6dA7e96aB063D3Bc"),Object(y.a)(u,q.GOERLI,""),Object(y.a)(u,q.KOVAN,""),Object(y.a)(u,q.GANACHE,"0xC8Ac9A86deECBC3F75E33a5c33471AF35d81Ed74"),d={},Object(y.a)(d,q.MAINNET,""),Object(y.a)(d,q.ROPSTEN,""),Object(y.a)(d,q.RINKEBY,"0xEa913Bb57b7DaA1B341dA3E357BaE06e78e55CfE"),Object(y.a)(d,q.GOERLI,""),Object(y.a)(d,q.KOVAN,""),Object(y.a)(d,q.GANACHE,"0x382f01F4fC9552aaf90dcF1976EED14f93B9cB7D"),l={},Object(y.a)(l,q.MAINNET,""),Object(y.a)(l,q.ROPSTEN,""),Object(y.a)(l,q.RINKEBY,"0x8e06B2dB2D9478Ce757f52E57386f38e1dA5c16C"),Object(y.a)(l,q.GOERLI,""),Object(y.a)(l,q.KOVAN,""),Object(y.a)(l,q.GANACHE,"0xc5A1d4d7FAA80F873D405563CEC7407437B16199"),l),se=(b={},Object(y.a)(b,q.MAINNET,""),Object(y.a)(b,q.ROPSTEN,""),Object(y.a)(b,q.RINKEBY,"0xdb2F66eE4B778808A0d19363f2C87912fF45c7E0"),Object(y.a)(b,q.GOERLI,""),Object(y.a)(b,q.KOVAN,""),Object(y.a)(b,q.GANACHE,"0xEb98A92a844e37d301B18A926893de911Fc96936"),b),oe=(j={},Object(y.a)(j,q.MAINNET,""),Object(y.a)(j,q.ROPSTEN,""),Object(y.a)(j,q.RINKEBY,"0xFbec8a284CDf5377d1DF298789Ef72BC711391A8"),Object(y.a)(j,q.GOERLI,""),Object(y.a)(j,q.KOVAN,""),Object(y.a)(j,q.GANACHE,"0x4B03B7C58f79c0DaE24E3474ED9371fAeb89131c"),j),ie=(f={},Object(y.a)(f,q.MAINNET,""),Object(y.a)(f,q.ROPSTEN,""),Object(y.a)(f,q.RINKEBY,"0xc6c372432c26607fA8e13a8A199414436aFa167a"),Object(y.a)(f,q.GOERLI,""),Object(y.a)(f,q.KOVAN,""),Object(y.a)(f,q.GANACHE,"0x241Ab4bF884369a861138e25f4d566FDe1785B00"),f),ue=(p={},Object(y.a)(p,q.MAINNET,""),Object(y.a)(p,q.ROPSTEN,""),Object(y.a)(p,q.RINKEBY,"0xD673C83d387892efe03574cE78E492bFf51F3996"),Object(y.a)(p,q.GOERLI,""),Object(y.a)(p,q.KOVAN,""),Object(y.a)(p,q.GANACHE,"0x4232509762484c7eb97CC36a37711b8db99FBdD3"),p),de=(O={},Object(y.a)(O,q.MAINNET,""),Object(y.a)(O,q.ROPSTEN,""),Object(y.a)(O,q.RINKEBY,"0xb17b4cefbD68a374C52058c4191ec29Ed0D121CC"),Object(y.a)(O,q.GOERLI,""),Object(y.a)(O,q.KOVAN,""),Object(y.a)(O,q.GANACHE,"0x9Dd84b9E90DF1a6eCD84af1eC186ECb7f714bAD1"),O),le=(h={},Object(y.a)(h,q.MAINNET,""),Object(y.a)(h,q.ROPSTEN,""),Object(y.a)(h,q.RINKEBY,"0x6bfC8A7Fd8Ac29fFe1590083e73E8AcA247531b9"),Object(y.a)(h,q.GOERLI,""),Object(y.a)(h,q.KOVAN,""),Object(y.a)(h,q.GANACHE,"0x79120e3ACf8E7FeFFd8EeA91A12e40bc04883Db5"),h),be=(m={},Object(y.a)(m,q.MAINNET,""),Object(y.a)(m,q.ROPSTEN,""),Object(y.a)(m,q.RINKEBY,"0xbF3239B26892d5Ff723D9c82a2e36101bbe41C01"),Object(y.a)(m,q.GOERLI,""),Object(y.a)(m,q.KOVAN,""),Object(y.a)(m,q.GANACHE,"0x897f8240a50245a0C8BDd1570A59DbBABC249609"),m),je=(v={},Object(y.a)(v,q.MAINNET,""),Object(y.a)(v,q.ROPSTEN,""),Object(y.a)(v,q.RINKEBY,"0x2213827c9B4f5bB8D2F8B5ef88eBD655bD73fa06"),Object(y.a)(v,q.GOERLI,""),Object(y.a)(v,q.KOVAN,""),Object(y.a)(v,q.GANACHE,"0x47f201c84fDCCBA4353f27Dd5C1d08D3214b26C2"),v),fe=(x={},Object(y.a)(x,q.MAINNET,""),Object(y.a)(x,q.ROPSTEN,""),Object(y.a)(x,q.RINKEBY,"0xE42BA0b83104AC4b3a9a2556aD979e54958df45D"),Object(y.a)(x,q.GOERLI,""),Object(y.a)(x,q.KOVAN,""),Object(y.a)(x,q.GANACHE,"0x31F2A65Df461d72Bd6A298dcF4D6ec8E06B2eEe8"),x),pe=(N={},Object(y.a)(N,q.MAINNET,""),Object(y.a)(N,q.ROPSTEN,""),Object(y.a)(N,q.RINKEBY,"0xb637c8eF50583357bbF3992052717e20393Fe168"),Object(y.a)(N,q.GOERLI,""),Object(y.a)(N,q.KOVAN,""),Object(y.a)(N,q.GANACHE,"0x3C431EeB5A80D5DEB1921b156F051c637b925900"),N),Oe=(g={},Object(y.a)(g,q.MAINNET,""),Object(y.a)(g,q.ROPSTEN,""),Object(y.a)(g,q.RINKEBY,"0xaa5aCdDEa4b7dE0c85704A1276Dcb5A40052a162"),Object(y.a)(g,q.GOERLI,""),Object(y.a)(g,q.KOVAN,""),Object(y.a)(g,q.GANACHE,"0x89B5FbBFa66CFbeD44Fc264cDF65159CD2F99648"),g),he=(E={},Object(y.a)(E,q.MAINNET,""),Object(y.a)(E,q.ROPSTEN,""),Object(y.a)(E,q.RINKEBY,"0x43F5244BfD43f1489dcd9C86e2a704dc17aD2025"),Object(y.a)(E,q.GOERLI,""),Object(y.a)(E,q.KOVAN,""),Object(y.a)(E,q.GANACHE,"0xDe2571E1dc48FE1bbAd6CD7Da66452aA20eB2eb9"),E),me=(A={},Object(y.a)(A,q.MAINNET,""),Object(y.a)(A,q.ROPSTEN,""),Object(y.a)(A,q.RINKEBY,"0x4145173a3e11a32E435B4eaC5C0044308A99eE6a"),Object(y.a)(A,q.GOERLI,""),Object(y.a)(A,q.KOVAN,""),Object(y.a)(A,q.GANACHE,"0x5Fdf2F1A2Ed259433D7245Dbe3ab2F291aFEa644"),A),ve=(w={},Object(y.a)(w,q.MAINNET,""),Object(y.a)(w,q.ROPSTEN,""),Object(y.a)(w,q.RINKEBY,"0x9d69ca01b1e1c416e5966170D4D1aCaA7cE3acE4"),Object(y.a)(w,q.GOERLI,""),Object(y.a)(w,q.KOVAN,""),Object(y.a)(w,q.GANACHE,"0x7026Fda9828B6d4D8690D10a2C0eb61f0608343F"),w),xe=(I={},Object(y.a)(I,q.MAINNET,""),Object(y.a)(I,q.ROPSTEN,""),Object(y.a)(I,q.RINKEBY,"0x49D69a51ddd4D555668d178de69D0EFa037a70d5"),Object(y.a)(I,q.GOERLI,""),Object(y.a)(I,q.KOVAN,""),Object(y.a)(I,q.GANACHE,"0x44c8A80bee9Ad53062AB6d2bc99A1D620464978E"),I),Ne=G,ge="0x000000000000000000000000000000000000dead",Ee="0x000000000000000000000000000000000000babe",Ae="0x00000000000000000000000000000000000FF1CE",we="0x00000000000000000000000000000000DECAFBAD",Ie="0x0000000000000000000000000000000000000000",ye=W,Ce="production"===P?1e4:5e3}).call(this,"/")},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(){return Object(r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true","data-icon":"times","data-prefix":"fal",viewBox:"0 0 320 512",children:Object(r.jsx)("path",{fill:"currentColor",d:"M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"})})}},13:function(e,t,n){"use strict";function r(e,t){var n=void 0!==t?e.filter((function(e){return e!==t})):e;return n[Math.floor(Math.random()*n.length)]}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return j})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return m})),n.d(t,"k",(function(){return v.a}));var a=n(4);function c(){var e=function(){},t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if("object"===typeof t)for(var n=0,r=Object.entries(t);n<r.length;n++){var c=Object(a.a)(r[n],2),s=c[0],o=c[1];t[s]="function"===typeof o?e:null}}function s(){var e=function(e){e.preventDefault(),e.returnValue=""};return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}function o(e){return e<.01?e.toFixed(4):e.toFixed(2)}var i=function(e){var t=new RegExp(/(\d)(?=(\d{3})+(?:\.\d+)?$)/g);return"number"===typeof e?e.toString().replace(/,/g,"").replace(t,"$1,"):e.replace(/,/g,"").replace(t,"$1,")};function u(e,t){return t[e]&&"message"in t[e]?t[e].message:""}var d=n(2),l=n.n(d),b=n(10);function j(e){return e.toLowerCase().trim()}function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(b.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getCode(j(t));case 3:return r=e.sent,a=!r||"0x"===r||"0x0"===r||"0x00"===r,e.abrupt("return",!1===a);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var O=n(32);function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e+1-t;return Object(O.a)(Array(n)).map((function(e,n){return t+n}))}var m=function(e){return e.toString().replace(/,/g,"")};var v=n(194);n(25)},132:function(e,t,n){"use strict";n.d(t,"a",(function(){return w})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return M})),n.d(t,"e",(function(){return B}));var r=n(2),a=n.n(r),c=n(3),s=n(10),o=n(4),i=n(1),u=n(14),d=n(20),l=n(5),b=n(11),j=n(29),f=n(55),p=n(13),O=n(60),h=n(39),m=n(15),v=n(69),x=n(27),N=n(49),g=n(23),E=n(41),A=n(0);function w(e){var t,n=e.adapterName,r=e.proposal,w=r.daoProposalVotingAdapter,I=r.snapshotProposal,y=Object(i.useState)(l.f.STANDBY),C=Object(o.a)(y,2),D=C[0],k=C[1],_=Object(i.useState)(),T=Object(o.a)(_,2),S=T[0],R=T[1],P=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),F=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.instance.methods})),L=Object(u.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi.find((function(e){return"getPriorAmount"===e.name}))})),M=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),B=null===(t=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})))||void 0===t?void 0:t.find((function(e){return"getMemberAddress"===e.name})),G=Object(u.c)((function(e){return e.contracts})),U=Object(m.f)(),V=U.account,W=U.provider,Y=U.web3Instance,K=Object(m.a)(),H=K.txEtherscanURL,z=K.txIsPromptOpen,q=K.txSend,J=K.txStatus,Q=Object(h.f)(),X=Q.isDisabled,$=Q.openWhyDisabledModal,Z=Q.WhyDisabledModal,ee=Object(m.b)().fast,te=null===w||void 0===w?void 0:w.getWeb3VotingAdapterContract().methods,ne=D===l.f.AWAITING_CONFIRM||D===l.f.PENDING||J===l.f.AWAITING_CONFIRM||J===l.f.PENDING,re=J===l.f.FULFILLED&&D===l.f.FULFILLED,ae=ne||re||z;function ce(){return(ce=Object(s.a)(a.a.mark((function e(){var t,r,s,o,i,u,h,m,v,x,N,g,E,A,w,y,C,D,_,T,S;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(P){e.next=5;break}throw new Error("No Bank Extension address was found.");case 5:if(B){e.next=7;break}throw new Error("No ABI for `getMemberAddress` was found.");case 7:if(L){e.next=9;break}throw new Error("No ABI for `getPriorAmount` was found.");case 9:if(I){e.next=11;break}throw new Error("No Snapshot proposal was found.");case 11:if(I.votes){e.next=13;break}throw new Error("No Snapshot proposal votes Array was found.");case 13:if(te){e.next=15;break}throw new Error('No "OffchainVotingContract" methods were found.');case 15:if(Y){e.next=17;break}throw new Error("No Web3 instance was found.");case 17:return k(l.f.AWAITING_CONFIRM),r=I.idInDAO,s=I.msg.payload.snapshot.toString(),o=Object(j.d)(n,G),e.next=23,F.getPriorAmount(b.E,b.w,s).call();case 23:return i=e.sent,u=Object(p.i)(Number(i)-1,0).map((function(e){return[M,B,[e.toString()]]})),e.next=27,Object(j.j)({calls:u,web3Instance:Y});case 27:return h=e.sent,m=h.map((function(e){return[P,L,[e,b.H,s]]})),e.next=31,Object(j.j)({calls:m,web3Instance:Y});case 31:return v=e.sent,x=h.map((function(e,t){var n,a=Object.values((null===(n=I.votes)||void 0===n?void 0:n.find((function(t){return Object(p.h)(e)===Object(p.h)(Object.values(t)[0].msg.payload.metadata.memberAddress)})))||{})[0];return Object(d.createVote)({proposalId:r,sig:(null===a||void 0===a?void 0:a.sig)||"0x",timestamp:a?Number(a.msg.timestamp):0,voteYes:(null===a||void 0===a?void 0:a.msg.payload.choice)===d.VoteChoicesIndex.Yes,weight:a?v[t]:"0"})})),e.next=35,Object(d.prepareVoteResult)({actionId:o,chainId:b.k,daoAddress:M,votes:x});case 35:return N=e.sent,g=N.voteResultTree,E=N.result,A=g.getHexRoot(),w=Object(d.getVoteResultRootDomainDefinition)(M,o,b.k),y=w.domain,C=w.types,D=JSON.stringify({domain:y,message:{root:A},primaryType:O.a,types:C}),e.next=43,Object(d.signMessage)(W,V,D);case 43:return _=e.sent,e.next=46,Object(f.a)(A);case 46:if(e.t2=t=e.sent,e.t1=null===e.t2,e.t1){e.next=50;break}e.t1=void 0===t;case 50:if(!e.t1){e.next=54;break}e.t3=void 0,e.next=55;break;case 54:e.t3=t.merkle_root.length;case 55:if(e.t0=e.t3,e.t0){e.next=58;break}e.t0="";case 58:if(e.t4=e.t0,e.t4>0){e.next=63;break}return e.next=63,Object(f.f)({actionId:o,chainId:b.k,steps:E,merkleRoot:A,verifyingContract:M});case 63:return k(l.f.FULFILLED),T=[M,r,A,E[E.length-1],_],S=Object(c.a)({from:V||""},ee?{gasPrice:ee}:null),e.next=68,q("submitVoteResult",te,T,S);case 68:e.next=74;break;case 70:e.prev=70,e.t5=e.catch(0),R(e.t5),k(l.f.REJECTED);case 74:case"end":return e.stop()}}),e,null,[[0,70]])})))).apply(this,arguments)}return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{className:"proposaldetails__button",disabled:X||ae,onClick:X||ae?function(){}:function(){return ce.apply(this,arguments)},children:ne?Object(A.jsx)(E.a,{}):re?"Done":"Submit Vote Result"}),Object(A.jsx)(x.a,{error:S,renderText:"Something went wrong"}),ae&&Object(A.jsx)("div",{className:"form__submit-status-container",children:function(){if(J===l.f.AWAITING_CONFIRM||D===l.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(J){case l.f.PENDING:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(v.a,{intervalMs:2e3,messages:O.b,useFirstItemStart:!0,render:function(e){return Object(A.jsx)(g.a,{children:e},e)}}),Object(A.jsx)(N.a,{url:H,isPending:!0})]});case l.f.FULFILLED:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:"Result submitted!"}),Object(A.jsx)(N.a,{url:H})]});default:return null}}()}),X&&Object(A.jsx)("button",{className:"button--help-centered",onClick:$,children:"Why is submitting disabled?"})]}),Object(A.jsx)(Z,{title:"Why is this disabled?"})]})}var I=n(40);function y(e){var t,n,r,b=e.adapterName,j=e.proposal,O=Object(i.useState)(),v=Object(o.a)(O,2),N=v[0],g=v[1],E=Object(i.useState)(),w=Object(o.a)(E,2),y=w[0],C=w[1],D=Object(i.useRef)({addressIsDelegatedMessage:"",alreadyVotedMessage:""}),k=Object(u.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.delegateKey})),_=Object(u.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isAddressDelegated})),T=Object(m.f)().account,S=Object(I.h)(),R=S.signAndSendVote,P=S.voteDataStatus,F=Object(f.b)(null===(t=j.snapshotProposal)||void 0===t?void 0:t.votes,T||""),L=Object(h.f)(),M=L.isDisabled,G=L.openWhyDisabledModal,U=L.setOtherDisabledReasons,V=L.WhyDisabledModal,W=(null===(n=j.snapshotProposal)||void 0===n?void 0:n.idInDAO)||"",Y=(null===(r=j.snapshotProposal)||void 0===r?void 0:r.idInSnapshot)||"",K=P===l.f.AWAITING_CONFIRM||P===l.f.PENDING,H=P===l.f.FULFILLED,z=M||(K||H),q=K?N:void 0;function J(){return(J=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,W){e.next=3;break}throw new Error("No proposal hash was found.");case 3:if(Y){e.next=5;break}throw new Error("No proposal ID was found.");case 5:return g(d.VoteChoices[t]),e.next=8,R(Object(c.a)(Object(c.a)({},b?{adapterName:b}:void 0),{},{partialVoteData:{choice:t},proposalIdInDAO:W,proposalIdInSnapshot:Y}));case 8:return e.next=10,j.refetchProposalOrDraft();case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),C(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(i.useEffect)((function(){if(k){var e=_?(t=k,"Your member address is delegated to ".concat(Object(p.k)(t,7),". You must use that address to vote.")):"";D.current=Object(c.a)(Object(c.a)({},D.current),{},{addressIsDelegatedMessage:e})}var t;D.current=Object(c.a)(Object(c.a)({},D.current),{},{alreadyVotedMessage:F?"You have already voted.":""}),U(Object.values(D.current))}),[k,_,U,F]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(B,{onClick:z?function(){}:function(e){return J.apply(this,arguments)},buttonProps:{disabled:z,"aria-disabled":z},voteChosen:F,voteProgress:q}),Object(A.jsx)(x.a,{error:y,renderText:"Something went wrong"}),M&&Object(A.jsx)("button",{className:"button--help-centered",onClick:G,children:"Why is voting disabled?"}),Object(A.jsx)(V,{title:"Why is voting disabled?"})]})}var C=n(61);function D(e){var t=e.startLabel,n=e.startPeriodMs,r=e.endLabel,a=e.endedLabel,c=e.endPeriodMs,s=Object(i.useState)(null),u=Object(o.a)(s,2),d=u[0],l=u[1],b=Object(i.useCallback)((function(e,t){var n=function(e){var t=Date.parse(e.toString())-Date.parse((new Date).toString()),n=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60),a=Math.floor(t/36e5%24);return{total:t,days:Math.floor(t/864e5),hours:a,minutes:r,seconds:n}}(e),r=n.days,a=n.hours,c=n.minutes,s=n.seconds;return r>2&&t?"~".concat(r," days"):r>0?"".concat(j(r,"day")," : ").concat(j(a,"hr")," : ").concat(j(c,"min")):a>0?"".concat(j(a,"hr")," : ").concat(j(c,"min")):c>0?"".concat(j(c,"min")," : ").concat(j(s,"sec")):Object(A.jsx)("span",{className:"color-brightsalmon",children:j(s,"sec")})}),[]);function j(e,t){var n=0===e||e>1?"".concat(t,"s"):t;return"".concat(e," ").concat(n)}return Object(i.useEffect)((function(){var e=setInterval((function(){var s=new Date,o=new Date(n),i=new Date(c);if(s<o){var u=Object(A.jsxs)("span",{children:[Object(A.jsx)("span",{className:"votingstatus",children:t||"Starts:"})," ",Object(A.jsx)("span",{className:"votingstatus__timer",children:b(o,!0)})]});l(u)}else if(s<i){var d=Object(A.jsxs)("span",{children:[Object(A.jsx)("span",{className:"votingstatus",children:r||"Ends:"})," ",Object(A.jsx)("span",{className:"votingstatus__timer",children:b(i)})]});l(d)}else{l(Object(A.jsx)("span",{className:"votingstatus",children:a||"Ended"})),clearInterval(e)}}),1e3);return function(){clearInterval(e)}}),[b,r,c,a,t,n]),Object(A.jsx)("div",{children:d})}function k(e){return Object(A.jsxs)("svg",Object(c.a)(Object(c.a)({width:"20px",height:"20px",viewBox:"0 0 21 24",version:"1.1"},e),{},{children:[Object(A.jsx)("defs",{children:Object(A.jsx)("path",{d:"M17.6516,6.408 C19.8162,8.36 21,11.02 21,13.844 C21,19.458 16.303,24 10.5,24 C4.69616,24 0,19.457 0,13.844 C0,8.506 4.22802,4.197 9.53077,3.731 L9.53077,1.875 L6.68768,1.875 C6.15238,1.875 5.71845,1.455 5.71845,0.938 C5.71845,0.42 6.15238,0 6.68768,0 L14.3123,0 C14.8476,0 15.2815,0.42 15.2815,0.938 C15.2815,1.455 14.8476,1.875 14.3123,1.875 L11.46923,1.875 L11.46923,3.731 C13.1316,3.877 14.7126,4.398 16.1059,5.252 L17.4392,3.962 C17.8177,3.596 18.4314,3.596 18.8099,3.962 C19.1885,4.328 19.1885,4.922 18.8099,5.288 L17.6516,6.408 Z M10.5,22.125 C15.2208,22.125 19.0615,18.41 19.0615,13.844 C19.0615,9.277 15.2209,5.562 10.5,5.562 C5.77913,5.562 1.93846,9.277 1.93846,13.844 C1.93846,18.41 5.77917,22.125 10.5,22.125 Z M11.46923,8.312 L11.46923,13.844 C11.46923,14.362 11.03531,14.781 10.5,14.781 C9.96469,14.781 9.53077,14.362 9.53077,13.844 L9.53077,8.312 C9.53077,7.795 9.96469,7.375 10.5,7.375 C11.03531,7.375 11.46923,7.795 11.46923,8.312 Z",id:"path-1"})}),Object(A.jsx)("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:Object(A.jsxs)("g",{id:"Group-70",children:[Object(A.jsx)("mask",{id:"mask-2",fill:"white",children:Object(A.jsx)("use",{xlinkHref:"#path-1"})}),Object(A.jsx)("use",{id:"Clip-69",fill:"currentColor",xlinkHref:"#path-1"})]})})]}))}function _(e){var t=e.hasVotingEnded,n=e.noUnits,r=e.renderStatus,a=e.renderTimer,c=e.showPercentages,s=void 0===c||c,o=e.totalUnits,i=e.yesUnits,u=r();return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{className:"votingstatus-container",children:[Object(A.jsx)(k,{"aria-label":"Counting down until voting ends",role:"img"}),u&&Object(A.jsx)("span",{className:"votingstatus",children:u}),a(D)]}),Object(A.jsx)(M,{yesUnits:i,noUnits:n,totalUnits:o,votingExpired:t,showPercentages:s})]})}var T=Object(A.jsxs)("span",{children:["Grace period ends:",Object(A.jsx)("br",{})]}),S=Object(A.jsxs)("span",{children:["Grace period ended ",Object(A.jsx)("br",{})," ",Object(A.jsx)("span",{style:{textTransform:"none"},children:"Awaiting contract status\u2026"})]}),R={duration:150};function P(e){var t,n,r,a=e.countdownGracePeriodStartMs,c=e.proposal,s=e.votingResult,d=c.snapshotProposal,b=Object(u.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),f=Object(i.useState)(),p=Object(o.a)(f,2),O=p[0],h=p[1],m=Object(i.useState)(0),v=Object(o.a)(m,2),x=v[0],N=v[1],g=Object(I.j)(null===(t=c.snapshotProposal)||void 0===t?void 0:t.msg.payload.start,null===(n=c.snapshotProposal)||void 0===n?void 0:n.msg.payload.end),E=g.hasVotingTimeStarted,w=g.hasVotingTimeEnded,y=g.votingTimeStartEndInitReady,D=Object(I.c)(s?void 0:c.snapshotProposal).offchainVotingResults,k=s||(null===(r=D[0])||void 0===r?void 0:r[1]),P=(null===d||void 0===d?void 0:d.msg.payload.start)||0,F=(null===d||void 0===d?void 0:d.msg.payload.end)||0,L=(null===k||void 0===k?void 0:k.Yes.units)||0,M=(null===k||void 0===k?void 0:k.No.units)||0,B=null===k||void 0===k?void 0:k.totalUnits;return Object(i.useEffect)((function(){w&&h(L>M)}),[w,M,L]),Object(i.useEffect)((function(){a&&b&&Object(j.f)(l.b.offchainVotingGracePeriod,b).then((function(e){return e&&N(1e3*Number(e))})).catch((function(){return N(0)}))}),[a,b]),Object(A.jsx)(_,{renderTimer:function(e){return y&&E&&!w?Object(A.jsx)(e,{startPeriodMs:1e3*P,endPeriodMs:1e3*F}):a&&x?Object(A.jsx)(e,{startPeriodMs:a,endLabel:T,endedLabel:S,endPeriodMs:a+x}):void 0},renderStatus:function(){return y?a?"":"boolean"===typeof O?O?"Approved":"Failed":void 0:Object(A.jsx)(C.a,{ariaLabel:"Getting off-chain voting status",intervalMs:200,fadeInProps:R})},hasVotingEnded:w,noUnits:M,totalUnits:B,yesUnits:L})}function F(e){return Object(A.jsx)("svg",Object(c.a)(Object(c.a)({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"18",height:"18",viewBox:"0 0 512 512"},e),{},{children:Object(A.jsx)("path",{fill:"currentColor",d:"M435.848 83.466L172.804 346.51l-96.652-96.652c-4.686-4.686-12.284-4.686-16.971 0l-28.284 28.284c-4.686 4.686-4.686 12.284 0 16.971l133.421 133.421c4.686 4.686 12.284 4.686 16.971 0l299.813-299.813c4.686-4.686 4.686-12.284 0-16.971l-28.284-28.284c-4.686-4.686-12.284-4.686-16.97 0z"})}))}function L(e,t){return(e/t*100).toFixed(0)}function M(e){var t=e.yesUnits,n=void 0===t?0:t,r=e.noUnits,a=void 0===r?0:r,c=e.totalUnits,s=e.votingExpired,o=e.showPercentages,i=c?L(n,c):"0",u=c?L(a,c):"0";return Object(A.jsxs)("div",{className:"votingbar-container",children:[Object(A.jsxs)("div",{className:"votingbar",children:[Object(A.jsx)("div",{className:"votingbar__segment--yes","aria-label":"".concat(i,"% yes votes"),style:{width:"".concat(i,"%")}}),Object(A.jsx)("div",{className:"votingbar__segment--no","aria-label":"".concat(u,"% no votes"),style:{width:"".concat(u,"%")}})]}),Object(A.jsx)("div",{className:"votingbar__percentages",children:o&&Object(A.jsxs)(A.Fragment,{children:[s&&n>a&&Object(A.jsx)("span",{className:"yes-check",children:Object(A.jsx)(F,{"aria-label":"Vote has passed"})}),Object(A.jsxs)("span",{className:"yes-percent",children:[i,"%"]}),Object(A.jsxs)("span",{className:"no-percent",children:[u,"%"]}),s&&n<=a&&Object(A.jsx)("span",{className:"no-check",children:Object(A.jsx)(F,{"aria-label":"Vote has failed"})})]})})]})}function B(e){var t=e.buttonProps,n=e.onClick,r=e.voteChosen,a=e.voteProgress,s=function(e){return r===e?"votingbutton--voted":""};function o(e){return a===e?{"aria-label":"Voting ".concat(e," \u2026")}:{}}function i(e){return a===e?Object(A.jsx)(E.a,{"aria-label":"Voting ".concat(e," spinner image"),role:"img"}):r===e?"Voted ".concat(e):"Vote ".concat(e)}function u(e){return function(){n(e)}}return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("button",Object(c.a)(Object(c.a)(Object(c.a)({},t),o(d.VoteChoices.Yes)),{},{className:"proposaldetails__button ".concat(s(d.VoteChoices.Yes)),onClick:u(d.VoteChoices.Yes),children:i(d.VoteChoices.Yes)})),Object(A.jsx)("button",Object(c.a)(Object(c.a)(Object(c.a)({},t),o(d.VoteChoices.No)),{},{className:"proposaldetails__button ".concat(s(d.VoteChoices.No)),onClick:u(d.VoteChoices.No),children:i(d.VoteChoices.No)}))]})}},146:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=n(206),c=n.n(a),s=n(23),o=n(0);function i(e){var t=e.children,n=e.isOpen,a=e.isOpenHandler,i=e.keyProp,u=e.modalClassNames,d=e.styleProps;return Object(o.jsx)(c.a,{ariaHideApp:!1,className:"modal-container ".concat(u),isOpen:n,onRequestClose:function(){a(n)},overlayClassName:"modal-overlay",role:"dialog",style:Object(r.a)({overlay:{zIndex:"99"}},d),children:Object(o.jsx)(s.a,{children:Object(o.jsx)("div",{className:"modal",children:t})})},i)}},147:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return p}));var r,a=n(2),c=n.n(a),s=n(3),o=n(10),i=n(4),u=n(1),d=n(14),l=n(25),b=n(11),j=n(15),f=n(19);function p(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.CouponOnboardingContract})),n=Object(u.useState)(),a=Object(i.a)(n,2),p=a[0],O=a[1],h=Object(u.useState)(r.STANDBY),m=Object(i.a)(h,2),v=m[0],x=m[1],N=Object(j.b)().fast,g=Object(j.f)(),E=g.account,A=g.web3Instance,w=Object(j.d)().defaultChainError,I=Object(j.a)(),y=I.txError,C=I.txEtherscanURL,D=I.txIsPromptOpen,k=I.txSend,_=I.txStatus,T=Object(d.b)();function S(){return(S=Object(o.a)(c.a.mark((function n(a,o){var i,u,d;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!w){n.next=3;break}throw new Error("Wrong network connected.");case 3:if(a){n.next=5;break}throw new Error("No coupon data was found.");case 5:if(E){n.next=7;break}throw new Error("No account found.");case 7:if(e){n.next=9;break}throw new Error("No DAO Registry contract was found.");case 9:if(t){n.next=11;break}throw new Error("No Coupon Onboarding contract was found.");case 11:if(A){n.next=13;break}throw new Error("No Web3 instance was found.");case 13:return x(r.PENDING),i=Object(l.toChecksumAddress)(a.recipient),u=[e.contractAddress,i,String(a.amount),Number(a.nonce),a.signature],d=Object(s.a)({from:E||""},N?{gasPrice:N}:null),n.next=19,k("redeemCoupon",t.instance.methods,u,d);case 19:if(!n.sent){n.next=29;break}return n.next=23,fetch("".concat(b.g,"/api/coupon/redeem"),{method:"PATCH",body:JSON.stringify({signature:a.signature}),headers:{"Content-Type":"application/json"}});case 23:if(x(r.FULFILLED),a.recipient.toLowerCase()!==E.toLowerCase()){n.next=29;break}return n.next=27,T(Object(f.B)({account:E,daoRegistryContract:e,web3Instance:A}));case 27:return n.next=29,R(o);case 29:n.next=35;break;case 31:n.prev=31,n.t0=n.catch(0),O(n.t0),x(r.REJECTED);case 35:case"end":return n.stop()}}),n,null,[[0,31]])})))).apply(this,arguments)}function R(e){return P.apply(this,arguments)}function P(){return(P=Object(o.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return{isInProcessOrDone:v===r.PENDING||v===r.FULFILLED,redeemCoupon:function(e,t){return S.apply(this,arguments)},submitError:p,submitStatus:v,txStatus:_,txError:y,txEtherscanURL:C,txIsPromptOpen:D}}!function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},15:function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return I})),n.d(t,"e",(function(){return D})),n.d(t,"f",(function(){return l.a}));n(32);var r=n(2),a=n.n(r),c=n(10),s=n(4),o=n(1);var i=n(11),u=n(29),d=n(13),l=n(99),b=n(5);function j(){var e=Object(o.useState)(),t=Object(s.a)(e,2),n=t[0],r=t[1],j=Object(o.useState)(""),f=Object(s.a)(j,2),p=f[0],O=f[1],h=Object(o.useState)(!1),m=Object(s.a)(h,2),v=m[0],x=m[1],N=Object(o.useState)(),g=Object(s.a)(N,2),E=g[0],A=g[1],w=Object(o.useState)(b.f.STANDBY),I=Object(s.a)(w,2),y=I[0],C=I[1],D=Object(l.a)().networkId;function k(e){return function(t){C(b.f.PENDING),x(!1),D&&D!==i.c.GANACHE&&O("".concat(i.o[D],"/tx/").concat(t)),e&&e(t)}}function _(){return(_=Object(c.a)(a.a.mark((function e(){var t,n,c,s,o,i=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=Object(d.c)(),e.prev=1,r(void 0),O(""),C(b.f.AWAITING_CONFIRM),x(!0),n=i.length,c=new Array(n),s=0;s<n;s++)c[s]=i[s];return c[4]=k(c[4]),e.next=10,u.b.apply(void 0,c);case 10:return o=e.sent,A(o),C(b.f.FULFILLED),t(),e.abrupt("return",o);case 17:throw e.prev=17,e.t0=e.catch(1),r(e.t0),C(b.f.REJECTED),x(!1),t(),e.t0;case 24:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return{txError:n,txEtherscanURL:p,txIsPromptOpen:v,txReceipt:E,txSend:function(){return _.apply(this,arguments)},txStatus:y}}var f=n(3),p=n(25),O=n(173),h=n.n(O),m=n(9),v=n(39);function x(e){return Object(p.toWei)(new h.a((e/10).toFixed(4)).toString(),"Gwei")}var N={average:void 0,fast:void 0,fastest:void 0,safeLow:void 0};function g(e){var t=(e||{}).ignoreEnvironment,n=void 0!==t&&t,r=Object(o.useState)(N),a=Object(s.a)(r,2),c=a[0],u=a[1],d=Object(o.useState)(),l=Object(s.a)(d,2),b=l[0],j=l[1],p=Object(o.useState)(m.a.STANDBY),O=Object(s.a)(p,2),h=O[0],g=O[1],E=Object(v.a)(),A=E.abortController,w=E.isMountedRef,I=!1===n&&"production"!==i.m;return Object(o.useEffect)((function(){if((null===A||void 0===A?void 0:A.signal)&&!I)return j(void 0),g(m.a.PENDING),fetch("https://ethgasstation.info/json/ethgasAPI.json",{signal:A.signal}).then((function(e){if(w.current){if(!e.ok)throw new Error("Something went wrong while getting the latest gas price.");return g(m.a.FULFILLED),e.json()}})).then((function(e){if(w.current){var t=e.average,n=e.fast,r=e.fastest,a=e.safeLow;u({average:x(t),fast:x(n),fastest:x(r),safeLow:x(a)})}})).catch((function(e){w.current&&(j(e),u(N),g(m.a.REJECTED))})),function(){A.abort()}}),[A,w,I]),Object(f.a)(Object(f.a)({},c),{},{gasPriceError:b,gasPriceStatus:h})}var E=n(14),A=n(19);function w(){var e=Object(E.b)();function t(){return(t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.web3Instance,t.prev=1,t.next=4,e(Object(A.I)(r));case 4:return t.next=6,e(Object(A.H)(r));case 6:return t.next=8,e(Object(A.E)(r));case 8:return t.next=10,e(Object(A.F)(r));case 10:return t.next=12,e(Object(A.M)(r));case 12:return t.next=14,e(Object(A.N)(r));case 14:return t.next=16,e(Object(A.O)(r));case 16:return t.next=18,e(Object(A.S)(r));case 18:return t.next=20,e(Object(A.C)(r));case 20:return t.next=22,e(Object(A.D)(r));case 22:return t.next=24,e(Object(A.O)(r));case 24:return t.next=26,e(Object(A.R)(r));case 26:return t.next=28,e(Object(A.T)(r));case 28:return t.next=30,e(Object(A.K)(r));case 30:return t.next=32,e(Object(A.V)(r));case 32:return t.next=34,e(Object(A.U)(r));case 34:return t.next=36,e(Object(A.Q)(r));case 36:return t.next=38,e(Object(A.P)(r));case 38:return t.next=40,e(Object(A.G)(r));case 40:return t.next=42,e(Object(A.J)(r));case 42:return t.next=44,e(Object(A.L)(r));case 44:t.next=49;break;case 46:throw t.prev=46,t.t0=t.catch(1),t.t0;case 49:case"end":return t.stop()}}),t,null,[[1,46]])})))).apply(this,arguments)}return Object(o.useCallback)((function(e){return t.apply(this,arguments)}),[e])}function I(){var e=Object(l.a)(),t=e.networkId,n=e.connected,r=Object(o.useState)(),a=Object(s.a)(r,2),c=a[0],u=a[1];return Object(o.useEffect)((function(){n&&t!==i.k?u(new Error("Please connect to the ".concat(i.d[i.k],"."))):u(void 0)}),[n,t]),{defaultChain:i.k,defaultChainError:c,isDefaultChain:t===i.k}}var y=n(979),C=!1;function D(e,t){var n=Object(o.useState)(C),r=Object(s.a)(n,2),i=r[0],u=r[1],l=Object(v.e)().isMountedRef,b=Object(o.useCallback)((function(e,t){return j.apply(this,arguments)}),[l]);function j(){return(j=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.g)(t,new y.a(n));case 3:if(r=e.sent,l.current){e.next=6;break}return e.abrupt("return");case 6:u(r),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(0),l.current){e.next=13;break}return e.abrupt("return");case 13:u(C);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){t&&e&&b(e,t)}),[e,b,t]),i}n(169)},166:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(3),a=n(2),c=n.n(a),s=n(4),o=n(10),i=n(52),u=n(29),d=n(5),l=n(13),b="SET_CONNECTED_MEMBER",j="CLEAR_CONNECTED_MEMBER";function f(e){var t=e.account,n=e.daoRegistryContract,a=e.web3Instance;return function(){var e=Object(o.a)(c.a.mark((function e(o){var j,f,O,h,m,v,x,N,g,E,A,w,I,y,C,D;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j=null===n||void 0===n?void 0:n.instance.methods,f=null===n||void 0===n?void 0:n.contractAddress,O=null===n||void 0===n?void 0:n.abi.find((function(e){return"getAddressIfDelegated"===e.name})),h=null===n||void 0===n?void 0:n.abi.find((function(e){return"members"===e.name})),m=null===n||void 0===n?void 0:n.abi.find((function(e){return"isActiveMember"===e.name})),v=null===n||void 0===n?void 0:n.abi.find((function(e){return"getCurrentDelegateKey"===e.name})),t&&f&&j&&O&&v&&m&&h){e.next=9;break}return o(p()),e.abrupt("return");case 9:return e.prev=9,e.next=12,Object(u.j)({calls:[[f,O,[t]],[f,h,[t]],[f,m,[f,t]],[f,v,[t]]],web3Instance:a});case 12:x=e.sent,N=Object(s.a)(x,4),g=N[0],E=N[1],A=N[2],w=N[3],I=Object(u.i)(d.d.EXISTS,E),y=A||I?w:i.a,C=A||I?g:i.a,D=Object(l.h)(t)===Object(l.h)(C)&&Object(l.h)(t)!==Object(l.h)(y),o((c={delegateKey:y,isAddressDelegated:D,isActiveMember:A,memberAddress:C},Object(r.a)({type:b},c))),e.next=29;break;case 25:throw e.prev=25,e.t0=e.catch(9),o(p()),e.t0;case 29:case"end":return e.stop()}var c}),e,null,[[9,25]])})));return function(t){return e.apply(this,arguments)}}()}function p(){return{type:j}}},167:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return s}));var r="CONNECT_MODAL_CLOSE",a="CONNECT_MODAL_OPEN";function c(){return{type:r}}function s(){return{type:a}}},169:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return N}));var r,a,c,s=n(2),o=n.n(s),i=n(10),u=n(4),d=n(3),l=n(1),b=n(62),j=n.n(b),f=n(437),p=n.n(f),O=n(9),h=n(11),m=n(31);!function(e){e.DARK="dark",e.LIGHT="light"}(r||(r={})),function(e){e[e.CONNECT_WEB3MODAL=0]="CONNECT_WEB3MODAL",e[e.DEACTIVATE_PROVIDER_WEB3MODAL=1]="DEACTIVATE_PROVIDER_WEB3MODAL",e[e.ERROR_WEB3MODAL=2]="ERROR_WEB3MODAL",e[e.INITIAL_CACHED_CONNECTOR_CHECK_STATUS=3]="INITIAL_CACHED_CONNECTOR_CHECK_STATUS",e[e.NEW_WEB3MODAL=4]="NEW_WEB3MODAL",e[e.UPDATE_ACCOUNT=5]="UPDATE_ACCOUNT"}(a||(a={})),function(e){e.CONNECT="CONNECT",e.DISCONNECT="DISCONNECT"}(c||(c={}));var v={};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case a.CONNECT_WEB3MODAL:var c=r||{},s=c.provider,o=c.networkId,i=c.account,u=c.connected,l=c.web3Instance;return Object(d.a)(Object(d.a)({},e),{},{account:i,connected:u,networkId:o,provider:s,web3Instance:l});case a.DEACTIVATE_PROVIDER_WEB3MODAL:return v;case a.ERROR_WEB3MODAL:var b=r||{},j=b.error;return Object(d.a)(Object(d.a)({},e),{},{error:j});case a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS:var f=r||{},p=f.initialCachedConnectorCheckStatus;return Object(d.a)(Object(d.a)({},e),{},{initialCachedConnectorCheckStatus:p});case a.NEW_WEB3MODAL:var O=r||{},h=O.web3Modal;return{web3Modal:h};case a.UPDATE_ACCOUNT:var m=r||{},x=m.account;return Object(d.a)(Object(d.a)({},e),{},{account:x});default:return v}}function N(e){var t,n,r=e.defaultChain,s=e.defaultTheme,b=e.onBeforeConnect,f=e.onBeforeDisconnect,v=e.providerOptions,N=Object(l.useReducer)(x,{initialCachedConnectorCheckStatus:O.a.STANDBY}),g=Object(u.a)(N,2),E=g[0],A=g[1],w=s,I=r||h.k,y=Object(l.useCallback)(_,[b,E.web3Modal]),C=Object(l.useCallback)((function(e){var t,n;if(!(null===(t=E.web3Modal)||void 0===t?void 0:t.cachedProvider))return;y(null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider)}),[y,null===(t=E.web3Modal)||void 0===t?void 0:t.cachedProvider]);function D(e){var t=Object(u.a)(e,1)[0];A({type:a.UPDATE_ACCOUNT,payload:{account:t}})}function k(){return(k=Object(i.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.INITIAL_CACHED_CONNECTOR_CHECK_STATUS,"string"===typeof t){e.next=3;break}return e.abrupt("return");case 3:if(A({type:r,payload:{initialCachedConnectorCheckStatus:O.a.PENDING}}),!t){e.next=7;break}return e.next=7,n(t);case 7:A({type:r,payload:{initialCachedConnectorCheckStatus:O.a.FULFILLED}});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return T.apply(this,arguments)}function T(){return(T=Object(i.a)(o.a.mark((function e(t){var n,r,s,i,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,E.web3Modal){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,E.web3Modal.connectTo(t);case 5:return n=e.sent,r=new j.a(n),e.next=9,r.eth.getAccounts();case 9:return s=e.sent,i=Object(u.a)(s,1),d=i[0],e.next=14,null===b||void 0===b?void 0:b();case 14:return e.t0=A,e.t1=a.CONNECT_WEB3MODAL,e.t2=d,e.next=19,r.eth.net.getId();case 19:e.t3=e.sent,e.t4=n,e.t5=r,e.t6={account:e.t2,connected:!0,networkId:e.t3,provider:e.t4,web3Instance:e.t5},e.t7={type:e.t1,payload:e.t6},(0,e.t0)(e.t7),e.next=30;break;case 27:e.prev=27,e.t8=e.catch(0),A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:t,error:new Error("Failed to connect to ".concat(t,".")),type:c.CONNECT}}});case 30:case"end":return e.stop()}}),e,null,[[0,27]])})))).apply(this,arguments)}function S(){return(S=Object(i.a)(o.a.mark((function e(){var t,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null===(t=E.provider)||void 0===t||null===(n=t.close)||void 0===n?void 0:n.call(t);case 3:if(e.t0=E.web3Modal,!e.t0){e.next=7;break}return e.next=7,E.web3Modal.clearCachedProvider();case 7:return e.next=9,null===f||void 0===f?void 0:f();case 9:A({type:a.DEACTIVATE_PROVIDER_WEB3MODAL}),e.next=16;break;case 12:e.prev=12,e.t1=e.catch(0),s=(null===(r=E.web3Modal)||void 0===r?void 0:r.cachedProvider)||"",A({type:a.ERROR_WEB3MODAL,payload:{error:{connectorId:s,error:new Error("Failed to disconnect from ".concat(s||"provider",".")),type:c.DISCONNECT}}});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){var e,t,n=E.provider;return null===n||void 0===n||null===(e=n.on)||void 0===e||e.call(n,"accountsChanged",D),null===n||void 0===n||null===(t=n.on)||void 0===t||t.call(n,"chainChanged",C),function(){var e,t;null===n||void 0===n||null===(e=n.removeListener)||void 0===e||e.call(n,"accountsChanged",D),null===n||void 0===n||null===(t=n.removeListener)||void 0===t||t.call(n,"chainChanged",C)}}),[C,E.provider]),Object(l.useEffect)((function(){E.web3Modal||A({type:a.NEW_WEB3MODAL,payload:{web3Modal:new p.a({cacheProvider:!0,network:m.c[m.b[I]],providerOptions:v,theme:w})}})}),[v,E.web3Modal,I,w]),Object(l.useEffect)((function(){var e;E.initialCachedConnectorCheckStatus!==O.a.FULFILLED&&E.initialCachedConnectorCheckStatus!==O.a.PENDING&&function(e,t){k.apply(this,arguments)}(null===(e=E.web3Modal)||void 0===e?void 0:e.cachedProvider,y)}),[y,E.initialCachedConnectorCheckStatus,null===(n=E.web3Modal)||void 0===n?void 0:n.cachedProvider]),Object(d.a)(Object(d.a)({},E),{},{connectWeb3Modal:_,disconnectWeb3Modal:function(){return S.apply(this,arguments)},providerOptions:v})}},17:function(e,t,n){"use strict";var r,a,c;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return c})),function(e){e.BANK="bank",e.CONFIGURATION="configuration",e.COUPON_ONBOARDING="coupon-onboarding",e.DAO_REGISTRY="daoRegistry",e.DISTRIBUTE="distribute",e.EXECUTION="execution",e.FINANCING="financing",e.GUILDKICK="guildkick",e.MANAGING="managing",e.NFT="nft",e.NONVOTING_ONBOARDING="nonvoting-onboarding",e.OFFCHAINVOTING="offchainvoting",e.ONBOARDING="onboarding",e.RAGEQUIT="ragequit",e.TRIBUTE="tribute",e.TRIBUTE_NFT="tribute-nft",e.VOTING="voting",e.WATER="water"}(r||(r={})),function(e){e.BANK="bank",e.ERC20="erc20-ext",e.NFT="nft"}(a||(a={})),function(e){e.OffchainVotingContract="OffchainVotingContract",e.VotingContract="VotingContract"}(c||(c={}))},19:function(e,t,n){"use strict";n.d(t,"B",(function(){return r.d})),n.d(t,"x",(function(){return r.c})),n.d(t,"z",(function(){return a.c})),n.d(t,"A",(function(){return a.d})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return N})),n.d(t,"g",(function(){return g})),n.d(t,"h",(function(){return E})),n.d(t,"i",(function(){return A})),n.d(t,"j",(function(){return w})),n.d(t,"k",(function(){return I})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return C})),n.d(t,"n",(function(){return D})),n.d(t,"o",(function(){return k})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return T})),n.d(t,"r",(function(){return S})),n.d(t,"s",(function(){return R})),n.d(t,"t",(function(){return P})),n.d(t,"u",(function(){return F})),n.d(t,"v",(function(){return L})),n.d(t,"w",(function(){return M})),n.d(t,"y",(function(){return B})),n.d(t,"E",(function(){return G})),n.d(t,"H",(function(){return U})),n.d(t,"I",(function(){return V})),n.d(t,"R",(function(){return K})),n.d(t,"D",(function(){return H})),n.d(t,"T",(function(){return z})),n.d(t,"K",(function(){return q})),n.d(t,"O",(function(){return J})),n.d(t,"C",(function(){return Q})),n.d(t,"P",(function(){return X})),n.d(t,"J",(function(){return $})),n.d(t,"S",(function(){return Z})),n.d(t,"N",(function(){return ee})),n.d(t,"M",(function(){return te})),n.d(t,"F",(function(){return ne})),n.d(t,"U",(function(){return re})),n.d(t,"G",(function(){return ae})),n.d(t,"Q",(function(){return ce})),n.d(t,"L",(function(){return se})),n.d(t,"V",(function(){return oe})),n.d(t,"W",(function(){return de.b}));var r=n(166),a=n(167),c=n(3),s=n(63),o=n(2),i=n.n(o),u=n(10),d=n(5),l=n(11),b=n(29),j=n(17),f=n(195),p=["type"],O="CLEAR_CONTRACTS",h="CONTRACT_BANK_ADAPTER",m="CONTRACT_BANK_EXTENSION",v="CONTRACT_BANK_FACTORY",x="CONTRACT_CONFIGURATION",N="CONTRACT_COUPON_ONBOARDING",g="CONTRACT_DAO_FACTORY",E="CONTRACT_DAO_REGISTRY",A="CONTRACT_DAO_REGISTRY_ADAPTER",w="CONTRACT_DISTRIBUTE",I="CONTRACT_ERC20_EXTENSION",y="CONTRACT_FINANCING",C="CONTRACT_GUILDKICK",D="CONTRACT_MANAGING",k="CONTRACT_NFT_ADAPTER",_="CONTRACT_NFT_EXTENSION",T="CONTRACT_ONBOARDING",S="CONTRACT_RAGEQUIT",R="CONTRACT_TRIBUTE",P="CONTRACT_TRIBUTE_NFT",F="CONTRACT_VOTING",L="CONTRACT_VOTING_OP_ROLLUP",M="CONTRACT_WATER";function B(){return{type:O}}function G(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(14).then(n.t.bind(null,986,3));case 4:a=t.sent,c=a.default,s=c,o=l.b[l.k],u=new e.eth.Contract(s,o),r(ie({type:v,abi:s,contractAddress:o,instance:u}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function U(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=10;break}return t.next=4,n.e(17).then(n.t.bind(null,987,3));case 4:a=t.sent,c=a.default,s=c,o=l.h[l.k],u=new e.eth.Contract(s,o),r(ie({type:g,abi:s,contractAddress:o,instance:u}));case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(0),t.t0;case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}function V(e){return function(){var t=Object(u.a)(i.a.mark((function t(r){var a,c,s,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!e){t.next=12;break}return t.next=4,n.e(18).then(n.t.bind(null,988,3));case 4:if(a=t.sent,c=a.default,s=c,o=l.j){t.next=10;break}throw new Error("No DAO Registry contract address was found.");case 10:u=new e.eth.Contract(s,o),r(ie({type:E,abi:s,contractAddress:o,instance:u}));case 12:t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()}function W(e,t){return ue({actionType:F,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.VotingContract,contractAddress:t,lazyImport:function(){return n.e(2).then(n.t.bind(null,989,3))},web3Instance:e})}function Y(e,t){return ue({actionType:L,adapterOrExtensionName:d.a.voting,adapterNameForRedux:j.c.OffchainVotingContract,contractAddress:t,lazyImport:function(){return n.e(1).then(n.t.bind(null,990,3))},web3Instance:e})}function K(e,t){return ue({actionType:T,adapterNameForRedux:j.a.ONBOARDING,adapterOrExtensionName:d.a.onboarding,contractAddress:t,lazyImport:function(){return n.e(28).then(n.t.bind(null,992,3))},web3Instance:e})}function H(e,t){return ue({actionType:m,adapterNameForRedux:j.b.BANK,adapterOrExtensionName:d.c.bank,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(13).then(n.t.bind(null,993,3))},web3Instance:e})}function z(e,t){return ue({actionType:R,adapterNameForRedux:j.a.TRIBUTE,adapterOrExtensionName:d.a.tribute,contractAddress:t,lazyImport:function(){return n.e(30).then(n.t.bind(null,994,3))},web3Instance:e})}function q(e,t){return ue({actionType:w,adapterNameForRedux:j.a.DISTRIBUTE,adapterOrExtensionName:d.a.distribute,contractAddress:t,lazyImport:function(){return n.e(20).then(n.t.bind(null,995,3))},web3Instance:e})}function J(e,t){return ue({actionType:D,adapterNameForRedux:j.a.MANAGING,adapterOrExtensionName:d.a.managing,contractAddress:t,lazyImport:function(){return n.e(24).then(n.t.bind(null,996,3))},web3Instance:e})}function Q(e,t){return ue({actionType:h,adapterNameForRedux:j.a.BANK,adapterOrExtensionName:d.a.bank,contractAddress:t,lazyImport:function(){return n.e(12).then(n.t.bind(null,997,3))},web3Instance:e})}function X(e,t){return ue({actionType:k,adapterNameForRedux:j.a.NFT,adapterOrExtensionName:d.a.nft,contractAddress:t,lazyImport:function(){return n.e(26).then(n.t.bind(null,998,3))},web3Instance:e})}function $(e,t){return ue({actionType:A,adapterNameForRedux:j.a.DAO_REGISTRY,adapterOrExtensionName:d.a.dao_registry,contractAddress:t,lazyImport:function(){return n.e(19).then(n.t.bind(null,999,3))},web3Instance:e})}function Z(e,t){return ue({actionType:S,adapterNameForRedux:j.a.RAGEQUIT,adapterOrExtensionName:d.a.ragequit,contractAddress:t,lazyImport:function(){return n.e(29).then(n.t.bind(null,1e3,3))},web3Instance:e})}function ee(e,t){return ue({actionType:C,adapterNameForRedux:j.a.GUILDKICK,adapterOrExtensionName:d.a.guildkick,contractAddress:t,lazyImport:function(){return n.e(23).then(n.t.bind(null,1001,3))},web3Instance:e})}function te(e,t){return ue({actionType:y,adapterNameForRedux:j.a.FINANCING,adapterOrExtensionName:d.a.financing,contractAddress:t,lazyImport:function(){return n.e(22).then(n.t.bind(null,1002,3))},web3Instance:e})}function ne(e,t){return ue({actionType:x,adapterNameForRedux:j.a.CONFIGURATION,adapterOrExtensionName:d.a.configuration,contractAddress:t,lazyImport:function(){return n.e(15).then(n.t.bind(null,1003,3))},web3Instance:e})}function re(e,t){return ue({actionType:P,adapterNameForRedux:j.a.TRIBUTE_NFT,adapterOrExtensionName:d.a.tribute_nft,contractAddress:t,lazyImport:function(){return n.e(31).then(n.t.bind(null,1004,3))},web3Instance:e})}function ae(e,t){return ue({actionType:N,adapterNameForRedux:j.a.COUPON_ONBOARDING,adapterOrExtensionName:d.a.coupon_onboarding,contractAddress:t,lazyImport:function(){return n.e(16).then(n.t.bind(null,1005,3))},web3Instance:e})}function ce(e,t){return ue({actionType:_,adapterNameForRedux:j.b.NFT,adapterOrExtensionName:d.c.nft,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(27).then(n.t.bind(null,1006,3))},web3Instance:e})}function se(e,t){return ue({actionType:I,adapterNameForRedux:j.b.ERC20,adapterOrExtensionName:d.c.erc20,contractAddress:t,isExtension:!0,lazyImport:function(){return n.e(21).then(n.t.bind(null,1007,3))},web3Instance:e})}function oe(e,t){return function(){var n=Object(u.a)(i.a.mark((function n(r,a){var c,s,o;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e){n.next=29;break}if(a().contracts.DaoRegistryContract){n.next=6;break}return console.warn("Please init the DaoRegistry contract before the voting contract."),n.abrupt("return");case 6:if(c="",!(s=t||"")){n.next=12;break}return n.next=11,Object(b.h)(s,e);case 11:c=n.sent;case 12:if(s||c){n.next=19;break}return n.next=15,Object(b.c)(d.a.voting,null===(o=a().contracts.DaoRegistryContract)||void 0===o?void 0:o.instance);case 15:return s=n.sent,n.next=18,Object(b.h)(s,e);case 18:c=n.sent;case 19:n.t0=c,n.next="VotingContract"===n.t0?22:"OffchainVotingContract"===n.t0?25:28;break;case 22:return n.next=24,W(e,s)(r,a);case 24:return n.abrupt("return",n.sent);case 25:return n.next=27,Y(e,s)(r,a);case 27:return n.abrupt("return",n.sent);case 28:throw new Error("Voting contract name could not be found.");case 29:n.next=34;break;case 31:n.prev=31,n.t1=n.catch(0),console.warn("The voting contract could not be found in the DAO. Are you sure you meant to add this contract's ABI?");case 34:case"end":return n.stop()}}),n,null,[[0,31]])})));return function(e,t){return n.apply(this,arguments)}}()}function ie(e){var t=e.type,n=Object(s.a)(e,p);return Object(c.a)({type:t},n)}function ue(e){var t=e.actionType,n=e.adapterNameForRedux,r=e.adapterOrExtensionName,a=e.contractAddress,c=e.isExtension,s=void 0!==c&&c,o=e.lazyImport,d=e.web3Instance;return function(){var e=Object(u.a)(i.a.mark((function e(c,u){var l,j,p,O,h,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:if(p=e.sent,O=p.default,h=O,e.t0=a,e.t0){e.next=18;break}if(!s){e.next=14;break}return e.next=11,Object(f.a)(r,null===(l=u().contracts.DaoRegistryContract)||void 0===l?void 0:l.instance);case 11:e.t1=e.sent,e.next=17;break;case 14:return e.next=16,Object(b.c)(r,null===(j=u().contracts.DaoRegistryContract)||void 0===j?void 0:j.instance);case 16:e.t1=e.sent;case 17:e.t0=e.t1;case 18:m=e.t0,c(ie({type:t,abi:h,contractAddress:m,adapterOrExtensionName:n,instance:new d.eth.Contract(h,m)})),e.next=25;break;case 22:e.prev=22,e.t2=e.catch(0),console.warn('The contract "'.concat(r,"\" could not be found in the DAO. Are you sure you meant to add this contract's ABI?"));case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t,n){return e.apply(this,arguments)}}()}var de=n(196)},194:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(81);function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(null===e||"undefined"===typeof e)return"---";if(Object(r.a)(e)){var n=e.substring(0,t),a=e.substring(e.length-3);return n+"..."+a}return e}},195:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(2),a=n.n(r),c=n(10),s=n(62),o=n.n(s);function i(e,t){return u.apply(this,arguments)}function u(){return(u=Object(c.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return e.next=5,n.methods.getExtensionAddress(o.a.utils.sha3(t)).call();case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},196:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(3),a="SET_SUBGRAPH_NETWORK_STATUS";function c(e){return Object(r.a)({type:a},e)}},198:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(4),a=n(3),c=n(1),s=n(23),o=n(0),i=["",".",".","."],u={position:"absolute"},d={height:1,width:1};function l(e){var t=e.ariaLabel,n=e.intervalMs,l=void 0===n?1e3:n,b=e.fadeInProps,j=Object(a.a)(Object(a.a)({},b),{},{inline:!0}),f=Object(c.useState)(1),p=Object(r.a)(f,2),O=p[0],h=p[1];return Object(c.useEffect)((function(){var e=setInterval((function(){return h((function(e){return(e+1)%i.length}))}),l);return function(){clearInterval(e)}}),[l]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("span",{"aria-label":t,style:u,children:[Object(o.jsx)("span",{children:O>=0&&i[0]}),Object(o.jsx)("span",{children:O>=1&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[1]}))}),Object(o.jsx)("span",{children:O>=2&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[2]}))}),Object(o.jsx)("span",{children:O>=3&&Object(o.jsx)(s.a,Object(a.a)(Object(a.a)({},j),{},{children:i[3]}))})]}),Object(o.jsx)("span",{style:d,children:"\xa0"})]})}},199:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r=n(2),a=n.n(r),c=n(32),s=n(10),o=n(3),i=n(4),u=n(1),d=n(14),l=n(20),b=n(29),j=n(60),f=n(15),p=n(39),O=n(40),h=n(5),m=n(69),v=n(27),x=n(49),N=n(23),g=n(41),E=n(9),A=n(0);function w(e){var t=e.checkApplicant,n=e.proposal,r=n.snapshotDraft,w=n.refetchProposalOrDraft,I=Object(u.useState)(),y=Object(i.a)(I,2),C=y[0],D=y[1],k=Object(u.useRef)({invalidApplicantMessage:""}),_=Object(d.c)((function(e){return e.contracts})),T=Object(d.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),S=Object(f.f)(),R=S.account,P=S.web3Instance,F=Object(f.a)(),L=F.txEtherscanURL,M=F.txIsPromptOpen,B=F.txSend,G=F.txStatus,U=Object(p.f)(),V=U.isDisabled,W=U.openWhyDisabledModal,Y=U.WhyDisabledModal,K=U.setOtherDisabledReasons,H=Object(O.i)(),z=H.proposalSignAndSendStatus,q=H.signAndSendProposal,J=Object(f.b)().fast,Q=Object(O.a)(t),X=Q.checkApplicantError,$=Q.checkApplicantInvalidMsg,Z=Q.checkApplicantStatus,ee=Q.isApplicantValid,te=G===h.f.AWAITING_CONFIRM||G===h.f.PENDING||z===h.f.AWAITING_CONFIRM||z===h.f.PENDING,ne=G===h.f.FULFILLED&&z===h.f.FULFILLED,re=te||ne||M;function ae(){return(ae=Object(s.a)(a.a.mark((function e(){var t,n,s,i,u,d,j,f,p,O,h,m,v;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,T){e.next=3;break}throw new Error("No DAO Registry address was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot draft was found.");case 5:return t=Object(b.e)(r.actionId,_),n=r.msg,s=n.payload,i=s.name,u=s.body,d=s.metadata,j=n.timestamp,e.next=9,q({partialProposalData:{name:i,body:u,metadata:d,timestamp:j},adapterAddress:t.contractAddress,type:l.SnapshotType.proposal});case 9:return f=e.sent,p=f.data,O=f.signature,h=Object(l.prepareVoteProposalData)({payload:{name:p.payload.name,body:p.payload.body,choices:p.payload.choices,snapshot:p.payload.snapshot.toString(),start:p.payload.start,end:p.payload.end},sig:O,space:p.space,timestamp:parseInt(p.timestamp)},P),m=[T,r.idInDAO].concat(Object(c.a)(d.submitActionArgs||[]),[h]),v=Object(o.a)({from:R||""},J?{gasPrice:J}:null),e.next=17,B("submitProposal",t.instance.methods,m,v);case 17:w(),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(0),D(e.t0);case 23:case"end":return e.stop()}}),e,null,[[0,20]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){t&&(X&&console.warn("Error checking if the applicant address is valid: ".concat(X.message)),Z===E.a.FULFILLED&&!ee&&$&&(k.current=Object(o.a)(Object(o.a)({},k.current),{},{invalidApplicantMessage:$})),K(Object.values(k.current)))}),[t,X,$,Z,ee,K]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsxs)("div",{children:[Object(A.jsx)("button",{className:"proposaldetails__button",disabled:V||re,onClick:V||re?function(){}:function(){return ae.apply(this,arguments)},children:te?Object(A.jsx)(g.a,{}):ne?"Done":"Sponsor"}),Object(A.jsx)(v.a,{error:C,renderText:"Something went wrong"}),re&&Object(A.jsx)("div",{className:"form__submit-status-container",children:function(){if(G===h.f.AWAITING_CONFIRM||z===h.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(G){case h.f.PENDING:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(m.a,{intervalMs:2e3,messages:j.b,useFirstItemStart:!0,render:function(e){return Object(A.jsx)(N.a,{children:e},e)}}),Object(A.jsx)(x.a,{url:L,isPending:!0})]});case h.f.FULFILLED:return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("div",{children:"Proposal submitted!"}),Object(A.jsx)(x.a,{url:L})]});default:return null}}()}),V&&Object(A.jsx)("button",{className:"button--help-centered",onClick:W,children:"Why is sponsoring disabled?"})]}),Object(A.jsx)(Y,{title:"Why is sponsoring disabled?"})]})}},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b}));var r=n(4),a=n(1),c=n(62),s=n.n(c),o=n(169),i=n(9),u=n(11),d=n(0),l=Object(a.createContext)({});function b(e){var t,n=e.children,c=e.defaultChain,b=e.defaultTheme,j=void 0===b?o.a.DARK:b,f=e.onBeforeConnect,p=e.onBeforeDisconnect,O=e.providerOptions,h=Object(a.useRef)(new s.a(new s.a.providers.WebsocketProvider(u.n))),m=Object(a.useState)(),v=Object(r.a)(m,2),x=v[0],N=v[1],g={defaultChain:c,defaultTheme:j,onBeforeConnect:f,onBeforeDisconnect:p,providerOptions:O},E=Object(o.b)(g),A=E.account,w=E.connected,I=E.connectWeb3Modal,y=E.disconnectWeb3Modal,C=E.error,D=E.initialCachedConnectorCheckStatus,k=E.networkId,_=void 0===k?x:k,T=E.provider,S=void 0===T?null===(t=h.current)||void 0===t?void 0:t.currentProvider:T,R=E.web3Instance,P=void 0===R?h.current:R,F=E.web3Modal;Object(a.useEffect)((function(){var e;w||D!==i.a.FULFILLED||(null===(e=h.current)||void 0===e||e.eth.net.getId().then(N).catch((function(){return N(void 0)})))}),[w,D]);var L={account:A,connected:w,connectWeb3Modal:I,disconnectWeb3Modal:y,error:C,initialCachedConnectorCheckStatus:D,networkId:_,provider:S,providerOptions:O,web3Instance:P,web3Modal:F};return Object(d.jsx)(l.Provider,{value:L,children:n})}},23:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(3),a=(n(1),n(964)),c=n(0),s=function(e){return{transition:"opacity ".concat(e.duration||300,"ms cubic-bezier(0, 0.69, 0.32, 0.64)"),opacity:0}},o={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};function i(e){var t=e.inline;return Object(c.jsx)(a.a,{appear:!0,in:void 0===e.show||e.show,timeout:e.duration||300,children:function(n){return t?Object(c.jsx)("span",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children}):Object(c.jsx)("div",{style:Object(r.a)(Object(r.a)({},s(e)),o[n]),children:e.children})}})}},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),a=n(4),c=n(1),s=n(13),o=n(23),i=n(0);function u(e){var t=e.error,n=e.renderText,u=Object(c.useState)(!1),d=Object(a.a)(u,2),l=d[0],b=d[1],j="function"!==typeof t&&(4001===(null===t||void 0===t?void 0:t.code)||/^(the )?user rejected (the )?request$/g.test(Object(s.h)((null===t||void 0===t?void 0:t.message)||""))),f="string"===typeof n?n:n(),p="string"===typeof n&&"function"!==typeof t&&Object(s.h)(n)===Object(s.h)((null===t||void 0===t?void 0:t.message)||"");return!t||j?null:Object(i.jsx)(o.a,{children:Object(i.jsxs)("div",{className:"text-center",children:[Object(i.jsx)("p",{className:"error-message",children:f}),t&&!p&&Object(i.jsxs)("details",Object(r.a)(Object(r.a)({},e.detailsProps),{},{children:[Object(i.jsx)("summary",{"aria-expanded":l,className:"error-message",onClick:function(){return b(!l)},style:{cursor:"pointer",outline:"none"},children:Object(i.jsx)("small",{children:"Details"})}),Object(i.jsx)("p",{className:"error-message",children:Object(i.jsx)("small",{children:"function"===typeof t?t():t.message})})]}))]})})}},29:function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return N})),n.d(t,"f",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"g",(function(){return A})),n.d(t,"h",(function(){return I})),n.d(t,"i",(function(){return C})),n.d(t,"j",(function(){return _}));var r=n(2),a=n.n(r),c=n(3),s=n(32),o=n(10),i=n(173),u=n.n(i);function d(e,t,n,r,a){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(a.a.mark((function e(t,n,r,i,d){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(o.a)(a.a.mark((function e(o,l){var b,j,f,p;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b=u.a,j=n[t],e.next=5,j.apply(void 0,Object(s.a)(r)).estimateGas({from:i.from,value:i.value});case 5:return f=e.sent,p=new b(f).decimalPlaces(0,u.a.ROUND_DOWN).toNumber(),e.next=9,j.apply(void 0,Object(s.a)(r)).send(Object(c.a)(Object(c.a)({},i),{},{gas:p})).on("transactionHash",(function(e){d&&d(e)})).on("receipt",(function(e){o(e)})).on("error",(function(e){l(e)}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),l(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=n(62),j=n.n(b);function f(e,t){return p.apply(this,arguments)}function p(){return(p=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return e.next=5,n.methods.getAdapterAddress(j.a.utils.sha3(t)).call();case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var O=n(5);function h(e){try{var t=null===e||void 0===e?void 0:e.contractAddress;if(!t)throw new Error("Contract address was not found in the store.");return t}catch(n){throw n}}function m(e,t){try{switch(e){case O.a.configuration:return"";case O.a.distribute:return h(t.DistributeContract);case O.a.financing:case O.a.guildkick:return"";case O.a.managing:return h(t.ManagingContract);case O.a.onboarding:return h(t.OnboardingContract);case O.a.ragequit:return"";case O.a.tribute:return h(t.TributeContract);case O.a.tribute_nft:return h(t.TributeNFTContract);case O.a.voting:return h(t.VotingContract);default:throw new Error("Contract address was not found in the store.")}}catch(n){throw n}}var v,x=n(13);function N(e,t){try{var n=Object.values(t).find((function(t){return(null===t||void 0===t?void 0:t.contractAddress)&&Object(x.h)(t.contractAddress)===Object(x.h)(e)}));if(!n)throw new Error("Contract was not found in the store.");return n}catch(r){throw r}}function g(e,t){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return e.next=5,n.methods.getConfiguration(j.a.utils.sha3(t)).call();case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function A(e){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No DaoRegistry contract instance provided.");case 3:return n=t.methods,e.next=6,n.state().call();case 6:return r=e.sent,e.abrupt("return",0===Number(r)?v.CREATION:v.READY);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(e){e.CREATION="CREATION",e.READY="READY"}(v||(v={}));n(195);function I(e,t){return y.apply(this,arguments)}function y(){return(y=Object(o.a)(a.a.mark((function e(t,r){var c,s;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(0).then(n.t.bind(null,984,3));case 3:return c=e.sent,s=c.default,e.next=7,new r.eth.Contract(s,t).methods.getAdapterName().call();case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function C(e,t){return e===Math.log2(Number(t)+1)-1}var D=n(4),k=n(11);function _(e){return T.apply(this,arguments)}function T(){return(T=Object(o.a)(a.a.mark((function e(t){var r,c,s,o,i,u,d,l,b,j;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.blockNumber,c=void 0===r?"latest":r,s=t.calls,o=t.web3Instance,e.next=3,n.e(25).then(n.t.bind(null,985,3));case 3:if(i=e.sent,u=i.default,k.x){e.next=8;break}return console.error("No Multicall address was found. Are you sure it is set?"),e.abrupt("return");case 8:return e.prev=8,d=new o.eth.Contract(u,k.x),l=d.methods,e.next=12,l.aggregate(s.map((function(e){var t=Object(D.a)(e,3),n=t[0],r=t[1],a=t[2];return[n.toLowerCase(),o.eth.abi.encodeFunctionCall(r,a)]}))).call({},c);case 12:return b=e.sent,j=b.returnData,e.abrupt("return",j.map((function(e,t){var n=s[t][1].outputs||[],r=o.eth.abi.decodeParameters(n,e);return 1===r.__length__&&void 0!==r[0]?r[0]:o.eth.abi.decodeParameters(n||[],e)})));case 17:throw e.prev=17,e.t0=e.catch(8),e.t0;case 20:case"end":return e.stop()}}),e,null,[[8,17]])})))).apply(this,arguments)}},31:function(e,t,n){"use strict";var r,a,c,s;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s})),function(e){e[e.GOERLI=5]="GOERLI",e[e.KOVAN=42]="KOVAN",e[e.RINKEBY=4]="RINKEBY",e[e.ROPSTEN=3]="ROPSTEN",e[e.MAINNET=1]="MAINNET"}(r||(r={})),function(e){e.GOERLI="goerli",e.KOVAN="kovan",e.RINKEBY="rinkeby",e.ROPSTEN="ropsten",e.MAINNET="mainnet"}(a||(a={})),function(e){e.REQUIRED="This field is required.",e.INVALID_BYTES32="The value is not a bytes32.",e.INVALID_BYTES32_ARRAY="The value is not a comma-separated bytes32 format, ie. 0x...,0x...",e.INVALID_EMAIL="The email address is invalid.",e.INVALID_ETHEREUM_ADDRESS="The ethereum address is invalid.",e.INVALID_NUMBER="The value is not a number.",e.INVALID_NUMBER_ARRAY="The value is not a comma-separated number format, ie. 42,5,124"}(c||(c={})),function(e){e.FAILED="Failed",e.PASSED="Passed",e.REQUESTS="Proposals",e.VOTING="Voting"}(s||(s={}))},37:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return s}));var r,a,c,s;n(20),n(17);!function(e){e[e.EXISTS=0]="EXISTS",e[e.SPONSORED=1]="SPONSORED",e[e.PROCESSED=2]="PROCESSED"}(r||(r={})),function(e){e.Submit="Submit",e.Sponsor="Sponsor",e.OffchainVoting="OffchainVoting",e.OffchainVotingSubmitResult="OffchainVotingSubmitResult",e.OffchainVotingGracePeriod="OffchainVotingGracePeriod",e.OnchainVoting="OnchainVoting",e.Process="Process",e.Completed="Completed"}(a||(a={})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.IN_PROGRESS=1]="IN_PROGRESS",e[e.DONE=2]="DONE",e[e.FAILED=3]="FAILED"}(c||(c={})),function(e){e.Governance="Governance"}(s||(s={}))},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return x})),n.d(t,"f",(function(){return y}));var r=n(4),a=n(1);function c(){var e=Object(a.useState)(),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return s.current=!0,!n&&c(new AbortController),function(){s.current=!1,n&&n.abort()}}),[n]),{abortController:n,isMountedRef:s}}var s={count:0};function o(e,t){switch(t.type){case"increment":return{count:e.count+1};default:return e}}function i(){var e=Object(a.useReducer)(o,s),t=Object(r.a)(e,2),n=t[0],c=t[1];return[n.count,c]}var u=n(981),d=n(14),l=n(88);function b(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(u.a)(l.b,{variables:{id:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),n=Object(r.a)(t,2),c=n[0],s=n[1],o=s.called,i=s.loading,b=s.data,j=s.error,f=Object(a.useState)(),p=Object(r.a)(f,2),O=p[0],h=p[1],m=Object(a.useState)(),v=Object(r.a)(m,2),x=v[0],N=v[1],g=Object(a.useCallback)((function(){try{if(!i&&b){if(h(b.tributeDaos[0]),0===b.tributeDaos.length)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" dao address not found.'))}else if(j)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" is not a valid dao address.'))}catch(j){N(j)}}),[null===e||void 0===e?void 0:e.contractAddress,b,j,i]);return Object(a.useEffect)((function(){o||c()}),[o,c]),Object(a.useEffect)((function(){!i&&(null===e||void 0===e?void 0:e.contractAddress)&&g()}),[null===e||void 0===e?void 0:e.contractAddress,g,i]),{dao:O,gqlError:x}}var j=n(2),f=n.n(j),p=n(10),O=n(9),h=n(92),m=n(11);function v(){var e=Object(d.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(d.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(d.c)((function(e){return e.subgraphNetworkStatus.status})),c=Object(u.a)(l.b,{variables:{id:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),s=Object(r.a)(c,2),o=s[0],i=s[1],b=i.called,j=i.loading,v=i.data,x=i.error,N=Object(a.useState)(),g=Object(r.a)(N,2),E=g[0],A=g[1],w=Object(a.useState)(O.a.STANDBY),I=Object(r.a)(w,2),y=I[0],C=I[1],D=Object(a.useState)(),k=Object(r.a)(D,2),_=k[0],T=k[1],S=Object(a.useCallback)((function(){return P.apply(this,arguments)}),[t]),R=Object(a.useCallback)((function(){try{if(C(O.a.PENDING),!j&&v){var e=v.tributeDaos[0].totalUnits;A(Number(e)),C(O.a.FULFILLED)}else if(x)throw new Error(x.message)}catch(x){console.log("subgraph query error: ".concat(x.message)),S()}}),[v,x,S,j]);function P(){return(P=Object(p.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,C(O.a.PENDING),e.next=6,t.instance.methods.balanceOf(m.E,m.H).call();case 6:n=e.sent,A(Number(n)),C(O.a.FULFILLED),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0),A(void 0),T(e.t0),C(O.a.REJECTED);case 17:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){b||o()}),[b,o]),Object(a.useEffect)((function(){n===h.a.OK?!j&&(null===e||void 0===e?void 0:e.contractAddress)&&R():S()}),[null===e||void 0===e?void 0:e.contractAddress,S,R,j,n]),{totalUnits:E,totalUnitsError:_,totalUnitsStatus:y}}function x(){var e=Object(a.useRef)(!1);return Object(a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),{isMountedRef:e}}var N=n(206),g=n.n(N),E=n(15),A=n(23),w=n(115),I=n(0);function y(e){var t=(e||{}).skipIsActiveMemberCheck,n=void 0!==t&&t,c=Object(a.useState)([]),s=Object(r.a)(c,2),o=s[0],i=s[1],u=Object(a.useState)(!1),l=Object(r.a)(u,2),b=l[0],j=l[1],f=Object(d.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),p=Object(E.f)().connected,O=o&&o.find((function(e){return e})),h=function(){if(!p)return"Your wallet is not connected.";if(!f&&!n)return"Either you are not a member, or your membership is not active.";return O||""}(),m=!!h||!!O,v=!(!m||!h),x=Object(a.useCallback)((function(e){if(!v)return null;var t=e.title;return Object(I.jsx)(g.a,{ariaHideApp:!1,className:"modal-container",isOpen:b,onRequestClose:function(){j(!1)},overlayClassName:"modal-overlay",role:"dialog",style:{overlay:{zIndex:1e3}},children:Object(I.jsx)(A.a,{children:Object(I.jsxs)("div",{className:"modal",children:[Object(I.jsx)("button",{className:"modal__close-button modal__close-button--icon",onClick:function(){j(!1)},children:Object(I.jsx)(w.a,{})}),Object(I.jsxs)("div",{className:"card",children:[Object(I.jsx)("h2",{className:"modal__title",children:t||"Why disabled?"}),Object(I.jsx)("p",{children:h})]})]})})})}),[v,h,b]),N=Object(a.useCallback)((function(e){i(e.filter(Boolean))}),[]);return{disabledReason:h,isDisabled:m,openWhyDisabledModal:function(){j(!0)},setOtherDisabledReasons:N,WhyDisabledModal:x}}n(147)},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return w})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return G})),n.d(t,"g",(function(){return U})),n.d(t,"e",(function(){return H})),n.d(t,"h",(function(){return J})),n.d(t,"i",(function(){return Q})),n.d(t,"j",(function(){return X}));var r=n(2),a=n.n(r),c=n(10),s=n(4),o=n(1),i=n(14),u=n(442),d=n.n(u),l=n(9),b=n(29),j=n(15),f=n(13);function p(e){var t=Object(i.c)((function(e){return e.contracts.DaoRegistryContract})),n=Object(o.useState)(),r=Object(s.a)(n,2),u=r[0],p=r[1],O=Object(o.useState)(),h=Object(s.a)(O,2),m=h[0],v=h[1],x=Object(o.useState)(l.a.STANDBY),N=Object(s.a)(x,2),g=N[0],E=N[1],A=Object(o.useState)(),w=Object(s.a)(A,2),I=w[0],y=w[1],C=Object(j.f)().web3Instance,D=d()(e),k=Object(o.useCallback)((function(){return _.apply(this,arguments)}),[t,e,C]);function _(){return(_=Object(c.a)(a.a.mark((function n(){var r,c,o,i,u,d,j,O,h,m,x,N,g,A;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&C){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,E(l.a.PENDING),r=Object(f.k)(e,7),c=t.abi,o=t.contractAddress,i=c.find((function(e){return"isNotReservedAddress"===e.name})),u=[o,i,[e]],d=c.find((function(e){return"isNotZeroAddress"===e.name})),j=[o,d,[e]],O=c.find((function(e){return"getAddressIfDelegated"===e.name})),h=[u,j,[o,O,[e]]],n.next=15,Object(b.j)({calls:h,web3Instance:C});case 15:m=n.sent,x=Object(s.a)(m,3),N=x[0],g=x[1],A=x[2],N?g?e.toLowerCase()!==A.toLowerCase()?(y(!1),v("The applicant address ".concat(r," is already in use as a delegate key. The address must be removed as a delegate before it can become a member."))):(y(!0),v(void 0)):(y(!1),v("The applicant address ".concat(r," is invalid."))):(y(!1),v("The applicant address ".concat(r," is invalid because it is a DAO reserved address."))),E(l.a.FULFILLED),n.next=30;break;case 24:n.prev=24,n.t0=n.catch(2),y(void 0),v(void 0),p(n.t0),E(l.a.REJECTED);case 30:case"end":return n.stop()}}),n,null,[[2,24]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){D&&!e&&(p(void 0),v(void 0),y(void 0),E(l.a.STANDBY)),e&&k()}),[e,k,D]),{checkApplicantError:u,checkApplicantInvalidMsg:m,checkApplicantStatus:g,isApplicantValid:I}}var O=[];function h(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi.find((function(e){return"proposals"===e.name}))})),n=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),r=Object(o.useState)(O),u=Object(s.a)(r,2),d=u[0],f=u[1],p=Object(o.useState)(l.a.STANDBY),h=Object(s.a)(p,2),m=h[0],v=h[1],x=Object(o.useState)(),N=Object(s.a)(x,2),g=N[0],E=N[1],A=Object(j.f)().web3Instance;function w(){return(w=Object(c.a)(a.a.mark((function e(t){var n,r,c,s,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.proposalIds,r=t.proposalsAbi,c=t.registryAddress,s=t.web3Instance,e.prev=1,n.length){e.next=4;break}return e.abrupt("return");case 4:if((o=n.filter(s.utils.isHexStrict)).length){e.next=9;break}return v(l.a.FULFILLED),f([]),e.abrupt("return");case 9:return v(l.a.PENDING),E(void 0),i=o.map((function(e){return[c,r,[e]]})),e.next=14,Object(b.j)({calls:i,web3Instance:s});case 14:u=e.sent,f(o.map((function(e,t){return[e,u[t]]}))),v(l.a.FULFILLED),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(1),f(O),E(e.t0),v(l.a.REJECTED);case 24:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){e.length&&t&&n&&A&&function(e){w.apply(this,arguments)}({proposalIds:e,proposalsAbi:t,registryAddress:n,web3Instance:A})}),[e,t,n,A]),{daoProposals:d,daoProposalsStatus:m,daoProposalsError:g}}var m=n(443),v=n(32),x=n(7),N=n(20),g=n(11),E=n(39),A=n(5);function w(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.abi})),n=Object(i.c)((function(e){var t;return null===(t=e.contracts.BankExtensionContract)||void 0===t?void 0:t.contractAddress})),r=Object(o.useState)([]),u=Object(s.a)(r,2),d=u[0],f=u[1],p=Object(o.useState)(l.a.STANDBY),O=Object(s.a)(p,2),h=O[0],w=O[1],I=Object(o.useState)(),y=Object(s.a)(I,2),C=y[0],D=y[1],k=Object(j.f)().web3Instance,_=Object(E.e)().isMountedRef,T=null===t||void 0===t?void 0:t.find((function(e){return"getPriorAmount"===e.name})),S=Object(o.useCallback)((function(e){return R.apply(this,arguments)}),[]);function R(){return(R=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,i,u,d,l,j,f,p,O,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.bankAddress,r=t.getPriorAmountABI,c=t.snapshot,o=t.voterAddressesAndChoices,i=t.web3Instance,e.prev=1,u={},Object(x.a)(u,A.e.Yes,{percentage:0,units:0}),Object(x.a)(u,A.e.No,{percentage:0,units:0}),Object(x.a)(u,"totalUnits",0),d=u,l=[n,r,[g.E,g.H,c.toString()]],j=o.map((function(e){var t=Object(s.a)(e,1)[0];return[n,r,[t,g.H,c.toString()]]})),f=[l].concat(Object(v.a)(j)),e.next=8,Object(b.j)({calls:f,web3Instance:i});case 8:return p=e.sent,O=Object(m.a)(p),h=O[0],O.slice(1).forEach((function(e,t){var n=N.VoteChoicesIndex[o[t][1]]===N.VoteChoicesIndex[N.VoteChoicesIndex.Yes]?A.e.Yes:A.e.No;d[n].units+=Number(e)})),d[A.e.Yes].percentage=d[A.e.Yes].units/Number(h)*100,d[A.e.No].percentage=d[A.e.No].units/Number(h)*100,d.totalUnits=Number(h),e.abrupt("return",d);case 19:throw e.prev=19,e.t0=e.catch(1),e.t0;case 22:case"end":return e.stop()}}),e,null,[[1,19]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){var t=Array.isArray(e)?e:[e];if(n&&T&&t.length&&k){w(l.a.PENDING);var r=t.map(function(){var e=Object(c.a)(a.a.mark((function e(t){var r,c,s,o,i,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=null===t||void 0===t?void 0:t.msg.payload.snapshot,(s=null===t||void 0===t?void 0:t.idInSnapshot)&&c){e.next=4;break}return e.abrupt("return");case 4:if(o=null===t||void 0===t||null===(r=t.votes)||void 0===r?void 0:r.map((function(e){var t=e[Object.keys(e)[0]];return[t.msg.payload.metadata.memberAddress,t.msg.payload.choice]}))){e.next=7;break}return e.abrupt("return");case 7:return i=Object.entries(Object.fromEntries(o)),e.prev=8,e.next=11,S({bankAddress:n,getPriorAmountABI:T,snapshot:c,voterAddressesAndChoices:i,web3Instance:k});case 11:return u=e.sent,e.abrupt("return",[s,u]);case 15:return e.prev=15,e.t0=e.catch(8),e.abrupt("return");case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}());Promise.all(r).then((function(e){return e.filter((function(e){return e}))})).then((function(e){_.current&&(w(l.a.FULFILLED),f(e),D(void 0))})).catch((function(e){_.current&&(w(l.a.REJECTED),f([]),D(e))}))}}),[n,T,S,_,e,k]),{offchainVotingResults:d,offchainVotingResultsError:C,offchainVotingResultsStatus:h}}var I=n(3),y=n(52),C=n(55),D=[];function k(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),r=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),u=Object(j.f)().web3Instance,d=Object(o.useState)(D),f=Object(s.a)(d,2),p=f[0],O=f[1],h=Object(o.useState)(),m=Object(s.a)(h,2),v=m[0],x=m[1],N=Object(o.useState)(l.a.STANDBY),g=Object(s.a)(N,2),E=g[0],A=g[1],w=Object(o.useCallback)((function(){return I.apply(this,arguments)}),[e,r,t,u]);function I(){return(I=Object(c.a)(a.a.mark((function s(){var o,i,d,j,f,p,h,m,v,N,g,E;return a.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e.length&&r&&t&&u){s.next=2;break}return s.abrupt("return");case 2:if((o=e.filter(u.utils.isHexStrict)).length){s.next=7;break}return O(D),A(l.a.FULFILLED),s.abrupt("return");case 7:if(s.prev=7,i=r.find((function(e){return"votingAdapter"===e.name}))){s.next=11;break}throw new Error('No "votingAdapter" ABI function was found in the DAO registry ABI.');case 11:return d=o.map((function(e){return[t,i,[e]]})),A(l.a.PENDING),s.next=15,Object(b.j)({calls:d,web3Instance:u});case 15:return j=s.sent,s.next=18,n.e(0).then(n.t.bind(null,984,3));case 18:if(f=s.sent,p=f.default,h=p.find((function(e){return"getAdapterName"===e.name}))){s.next=23;break}throw new Error('No "getAdapterName" ABI function was found in the IVoting ABI.');case 23:if(m=o.filter((function(e,t){return j[t]!==y.a})),(v=j.filter((function(e){return e!==y.a}))).length){s.next=29;break}return O(D),A(l.a.FULFILLED),s.abrupt("return");case 29:return N=v.map((function(e){return[e,h,[]]})),s.next=32,Object(b.j)({calls:N,web3Instance:u});case 32:return g=s.sent,s.next=35,Promise.all(m.map(function(){var e=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.c)(g[n]);case 2:return r=e.sent,c=v[n],e.abrupt("return",[t,{votingAdapterName:g[n],votingAdapterAddress:c,getVotingAdapterABI:function(){return r},getWeb3VotingAdapterContract:function(){return new u.eth.Contract(r,c)}}]);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 35:E=s.sent,O(E),A(l.a.FULFILLED),s.next=45;break;case 40:s.prev=40,s.t0=s.catch(7),A(l.a.REJECTED),O([]),x(s.t0);case 45:case"end":return s.stop()}}),s,null,[[7,40]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){w()}),[w]),{proposalsVotingAdapters:p,proposalsVotingAdaptersError:v,proposalsVotingAdaptersStatus:E}}var _="Something went wrong while getting the proposal.",T="Proposal was not found.";function S(e,t){var n,r=Object(o.useState)(),i=Object(s.a)(r,1)[0],u=Object(o.useState)(),d=Object(s.a)(u,2),b=d[0],j=d[1],f=Object(o.useState)(),p=Object(s.a)(f,2),O=p[0],h=p[1],m=Object(o.useState)(!1),v=Object(s.a)(m,2),x=v[0],A=v[1],w=Object(o.useState)(),y=Object(s.a)(w,2),C=y[0],D=y[1],S=Object(o.useState)(l.a.STANDBY),R=Object(s.a)(S,2),P=R[0],F=R[1],L=Object(o.useState)([e]),M=Object(s.a)(L,2),B=M[0],G=M[1],U=Object(o.useState)(l.a.STANDBY),V=Object(s.a)(U,2),W=V[0],Y=V[1],K=Object(o.useState)(),H=Object(s.a)(K,2),z=H[0],q=H[1],J=Object(E.a)(),Q=J.abortController,X=J.isMountedRef,$=Object(E.b)(),Z=Object(s.a)($,2),ee=Z[0],te=Z[1],ne=k(B),re=ne.proposalsVotingAdapters,ae=ne.proposalsVotingAdaptersError,ce=ne.proposalsVotingAdaptersStatus,se=Object(o.useCallback)((function(){return le.apply(this,arguments)}),[null===Q||void 0===Q?void 0:Q.signal,e,X]),oe=Object(o.useCallback)((function(){return be.apply(this,arguments)}),[null===Q||void 0===Q?void 0:Q.signal,e,X,t]),ie=Object(o.useCallback)((function(){return je.apply(this,arguments)}),[se,oe]),ue=O?N.SnapshotType.proposal:b?N.SnapshotType.draft:void 0,de=b||O?{daoProposal:i,daoProposalVotingAdapter:null===(n=re[0])||void 0===n?void 0:n[1],getCommonSnapshotProposalData:function(){switch(ue){case N.SnapshotType.draft:return b;case N.SnapshotType.proposal:return O;default:return}},refetchProposalOrDraft:function(){te({type:"increment"})},snapshotDraft:b,snapshotProposal:O,snapshotType:ue}:void 0;function le(){return(le=Object(c.a)(a.a.mark((function t(){var n,r,c,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,F(l.a.PENDING),t.next=4,fetch("".concat(g.C,"/api/").concat(g.D,"/draft/").concat(e),{signal:null===Q||void 0===Q?void 0:Q.signal});case 4:if((n=t.sent).ok){t.next=7;break}throw new Error(_);case 7:return t.next=9,n.json();case 9:if(r=t.sent,X.current){t.next=12;break}return t.abrupt("return");case 12:if(r&&Object.keys(r).length){t.next=15;break}throw A(!0),new Error(T);case 15:return c=Object.keys(r)[0],s=Object(I.a)({idInDAO:c,idInSnapshot:c},r[c]),F(l.a.FULFILLED),j(s),t.abrupt("return",s);case 22:if(t.prev=22,t.t0=t.catch(0),X.current){t.next=26;break}return t.abrupt("return");case 26:F(l.a.REJECTED),D(t.t0);case 28:case"end":return t.stop()}}),t,null,[[0,22]])})))).apply(this,arguments)}function be(){return(be=Object(c.a)(a.a.mark((function n(){var r,c,s,o,i,u;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,F(l.a.PENDING),n.next=4,fetch("".concat(g.C,"/api/").concat(g.D,"/proposal/").concat(e,"?searchUniqueDraftId=true&includeVotes=true"),{signal:null===Q||void 0===Q?void 0:Q.signal});case 4:if((c=n.sent).ok){n.next=9;break}if(t!==N.SnapshotType.proposal){n.next=8;break}throw new Error(_);case 8:return n.abrupt("return");case 9:return n.next=11,c.json();case 11:if(s=n.sent,X.current){n.next=14;break}return n.abrupt("return");case 14:if(s&&Object.keys(s).length){n.next=19;break}if(t!==N.SnapshotType.proposal){n.next=18;break}throw A(!0),new Error(T);case 18:return n.abrupt("return");case 19:return o=Object.keys(s)[0],i=(null===(r=s[o])||void 0===r?void 0:r.data.erc712DraftHash)||o,u=Object(I.a)({idInDAO:i,idInSnapshot:o},s[o]),F(l.a.FULFILLED),h(u),n.abrupt("return",u);case 27:if(n.prev=27,n.t0=n.catch(0),X.current){n.next=31;break}return n.abrupt("return");case 31:F(l.a.REJECTED),D(n.t0);case 33:case"end":return n.stop()}}),n,null,[[0,27]])})))).apply(this,arguments)}function je(){return(je=Object(c.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe();case 2:if(t=e.sent){e.next=9;break}return e.next=6,se();case 6:return n=e.sent,j(n),e.abrupt("return");case 9:h(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){if(null===Q||void 0===Q?void 0:Q.signal)switch(t){case N.SnapshotType.draft:se();break;case N.SnapshotType.proposal:oe();break;default:ie()}}),[null===Q||void 0===Q?void 0:Q.signal,se,oe,ie,ee,t]),Object(o.useEffect)((function(){0!==ee&&G([e])}),[e,ee]),Object(o.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[P,ce];P!==e?a.some((function(e){return e===t}))&&0===ee?Y(t):a.every((function(e){return e===n}))?Y(n):P!==n||ce!==n||re.length?a.some((function(e){return e===r}))&&Y(r):Y(n):Y(e)}),[P,re.length,ce,ee]),Object(o.useEffect)((function(){q([C,ae].find((function(e){return e})))}),[C,ae]),{proposalData:de,proposalError:z,proposalNotFound:x,proposalStatus:W}}var R=n(17);var P=[];function F(e){return L.apply(this,arguments)}function L(){return(L=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(g.C,"/api/").concat(g.D),e.next=4,fetch("".concat(n,"/drafts/").concat(t));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot drafts.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).filter((function(e){var t=Object(s.a)(e,2);t[0];return!1===t[1].data.sponsored})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function M(e){return B.apply(this,arguments)}function B(){return(B=Object(c.a)(a.a.mark((function e(t){var n,r,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(g.C,"/api/").concat(g.D),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return c=e.sent,o=Object.entries(c).map((function(e){var t=Object(s.a)(e,2),n=t[0],r=t[1];return[r.data.erc712DraftHash||n,r]})),e.abrupt("return",o);case 14:throw e.prev=14,e.t0=e.catch(0),e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function G(e){var t=e.adapterName,n=e.includeProposalsExistingOnlyOffchain,r=void 0!==n&&n,u=Object(o.useState)(),d=Object(s.a)(u,2),p=d[0],O=d[1],m=Object(o.useState)(P),g=Object(s.a)(m,2),E=g[0],A=g[1],w=Object(o.useState)(l.a.STANDBY),y=Object(s.a)(w,2),C=y[0],D=y[1],_=Object(o.useState)(),T=Object(s.a)(_,2),S=T[0],L=T[1],B=Object(o.useState)(P),G=Object(s.a)(B,2),V=G[0],W=G[1],Y=Object(o.useState)(P),K=Object(s.a)(Y,2),H=K[0],z=K[1],q=Object(o.useState)(l.a.STANDBY),J=Object(s.a)(q,2),Q=J[0],X=J[1],$=Object(o.useState)(),Z=Object(s.a)($,2),ee=Z[0],te=Z[1],ne=Object(i.c)((function(e){return e.contracts})),re=h(Object(o.useMemo)((function(){return E.map((function(e){return e[0]}))}),[E])),ae=re.daoProposals,ce=re.daoProposalsError,se=re.daoProposalsStatus,oe=k(V),ie=oe.proposalsVotingAdapters,ue=oe.proposalsVotingAdaptersError,de=oe.proposalsVotingAdaptersStatus,le=U(ie),be=le.proposalsVotingState,je=le.proposalsVotingStateError,fe=le.proposalsVotingStateStatus,pe=function(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),n=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),r=Object(j.f)().web3Instance,u=Object(o.useState)([]),d=Object(s.a)(u,2),f=d[0],p=d[1],O=Object(o.useState)(),h=Object(s.a)(O,2),m=h[0],v=h[1],N=Object(o.useState)(l.a.STANDBY),g=Object(s.a)(N,2),E=g[0],A=g[1],w=Object(o.useCallback)((function(){return I.apply(this,arguments)}),[e,n,t,r]);function I(){return(I=Object(c.a)(a.a.mark((function o(){var i,u,d;return a.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e.length&&n&&t&&r){o.next=2;break}return o.abrupt("return");case 2:if((i=e.filter((function(e){var t=Object(s.a)(e,1)[0];return r.utils.isHexStrict(t)}))).length){o.next=7;break}return A(l.a.FULFILLED),p([]),o.abrupt("return");case 7:return o.prev=7,A(l.a.PENDING),o.next=11,Promise.all(i.map(function(){var e=Object(c.a)(a.a.mark((function e(n){var r,c,o,i,u,d;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(s.a)(n,2),c=r[0],o=r[1],i=o.votingAdapterAddress,u=o.getVotingAdapterABI,d=o.votingAdapterName,e.t0=i,e.next=4,y(d,u());case 4:return e.t1=e.sent,e.t2=[t,c],e.abrupt("return",[e.t0,e.t1,e.t2]);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:return u=o.sent,o.next=14,Object(b.j)({calls:u,web3Instance:r});case 14:d=o.sent,A(l.a.FULFILLED),p(i.map((function(e,t){var n=Object(s.a)(e,2),r=n[0],a=n[1].votingAdapterName;return[r,Object(x.a)({},a,d[t])]}))),o.next=24;break;case 19:o.prev=19,o.t0=o.catch(7),A(l.a.REJECTED),p([]),v(o.t0);case 24:case"end":return o.stop()}}),o,null,[[7,19]])})))).apply(this,arguments)}function y(e,t){return C.apply(this,arguments)}function C(){return(C=Object(c.a)(a.a.mark((function e(t,n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===R.c.OffchainVotingContract?4:e.t0===R.c.VotingContract?8:12;break;case 4:if(r=n.find((function(e){return"votes"===e.name}))){e.next=7;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 7:return e.abrupt("return",r);case 8:if(c=n.find((function(e){return"votes"===e.name}))){e.next=11;break}throw new Error('No "votes" function ABI was found for "'.concat(t,'".'));case 11:return e.abrupt("return",c);case 12:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 13:e.next=18;break;case 15:throw e.prev=15,e.t1=e.catch(0),e.t1;case 18:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){w()}),[w]),{proposalsVotes:f,proposalsVotesError:m,proposalsVotesStatus:E}}(ie),Oe=pe.proposalsVotes,he=pe.proposalsVotesError,me=pe.proposalsVotesStatus;function ve(){return(ve=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,D(l.a.PENDING),L(void 0),e.next=5,F(t);case 5:return n=e.sent,e.next=8,M(t);case 8:if(r=e.sent,(c=[].concat(Object(v.a)(n),Object(v.a)(r))).length){e.next=13;break}return D(l.a.FULFILLED),e.abrupt("return");case 13:A(c),D(l.a.FULFILLED),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(0),D(l.a.REJECTED),A(P),L(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){var e,n,r=null===(e=Object.entries(ne).find((function(e){var n=Object(s.a)(e,2),r=(n[0],n[1]);return(null===r||void 0===r?void 0:r.adapterOrExtensionName)===t})))||void 0===e||null===(n=e[1])||void 0===n?void 0:n.contractAddress;O(r)}),[p,t,ne]),Object(o.useEffect)((function(){p&&function(e){ve.apply(this,arguments)}(p)}),[p]),Object(o.useEffect)((function(){if(ae.length)return W(r?ae.map((function(e){return Object(s.a)(e,1)[0]})):ae.filter((function(e){var t=Object(s.a)(e,2);t[0];return"0"!==t[1].flags})).map((function(e){return Object(s.a)(e,1)[0]})))}),[ae,r]),Object(o.useEffect)((function(){if(Q===l.a.FULFILLED){var e=V.map((function(e){var t,n,r,a=ae.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e)}))||[],c=Object(s.a)(a,2)[1],o=E.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e)}))||[],i=Object(s.a)(o,2),u=i[0],d=i[1],l=(null===d||void 0===d?void 0:d.msg.type)===N.SnapshotType.draft,b=u&&l?Object(I.a)(Object(I.a)({},d),{},{idInDAO:e,idInSnapshot:u}):void 0,j=u&&!l?Object(I.a)(Object(I.a)({},d),{},{idInDAO:e,idInSnapshot:u}):void 0,p=null===(t=ie.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e)})))||void 0===t?void 0:t[1],O=null===(n=be.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(n)===Object(f.h)(e)})))||void 0===n?void 0:n[1];return{daoProposal:c,daoProposalVotes:null===(r=Oe.find((function(t){var n=Object(s.a)(t,1)[0];return Object(f.h)(e)===Object(f.h)(n)})))||void 0===r?void 0:r[1],daoProposalVotingAdapter:p,daoProposalVotingState:O,idInDAO:e,snapshotDraft:b,snapshotProposal:j,snapshotType:l?N.SnapshotType.draft:N.SnapshotType.proposal,getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){}}})).filter((function(e){return e.snapshotDraft||e.snapshotProposal}));z(e)}}),[V,ae,Q,Oe,ie,be,E]),Object(o.useEffect)((function(){var e=l.a.STANDBY,t=l.a.PENDING,n=l.a.FULFILLED,r=l.a.REJECTED,a=[se,de,fe,me,C];C!==e?a.some((function(e){return e===t}))?X(t):a.every((function(e){return e===n}))?X(n):(C!==n||E.length)&&(de!==n||ie.length)?a.some((function(e){return e===r}))&&X(r):X(n):X(e)}),[V.length,se,me,ie,de,fe,E.length,C]),Object(o.useEffect)((function(){te([ce,he,ue,je,S].find((function(e){return e})))}),[ce,he,ue,je,S]),{proposals:H,proposalsError:ee,proposalsStatus:Q}}function U(e){var t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),r=Object(j.f)().web3Instance,u=Object(o.useState)([]),d=Object(s.a)(u,2),f=d[0],p=d[1],O=Object(o.useState)(),h=Object(s.a)(O,2),m=h[0],v=h[1],x=Object(o.useState)(l.a.STANDBY),N=Object(s.a)(x,2),g=N[0],E=N[1],A=Object(o.useCallback)((function(){return w.apply(this,arguments)}),[e,t,r]);function w(){return(w=Object(c.a)(a.a.mark((function c(){var o,i,u,d,j;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t&&e.length&&r){a.next=2;break}return a.abrupt("return");case 2:if((o=e.filter((function(e){var t=Object(s.a)(e,1)[0];return r.utils.isHexStrict(t)}))).length){a.next=6;break}return E(l.a.FULFILLED),a.abrupt("return");case 6:return a.prev=6,a.next=9,n.e(0).then(n.t.bind(null,984,3));case 9:if(i=a.sent.default,u=i.find((function(e){return"voteResult"===e.name}))){a.next=13;break}throw new Error('No "voteResult" ABI function was found on the "IVoting" contract.');case 13:return d=o.map((function(e){var n=Object(s.a)(e,2),r=n[0];return[n[1].votingAdapterAddress,u,[t,r]]})),E(l.a.PENDING),a.next=17,Object(b.j)({calls:d,web3Instance:r});case 17:j=a.sent,E(l.a.FULFILLED),p(o.map((function(e,t){return[Object(s.a)(e,1)[0],j[t]]}))),a.next=27;break;case 22:a.prev=22,a.t0=a.catch(6),E(l.a.REJECTED),p([]),v(a.t0);case 27:case"end":return a.stop()}}),c,null,[[6,22]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){A()}),[A]),{proposalsVotingState:f,proposalsVotingStateError:m,proposalsVotingStateStatus:g}}var V=n(25),W=n(37),Y=n(50),K="production"===g.m?15e3:5e3;function H(e,t){var n,r,u=e.daoProposalVotingAdapter,d=e.snapshotDraft,l=e.snapshotProposal,p=(l||{}).votes,O=(null===d||void 0===d?void 0:d.idInDAO)||(null===l||void 0===l?void 0:l.idInDAO),h=(t||{}).pollInterval,m=void 0===h?K:h,v=Object(j.f)().web3Instance,x=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),N=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.abi})),g=Object(o.useState)(),E=Object(s.a)(g,2),A=E[0],w=E[1],I=Object(o.useState)(),D=Object(s.a)(I,2),k=D[0],_=D[1],T=Object(o.useState)(),S=Object(s.a)(T,2),R=S[0],P=S[1],F=Object(o.useState)(),L=Object(s.a)(F,2),M=L[0],B=L[1],G=Object(o.useRef)(),U=Object(o.useRef)(!1),H=X(null===(n=e.snapshotProposal)||void 0===n?void 0:n.msg.payload.start,null===(r=e.snapshotProposal)||void 0===r?void 0:r.msg.payload.end),z=H.hasVotingTimeStarted,q=H.hasVotingTimeEnded,J=H.votingTimeStartEndInitReady,Q=!!A&&Object(C.d)(W.b.EXISTS,A.flags),$=!!A&&Object(C.d)(W.b.SPONSORED,A.flags),Z=!!A&&Object(C.d)(W.b.PROCESSED,A.flags),ee=null===u||void 0===u?void 0:u.votingAdapterAddress,te=null===u||void 0===u?void 0:u.getVotingAdapterABI(),ne=void 0!==k&&Object(V.isAddress)(k.reporter)&&Object(f.h)(k.reporter)!==y.a,re=void 0!==R&&Y.a[R]===Y.a[Y.a.GRACE_PERIOD],ae=Object(o.useCallback)((function(){return se.apply(this,arguments)}),[u,N,x,te,ee,O,v]);function ce(e){return{daoProposal:A,daoProposalVoteResult:R,daoProposalVotes:k,proposalFlowStatusError:M,status:e}}function se(){return(se=Object(c.a)(a.a.mark((function e(){var t,n,r,c,o,i,d,l,j,f,p,h;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,N&&x&&O&&v){e.next=3;break}return e.abrupt("return");case 3:if(t=N.filter((function(e){return"proposals"===e.name}))[0],u){e.next=12;break}return e.next=7,Object(b.j)({calls:[[x,t,[O]]],web3Instance:v});case 7:return n=e.sent,r=Object(s.a)(n,1),c=r[0],w(c),e.abrupt("return");case 12:if(te&&ee){e.next=14;break}return e.abrupt("return");case 14:return o=te.filter((function(e){return"voteResult"===e.name}))[0],i=te.filter((function(e){return"votes"===e.name}))[0],d=[[x,t,[O]],[ee,i,[x,O]],[ee,o,[x,O]]],e.next=19,Object(b.j)({calls:d,web3Instance:v});case 19:l=e.sent,j=Object(s.a)(l,3),f=j[0],p=j[1],h=j[2],w(f),_(p),P(h),e.next=32;break;case 29:throw e.prev=29,e.t0=e.catch(0),e.t0;case 32:case"end":return e.stop()}}),e,null,[[0,29]])})))).apply(this,arguments)}return Object(o.useEffect)((function(){ae().catch((function(e){B(e)}))}),[ae]),Object(o.useEffect)((function(){Z&&(U.current=!0),G.current&&clearInterval(G.current);var e=setInterval(Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,U.current&&G.current&&clearInterval(G.current),e.next=4,ae();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),G.current&&clearInterval(G.current),B(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])}))),m);G.current=e}),[Z,m,ae]),Object(o.useEffect)((function(){return Z&&G.current&&clearInterval(G.current),function(){G.current&&clearInterval(G.current)}}),[Z]),!J||z||Q?J&&!z&&Q?ce(W.c.Sponsor):J&&z&&!q&&$?ce(W.c.OffchainVoting):J&&q&&$&&!(null===p||void 0===p?void 0:p.length)&&!ne?ce(re?W.c.OffchainVotingGracePeriod:W.c.Process):J&&q&&$&&!ne?ce(W.c.OffchainVotingSubmitResult):J&&q&&$&&ne&&re?ce(W.c.OffchainVotingGracePeriod):$&&J&&q&&ne&&!re?ce(W.c.Process):Z?ce(W.c.Completed):{daoProposal:A,daoProposalVoteResult:R,daoProposalVotes:k,proposalFlowStatusError:M,status:void 0}:ce(W.c.Submit)}var z=n(60),q=n(99);function J(){var e=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(i.c)((function(e){return e.contracts})),n=Object(i.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.memberAddress})),r=Object(q.a)(),u=r.account,d=r.provider,l=r.web3Instance,j=Object(o.useState)(),f=Object(s.a)(j,2),p=f[0],O=f[1],h=Object(o.useState)(),m=Object(s.a)(h,2),v=m[0],x=m[1],E=Object(o.useState)(A.f.STANDBY),w=Object(s.a)(E,2),C=w[0],D=w[1];function k(){return(k=Object(c.a)(a.a.mark((function r(c){var s,o,i,j,f,p,h,m,v,E,w,C,k,_,T,S,R,P,F,L,M,B;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(s=c.partialVoteData,o=c.adapterName,i=c.proposalIdInDAO,j=c.proposalIdInSnapshot,r.prev=1,l){r.next=4;break}throw new Error("No Web3 instance was found.");case 4:if(u){r.next=6;break}throw new Error("No account was found.");case 6:if(n){r.next=8;break}throw new Error("No member address was found.");case 8:if(e){r.next=10;break}throw new Error('No "DaoRegistry" address was found.');case 10:if(g.C){r.next=12;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 12:if(g.D){r.next=14;break}throw new Error('No Snapshot "SPACE" was found.');case 14:return D(A.f.AWAITING_CONFIRM),f=o?Object(b.d)(o,t):y.a,p=s.choice,h=s.metadata,m=void 0===h?{}:h,r.next=19,Object(N.getSpace)(g.C,g.D);case 19:return v=r.sent,E=v.data,w={chainId:g.k,choice:p,metadata:Object(I.a)(Object(I.a)({},m),{},{memberAddress:n})},C={proposalId:i,space:g.D,token:E.token},r.next=25,Object(N.buildVoteMessage)(w,C,g.C);case 25:return k=r.sent,_=Object(N.prepareVoteMessage)({timestamp:k.timestamp,payload:{proposalId:k.payload.proposalId,choice:N.VoteChoicesIndex[p]}}),T=Object(N.getDomainDefinition)(Object(I.a)(Object(I.a)({},_),{},{type:N.SnapshotType.vote}),e,f,g.k),S=T.domain,R=T.types,P=JSON.stringify({types:R,domain:S,primaryType:z.a,message:_}),r.next=31,Object(N.signMessage)(d,u,P);case 31:return F=r.sent,D(A.f.PENDING),r.next=35,Object(N.submitMessage)(g.C,u,Object(I.a)(Object(I.a)({},k),{},{payload:Object(I.a)(Object(I.a)({},k.payload),{},{proposalId:j})}),F,{actionId:S.actionId,chainId:S.chainId,verifyingContract:S.verifyingContract,message:_});case 35:return L=r.sent,M=L.data,B={data:k,signature:F,uniqueId:M.uniqueId},D(A.f.FULFILLED),O(B),r.abrupt("return",B);case 43:throw r.prev=43,r.t0=r.catch(1),D(A.f.REJECTED),x(r.t0),r.t0;case 48:case"end":return r.stop()}}),r,null,[[1,43]])})))).apply(this,arguments)}return{signAndSendVote:function(e){return k.apply(this,arguments)},voteData:p,voteDataError:v,voteDataStatus:C}}function Q(){var e=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.contractAddress})),t=Object(i.c)((function(e){var t;return null===(t=e.contracts.DaoRegistryContract)||void 0===t?void 0:t.instance})),n=Object(i.c)((function(e){return e.contracts})),r=Object(q.a)(),u=r.account,d=r.provider,l=r.web3Instance,j=Object(o.useState)(),f=Object(s.a)(j,2),p=f[0],O=f[1],h=Object(o.useState)(),m=Object(s.a)(h,2),v=m[0],x=m[1],E=Object(o.useState)(A.f.STANDBY),w=Object(s.a)(E,2),C=w[0],D=w[1];function k(e){return _.apply(this,arguments)}function _(){return(_=Object(c.a)(a.a.mark((function e(n){var r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g.C){e.next=2;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 2:if(l){e.next=4;break}throw new Error("No Web3 instance was found.");case 4:return e.next=6,l.eth.getBlockNumber();case 6:return r=e.sent,e.t0=parseInt,e.next=10,Object(b.f)(A.b.offchainVotingVotingPeriod,t);case 10:return e.t1=e.sent,c=(0,e.t0)(e.t1),e.next=14,Object(N.buildProposalMessage)(Object(I.a)(Object(I.a)({},n),{},{votingTimeSeconds:c,snapshot:r}),g.C);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(c.a)(a.a.mark((function t(r){var c,s,o,i,j,f,p,h,m,v,E,w,C,_,T,S,R,P,F,L,M,B;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=r.partialProposalData,s=r.adapterAddress,o=r.adapterName,i=r.type,t.prev=1,u){t.next=4;break}throw new Error("No account was found to send.");case 4:if(l){t.next=6;break}throw new Error("No Web3 instance was found.");case 6:if(e){t.next=8;break}throw new Error('No "DaoRegistry" address was found.');case 8:if(g.C){t.next=10;break}throw new Error('No "SNAPSHOT_HUB_API_URL" was found.');case 10:if(g.D){t.next=12;break}throw new Error('No Snapshot "SPACE" was found.');case 12:if(i===N.SnapshotType.draft||i===N.SnapshotType.proposal){t.next=14;break}throw new Error('Handling for type "vote" is not implemented.');case 14:return D(A.f.AWAITING_CONFIRM),j=s||(o?Object(b.d)(o,n):y.a),f=c.body,p=c.name,h=c.metadata,m=c.timestamp,t.next=19,Object(N.getSpace)(g.C,g.D);case 19:if(v=t.sent,E=v.data,w={name:p,body:f,metadata:h,token:E.token,space:g.D},i!==N.SnapshotType.draft){t.next=28;break}return t.next=25,Object(N.buildDraftMessage)(w,g.C);case 25:t.t0=t.sent,t.next=31;break;case 28:return t.next=30,k(Object(I.a)(Object(I.a)({},w),{},{timestamp:m}));case 30:t.t0=t.sent;case 31:return C=t.t0,_=i===N.SnapshotType.draft?Object(N.prepareDraftMessage)(C):Object(N.prepareProposalMessage)(C),T=Object(N.getDomainDefinition)(Object(I.a)(Object(I.a)({},_),{},{type:i}),e,j,g.k),S=T.domain,R=T.types,P=JSON.stringify({types:R,domain:S,primaryType:z.a,message:_}),t.next=37,Object(N.signMessage)(d,u,P);case 37:return F=t.sent,D(A.f.PENDING),t.next=41,Object(N.submitMessage)(g.C,u,C,F,{actionId:S.actionId,chainId:S.chainId,verifyingContract:S.verifyingContract,message:_});case 41:return L=t.sent,M=L.data,B={data:C,signature:F,uniqueId:M.uniqueId,uniqueIdDraft:M.uniqueIdDraft||""},D(A.f.FULFILLED),O(B),t.abrupt("return",B);case 49:throw t.prev=49,t.t1=t.catch(1),D(A.f.REJECTED),x(t.t1),t.t1;case 54:case"end":return t.stop()}}),t,null,[[1,49]])})))).apply(this,arguments)}return{proposalData:p,proposalSignAndSendError:v,proposalSignAndSendStatus:C,signAndSendProposal:function(e){return T.apply(this,arguments)}}}function X(e,t){var n=Object(o.useRef)({start:l.a.STANDBY,end:l.a.STANDBY}),r=Object(o.useState)(!1),a=Object(s.a)(r,2),c=a[0],i=a[1],u=Object(o.useState)(!1),d=Object(s.a)(u,2),b=d[0],j=d[1],f=Object(o.useState)(m(n.current)),p=Object(s.a)(f,2),O=p[0],h=p[1];function m(e){return Object.values(e).every((function(e){return e===l.a.FULFILLED}))}return Object(o.useEffect)((function(){if(!c&&void 0!==e&&void 0!==t){h((function(){return n.current.start=l.a.PENDING,m(n.current)}));var r=setInterval((function(){h((function(){return n.current.start=l.a.FULFILLED,m(n.current)}));var t=Math.floor(Date.now()/1e3)>e;t&&i(t)}),1e3);return function(){clearInterval(r)}}h((function(){return n.current.start=l.a.FULFILLED,m(n.current)}))}),[t,c,e]),Object(o.useEffect)((function(){if(!b&&void 0!==e&&void 0!==t){h((function(){return n.current.end=l.a.PENDING,m(n.current)}));var r=setInterval((function(){h((function(){return n.current.end=l.a.FULFILLED,m(n.current)}));var e=Math.ceil(Date.now()/1e3)>t;e&&j(e)}),1e3);return function(){clearInterval(r)}}h((function(){return n.current.end=l.a.FULFILLED,m(n.current)}))}),[t,b,e]),{hasVotingTimeStarted:c,hasVotingTimeEnded:b,votingTimeStartEndInitReady:O}}},41:function(e,t,n){"use strict";var r=n(4),a=n(63),c=n(3),s=n(1),o=n(0),i=["showAfterMs","text","textProps"];function u(e){return Object(o.jsx)("div",Object(c.a)({className:"loader"},e))}t.a=function(e){var t=e.showAfterMs,n=e.text,d=e.textProps,l=Object(a.a)(e,i),b=Object(s.useState)(!1),j=Object(r.a)(b,2),f=j[0],p=j[1];return Object(s.useEffect)((function(){var e=t&&setTimeout((function(){return p(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),(!t||t&&f)&&e.text?Object(o.jsxs)("div",{className:"loader-container",children:[Object(o.jsx)(u,Object(c.a)({},l)),Object(o.jsx)("span",Object(c.a)(Object(c.a)({className:"loader__text"},d),{},{children:n}))]}):(!t||t&&f)&&!e.text?Object(o.jsx)(u,Object(c.a)({},l)):null}},426:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(1),a=n(0),c=Object(r.lazy)((function(){return n.e(7).then(n.bind(null,1008))})),s=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,1009))})),o={injected:Object(a.jsx)(c,{}),walletconnect:Object(a.jsx)(s,{})};function i(e){var t=e.providerName;return t&&o[t]?Object(a.jsx)(r.Suspense,{fallback:null,children:Object(a.jsx)("span",{className:"walletconnect__wallet-icon",children:o[t]})}):null}},444:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name_","type":"string"},{"internalType":"string","name":"symbol_","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},476:function(e,t){},49:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(0);function a(e){var t=e.url,n=e.isPending,a=void 0!==n&&n;return Object(r.jsx)("small",{children:Object(r.jsx)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:a?"view progress":"view transaction"})})}},5:function(e,t,n){"use strict";var r,a,c,s,o,i;n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return o})),n.d(t,"f",(function(){return i})),function(e){e[e.EXISTS=0]="EXISTS"}(r||(r={})),function(e){e.bank="bank",e.configuration="configuration",e.coupon_onboarding="coupon-onboarding",e.dao_registry="daoRegistry",e.distribute="distribute",e.financing="financing",e.guildkick="guildkick",e.managing="managing",e.nft="nft",e.onboarding="onboarding",e.ragequit="ragequit",e.tribute="tribute",e.tribute_nft="tribute-nft",e.voting="voting",e.water="water"}(a||(a={})),function(e){e.bank="bank",e.erc20="erc20-ext",e.nft="nft"}(c||(c={})),function(e){e.offchainVotingGracePeriod="offchainvoting.gracePeriod",e.offchainVotingStakingAmount="offchainvoting.stakingAmount",e.offchainVotingVotingPeriod="offchainvoting.votingPeriod",e.onboardingChunkSize="onboarding.chunkSize",e.onboardingMaximumChunks="onboarding.maximumChunks",e.onboardingUnitsPerChunk="onboarding.unitsPerChunk",e.onboardingTokenAddr="onboarding.tokenAddr",e.votingGracePeriod="voting.gracePeriod",e.votingStakingAmount="voting.stakingAmount",e.votingVotingPeriod="voting.votingPeriod"}(s||(s={})),function(e){e.Yes="Yes",e.No="No"}(o||(o={})),function(e){e.STANDBY="STANDBY",e.AWAITING_CONFIRM="AWAITING_CONFIRM",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(i||(i={}))},50:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.TIE=1]="TIE",e[e.PASS=2]="PASS",e[e.NOT_PASS=3]="NOT_PASS",e[e.IN_PROGRESS=4]="IN_PROGRESS",e[e.GRACE_PERIOD=5]="GRACE_PERIOD"}(r||(r={}))},52:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="0x0000000000000000000000000000000000000000"},526:function(e,t){},528:function(e,t){},539:function(e,t){},541:function(e,t){},55:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return v})),n.d(t,"f",(function(){return x}));var r=n(2),a=n.n(r),c=n(10),s=n(11);function o(e){return i.apply(this,arguments)}function i(){return(i=Object(c.a)(a.a.mark((function e(t){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.C,"/api/").concat(s.D,"/offchain_proof/").concat(t));case 3:if(404!==(n=e.sent).status){e.next=6;break}return e.abrupt("return",void 0);case 6:if(n.ok){e.next=8;break}throw new Error("Something went wrong while getting the off-chain vote proof.");case 8:return e.next=10,n.json();case 10:return e.abrupt("return",e.sent);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}var u=n(4),d=n(20),l=n(13),b=n(5);function j(e,t){var n=(e||[]).find((function(e){return Object.entries(e).find((function(e){var n=Object(u.a)(e,2),r=n[0];n[1];return Object(l.h)(r)===Object(l.h)(t||"")}))}));if(n)return Object.entries(n)[0][1].msg.payload.choice===d.VoteChoicesIndex.Yes?b.e.Yes:b.e.No}var f=n(17);function p(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(a.a.mark((function e(t){var r,c,s,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=t,e.next=e.t0===f.c.OffchainVotingContract?4:e.t0===f.c.VotingContract?9:14;break;case 4:return e.next=6,n.e(1).then(n.t.bind(null,990,3));case 6:return r=e.sent,c=r.default,e.abrupt("return",c);case 9:return e.next=11,n.e(2).then(n.t.bind(null,989,3));case 11:return s=e.sent,o=s.default,e.abrupt("return",o);case 14:throw new Error('No voting adapter name was found for "'.concat(t,'".'));case 15:e.next=20;break;case 17:throw e.prev=17,e.t1=e.catch(0),e.t1;case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function h(e,t){return e===Math.log2(Number(t)+1)-1}var m=n(50);function v(e,t){return m.a[t]===m.a[e]}function x(e){return N.apply(this,arguments)}function N(){return(N=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(s.C,"/api/").concat(s.D,"/offchain_proofs"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:if(e.sent.ok){e.next=6;break}throw new Error("Something went wrong while submitting the off-chain vote proof.");case 6:e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}},567:function(e,t){},573:function(e,t){},575:function(e,t){},587:function(e,t){},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(5),a=(r.e.Yes,r.e.No,"Message"),c=["Submitting\u2026","Working\u2026","DAOing\u2026","Getting closer\u2026","Dreaming of ETH\u2026"]},61:function(e,t,n){"use strict";var r=n(198);n.d(t,"a",(function(){return r.a}))},642:function(e,t){},644:function(e,t){},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(13);function s(e){var t=e.intervalMs,n=e.messages,s=e.useFirstItemStart?n[0]:Object(c.a)(n),o=Object(a.useState)(s),i=Object(r.a)(o,2),u=i[0],d=i[1];return Object(a.useEffect)((function(){var e=setInterval((function(){return d((function(e){return Object(c.a)(n,e)}))}),t);return function(){clearInterval(e)}}),[t,n]),e.render(u)}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(4),a=n(1),c=n(0);function s(e){var t=e.showAfterMs,n=Object(a.useState)(!1),s=Object(r.a)(n,2),o=s[0],i=s[1];return Object(a.useEffect)((function(){var e=t&&setTimeout((function(){return i(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&o?Object(c.jsx)("div",{className:"loader--large","aria-label":"Loading content..."}):null}},766:function(e,t){},773:function(e,t){},790:function(e,t){},791:function(e,t){},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(62),a=n.n(r),c=function(e){return a.a.utils.isAddress(e)}},844:function(e,t){},88:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return O}));var r,a,c,s,o=n(117),i=n(144),u=Object(i.a)(r||(r=Object(o.a)(["\n  query GetDao($id: ID) {\n    tributeDaos(where: {id: $id}) {\n      id # dao address\n      daoAddress\n      name\n      totalUnits\n    }\n  }\n"]))),d=Object(i.a)(a||(a=Object(o.a)(["\n  query GetAdaptersAndExtensions($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      daoAddress\n      adapters {\n        id\n        acl\n        adapterId\n        adapterAddress\n      }\n      extensions {\n        id\n        extensionId\n        extensionAddress\n      }\n    }\n  }\n"]))),l=Object(i.a)(c||(c=Object(o.a)(["\n  query GetMembers($daoAddress: String) {\n    tributeDaos(where: {daoAddress: $daoAddress}) {\n      members(orderBy: createdAt, orderDirection: desc) {\n        createdAt\n        address: memberAddress\n        delegateKey\n        isDelegated\n        units\n        didFullyRagequit\n      }\n    }\n  }\n"]))),b=Object(i.a)(s||(s=Object(o.a)(["\n  query GetTokenHolderBalances($tokenAddress: String) {\n    tokens(where: {tokenAddress: $tokenAddress}) {\n      symbol\n      tokenAddress\n      holders {\n        balance\n        member {\n          id\n          delegateKey\n        }\n      }\n    }\n  }\n"]))),j=n(432),f=n(19),p=n(92);function O(e){return Object(j.a)((function(t){var n=t.networkError;n&&(e.getState().subgraphNetworkStatus.status!==p.a.ERR&&(e.dispatch(Object(f.W)({status:p.a.ERR})),console.error("[Subgraph network error]: ".concat(n))));n||e.getState().subgraphNetworkStatus.status!==p.a.OK&&e.dispatch(Object(f.W)({status:p.a.OK}))}))}},9:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.STANDBY="STANDBY",e.PENDING="PENDING",e.FULFILLED="FULFILLED",e.REJECTED="REJECTED"}(r||(r={}))},92:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.OK="OK",e.ERR="ERR"}(r||(r={}))},930:function(e,t){},953:function(e,t,n){},957:function(e,t,n){"use strict";n.r(t),n.d(t,"getApolloClient",(function(){return Er}));var r=n(32),a=n(106),c=n(14),s=n(45),o=n(956),i=n(264),u=n(145),d=n(980),l=n(958),b=n(11),j=n(19),f=n(13),p=n(88),O=n(133),h=n(435),m=n(436),v=n(3),x=n(63),N=n(166),g=["type"],E=null;function A(e,t){return Object(v.a)(Object(v.a)({},e),t)}function w(){return E}var I=n(167),y={isOpen:!1};function C(e){return Object(v.a)(Object(v.a)({},e),{},{isOpen:!1})}function D(e){return Object(v.a)(Object(v.a)({},e),{},{isOpen:!0})}var k=["type"],_={BankAdapterContract:null,BankExtensionContract:null,BankFactoryContract:null,ConfigurationContract:null,CouponOnboardingContract:null,DaoFactoryContract:null,DaoRegistryAdapterContract:null,DaoRegistryContract:null,DistributeContract:null,ERC20ExtensionContract:null,FinancingContract:null,GuildBankContract:null,ManagingContract:null,NFTAdapterContract:null,NFTExtensionContract:null,OnboardingContract:null,RagequitContract:null,TributeContract:null,TributeNFTContract:null,VotingContract:null,WaterContract:null};function T(e){return Object(v.a)(Object(v.a)({},e),_)}function S(e,t){return Object(v.a)(Object(v.a)({},e),{},{BankFactoryContract:Object(v.a)({},t)})}function R(e,t){return Object(v.a)(Object(v.a)({},e),{},{DaoFactoryContract:Object(v.a)({},t)})}function P(e,t){return Object(v.a)(Object(v.a)({},e),{},{DaoRegistryContract:Object(v.a)({},t)})}function F(e,t){return Object(v.a)(Object(v.a)({},e),{},{DaoRegistryAdapterContract:Object(v.a)({},t)})}function L(e,t){return Object(v.a)(Object(v.a)({},e),{},{BankExtensionContract:Object(v.a)({},t)})}function M(e,t){return Object(v.a)(Object(v.a)({},e),{},{ConfigurationContract:Object(v.a)({},t)})}function B(e,t){return Object(v.a)(Object(v.a)({},e),{},{DistributeContract:Object(v.a)({},t)})}function G(e,t){return Object(v.a)(Object(v.a)({},e),{},{FinancingContract:Object(v.a)({},t)})}function U(e,t){return Object(v.a)(Object(v.a)({},e),{},{GuildBankContract:Object(v.a)({},t)})}function V(e,t){return Object(v.a)(Object(v.a)({},e),{},{OnboardingContract:Object(v.a)({},t)})}function W(e,t){return Object(v.a)(Object(v.a)({},e),{},{RagequitContract:Object(v.a)({},t)})}function Y(e,t){return Object(v.a)(Object(v.a)({},e),{},{TributeContract:Object(v.a)({},t)})}function K(e,t){return Object(v.a)(Object(v.a)({},e),{},{VotingContract:Object(v.a)({},t)})}function H(e,t){return Object(v.a)(Object(v.a)({},e),{},{WaterContract:Object(v.a)({},t)})}function z(e,t){return Object(v.a)(Object(v.a)({},e),{},{ManagingContract:Object(v.a)({},t)})}function q(e,t){return Object(v.a)(Object(v.a)({},e),{},{BankAdapterContract:Object(v.a)({},t)})}function J(e,t){return Object(v.a)(Object(v.a)({},e),{},{NFTAdapterContract:Object(v.a)({},t)})}function Q(e,t){return Object(v.a)(Object(v.a)({},e),{},{TributeNFTContract:Object(v.a)({},t)})}function X(e,t){return Object(v.a)(Object(v.a)({},e),{},{CouponOnboardingContract:Object(v.a)({},t)})}function $(e,t){return Object(v.a)(Object(v.a)({},e),{},{NFTExtensionContract:Object(v.a)({},t)})}function Z(e,t){return Object(v.a)(Object(v.a)({},e),{},{ERC20ExtensionContract:Object(v.a)({},t)})}var ee=n(196),te=n(92),ne=["type"],re={status:te.a.OK};function ae(e,t){return Object(v.a)(Object(v.a)({},e),t)}var ce=Object(O.combineReducers)({connectModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case I.a:return C(e);case I.b:return D(e);default:return e}},connectedMember:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(x.a)(t,g);switch(n){case N.b:return A(e,r);case N.a:return w();default:return e}},contracts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(x.a)(t,k);switch(n){case j.a:return T(e);case j.b:return q(e,r);case j.c:return L(e,r);case j.d:return S(e,r);case j.e:return M(e,r);case j.f:return X(e,r);case j.g:return R(e,r);case j.h:return P(e,r);case j.i:return F(e,r);case j.j:return B(e,r);case j.k:return Z(e,r);case j.l:return G(e,r);case j.m:return U(e,r);case j.n:return z(e,r);case j.o:return J(e,r);case j.p:return $(e,r);case j.q:return V(e,r);case j.r:return W(e,r);case j.s:return Y(e,r);case j.t:return Q(e,r);case j.u:case j.v:return K(e,r);case j.w:return H(e,r);default:return e}},subgraphNetworkStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=Object(x.a)(t,ne);switch(n){case ee.a:return ae(e,r);default:return e}}}),se=Object(O.createStore)(ce,Object(h.composeWithDevTools)(Object(O.applyMiddleware)(m.a))),oe=n(59),ie=n(0);function ue(){return"/"===Object(oe.g)().pathname?null:Object(ie.jsx)("div",{className:"footer"})}var de=n(4),le=n(1),be=n.n(le),je=n(15),fe=n(9),pe=Object(le.lazy)((function(){return n.e(10).then(n.bind(null,1012))}));function Oe(){var e=Object(c.c)((function(e){return e.connectModal.isOpen})),t=Object(le.useState)({isOpen:e,onRequestClose:function(){f(Object(j.z)())}}),n=Object(de.a)(t,2),r=n[0],a=n[1],s=Object(je.f)(),o=s.account,i=s.connected,u=s.initialCachedConnectorCheckStatus,d=s.web3Instance,l=Object(je.d)().isDefaultChain,b=Object(je.e)(o,null===d||void 0===d?void 0:d.currentProvider),f=Object(c.b)(),p=Object(oe.g)().pathname;return Object(le.useEffect)((function(){a((function(t){return Object(v.a)(Object(v.a)({},t),{},{isOpen:e})}))}),[e]),Object(le.useEffect)((function(){u===fe.a.FULFILLED&&f(!(!i||l&&!b)?Object(j.A)():Object(j.z)())}),[i,f,u,l,b,p]),e?Object(ie.jsx)(le.Suspense,{fallback:null,children:Object(ie.jsx)(pe,{maybeContractWallet:b,modalProps:r})}):null}var he=n(438);function me(){return Object(ie.jsxs)(he.a,{children:[Object(ie.jsx)("title",{children:"compost.energy"}),Object(ie.jsx)("meta",{name:"description",content:"Managing our gardening community"})]})}function ve(e){return Object(ie.jsx)("div",{className:"logo ".concat(e.size?"logo--".concat(e.size):""),children:"compost.energy"})}function xe(){return Object(ie.jsx)("div",{className:"logo-container logo-container--header",children:Object(ie.jsx)(ve,{size:"medium"})})}function Ne(){return Object(ie.jsx)("div",{className:"logo-container logo-container--center",children:Object(ie.jsx)(ve,{size:"large"})})}var ge=n(449),Ee=n(407),Ae=n(426);function we(e){var t=e.customWalletText,n=e.showWalletETHBadge,r=void 0===n||n,a=Object(je.f)(),s=a.account,o=a.connected,i=a.web3Modal,u=Object(je.d)().isDefaultChain,d=Object(c.b)(),l=!1===u;return Object(ie.jsxs)("button",{className:"walletconnect__connect-button \n        ".concat(l&&o?"walletconnect__connect-button--error":""),onClick:function(){d(Object(j.A)())},children:[Object(ie.jsx)("span",{className:"connect-button-text ".concat(o?"connect-button-text--ethAddress":""),children:t?"function"===typeof t?t({account:s,connected:o,isMobile:Ee.isMobile}):t:s?Object(f.k)(s):"Connect"}),l&&o&&Object(ie.jsx)("span",{children:"Wrong Network"}),r&&Object(ie.jsx)(Ae.a,{providerName:null===i||void 0===i?void 0:i.cachedProvider})]})}var Ie=n(23),ye=n(2),Ce=n.n(ye),De=n(10);function ke(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(le.useState)(),n=Object(de.a)(t,2),r=n[0],a=n[1],s=Object(le.useState)(fe.a.STANDBY),o=Object(de.a)(s,2),i=o[0],u=o[1],d=Object(le.useState)(),l=Object(de.a)(d,2),b=l[0],j=l[1],f=Object(le.useCallback)((function(){return p.apply(this,arguments)}),[e]);function p(){return(p=Object(De.a)(Ce.a.mark((function t(){var n,r;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,u(fe.a.PENDING),t.next=6,e.instance.methods.symbol().call();case 6:return n=t.sent,t.next=9,e.instance.methods.decimals().call();case 9:r=t.sent,a({address:e.contractAddress,symbol:n,decimals:Number(r),image:"".concat(window.location.origin,"/favicon.ico")}),u(fe.a.FULFILLED),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(2),console.log(t.t0),a(void 0),j(t.t0),u(fe.a.REJECTED);case 20:case"end":return t.stop()}}),t,null,[[2,14]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){f()}),[f]),{daoTokenDetails:r,daoTokenDetailsError:b,daoTokenDetailsStatus:i}}var _e=n(981);var Te=["customStyles"],Se="".concat(window.location.origin,"/favicon.ico");function Re(e){var t=e.customStyles,n=Object(x.a)(e,Te),r=Object(le.useState)(),a=Object(de.a)(r,2),s=a[0],o=a[1],i=Object(le.useState)(),u=Object(de.a)(i,2),d=u[0],l=u[1],j=Object(le.useState)(""),O=Object(de.a)(j,2),h=O[0],m=O[1],N=function(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(c.c)((function(e){return e.connectedMember})),n=Object(_e.a)(p.d,{variables:{tokenAddress:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),r=Object(de.a)(n,2),a=r[0],s=r[1],o=s.called,i=s.loading,u=s.data,d=s.error,l=s.refetch,b=Object(le.useState)(),j=Object(de.a)(b,2),f=j[0],O=j[1],h=Object(le.useState)(),m=Object(de.a)(h,2),v=m[0],x=m[1],N=Object(le.useCallback)((function(){try{if(!i&&u){if(O(u.tokens[0]),0===u.tokens.length)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" erc20 address not found.'))}else if(d)throw new Error('"'.concat(null===e||void 0===e?void 0:e.contractAddress,'" is not a valid erc20 address.'))}catch(d){x(d)}}),[null===e||void 0===e?void 0:e.contractAddress,u,d,i]);return Object(le.useEffect)((function(){o||a()}),[o,a]),Object(le.useEffect)((function(){!i&&(null===e||void 0===e?void 0:e.contractAddress)&&N()}),[null===e||void 0===e?void 0:e.contractAddress,N,i]),Object(le.useEffect)((function(){l&&l()}),[t,l]),{tokenHolderBalances:f,gqlError:v}}().tokenHolderBalances,g=Object(je.f)(),E=g.account,A=g.networkId,w=Object(le.useCallback)((function(){try{(e=Se,fetch(e).then((function(e){return e.blob()})).then((function(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onerror=n,r.readAsDataURL(e)}))}))).then((function(e){e&&l(e)}))}catch(t){console.log(t)}var e}),[]);return Object(le.useEffect)((function(){if(o(void 0),E&&N){var e=N.holders,t=N.symbol,n=N.tokenAddress,r=null===e||void 0===e?void 0:e.find((function(e){var t;return(null===(t=e.member)||void 0===t?void 0:t.id.toLowerCase())===E.toLowerCase()}));r&&o({balance:r.balance,tokenAddress:n,symbol:t}),E&&A&&m("".concat(b.o[A],"/token/").concat(n,"?a=").concat(E)),w()}}),[E,A,N,w]),s?Object(ie.jsx)(Ie.a,{children:Object(ie.jsxs)("a",{className:"daotokenholder__button",rel:"noopener noreferrer",target:"_blank",href:h,style:Object(v.a)(Object(v.a)({},n),t),children:[Object(ie.jsx)("span",{className:"daotokenholder__balance",children:Object(f.e)(s.balance)}),Object(ie.jsx)("span",{className:"daotokenholder__symbol",children:s.symbol}),d&&Object(ie.jsx)("img",{src:d,alt:"Token Icon"})]})}):Object(ie.jsx)(ie.Fragment,{})}function Pe(){return Object(ie.jsx)("nav",{role:"navigation",id:"navigation",children:Object(ie.jsxs)("ul",{className:"nav__list","data-testid":"nav__list",children:[Object(ie.jsx)("li",{tabIndex:0,children:Object(ie.jsx)(s.c,{to:"/membership",children:Object(ie.jsx)("span",{children:"Membership"})})}),Object(ie.jsx)("li",{tabIndex:0,children:Object(ie.jsx)(s.c,{to:"/governance",children:Object(ie.jsx)("span",{children:"Governance"})})}),Object(ie.jsx)("li",{tabIndex:0,children:Object(ie.jsx)(s.c,{to:"/transfers",children:Object(ie.jsx)("span",{children:"Transfer"})})}),Object(ie.jsx)("li",{tabIndex:0,children:Object(ie.jsx)(s.c,{to:"/tributes",children:Object(ie.jsx)("span",{children:"Tribute"})})}),Object(ie.jsx)("li",{tabIndex:0,children:Object(ie.jsx)(s.c,{to:"/water",children:Object(ie.jsx)("span",{children:"Water"})})})]})})}function Fe(){return Object(ie.jsx)(ge.a,{query:"(max-width: 62em)",children:function(e){return Object(ie.jsx)("div",{className:"nav-header",children:Object(ie.jsxs)("div",{className:"nav-header__menu-container",children:[Object(ie.jsx)(Pe,{}),Object(ie.jsx)(Re,{border:"2px solid #000"}),Object(ie.jsx)("div",{className:"nav-header__walletconnect-button-container",children:Object(ie.jsx)(we,{})})]})})}})}function Le(){function e(e){return Object(ie.jsx)(s.b,{to:"/",children:e.children})}return Object(ie.jsxs)("header",{className:"header",children:[Object(ie.jsx)(e,{children:Object(ie.jsx)(xe,{})}),Object(ie.jsx)("div",{className:"header__nav-container",children:Object(ie.jsx)(Fe,{})})]})}var Me=n(7),Be=n(17),Ge=n(62),Ue=n.n(Ge);function Ve(e){return t=e,Ue.a.utils.sha3(t);var t}function We(e){var t;return{acl:Ye((t={},Object(Me.a)(t,Be.b.BANK,{}),Object(Me.a)(t,Be.a.CONFIGURATION,{SUBMIT_PROPOSAL:!0,PROCESS_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,SET_CONFIGURATION:!0}),Object(Me.a)(t,Be.a.DISTRIBUTE,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,INTERNAL_TRANSFER:!0}),Object(Me.a)(t,Be.a.EXECUTION,{}),Object(Me.a)(t,Be.a.TRIBUTE,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,NEW_MEMBER:!0,ADD_TO_BALANCE:!0,REGISTER_NEW_TOKEN:!0}),Object(Me.a)(t,Be.a.FINANCING,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,ADD_TO_BALANCE:!0,SUB_FROM_BALANCE:!0}),Object(Me.a)(t,Be.a.GUILDKICK,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,SUB_FROM_BALANCE:!0,ADD_TO_BALANCE:!0,JAIL_MEMBER:!0,UNJAIL_MEMBER:!0,INTERNAL_TRANSFER:!0}),Object(Me.a)(t,Be.a.MANAGING,{SUBMIT_PROPOSAL:!0,PROCESS_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,REMOVE_ADAPTER:!0,ADD_ADAPTER:!0}),Object(Me.a)(t,Be.a.OFFCHAINVOTING,{}),Object(Me.a)(t,Be.a.ONBOARDING,{SUBMIT_PROPOSAL:!0,SPONSOR_PROPOSAL:!0,PROCESS_PROPOSAL:!0,ADD_TO_BALANCE:!0,UPDATE_DELEGATE_KEY:!0,NEW_MEMBER:!0}),Object(Me.a)(t,Be.a.NONVOTING_ONBOARDING,{}),Object(Me.a)(t,Be.a.RAGEQUIT,{SUB_FROM_BALANCE:!0,JAIL_MEMBER:!0,UNJAIL_MEMBER:!0,INTERNAL_TRANSFER:!0}),Object(Me.a)(t,Be.a.VOTING,{}),Object(Me.a)(t,Be.a.WATER,{}),Object(Me.a)(t,Be.a.BANK,{WITHDRAW:!0,SUB_FROM_BALANCE:!0,UPDATE_TOKEN:!0}),Object(Me.a)(t,Be.a.NFT,{COLLECT_NFT:!0}),Object(Me.a)(t,Be.a.COUPON_ONBOARDING,{SUBMIT_PROPOSAL:!1,ADD_TO_BALANCE:!0,UPDATE_DELEGATE_KEY:!1,NEW_MEMBER:!0}),Object(Me.a)(t,Be.a.TRIBUTE_NFT,{SUBMIT_PROPOSAL:!0,NEW_MEMBER:!0,ADD_TO_BALANCE:!0,COLLECT_NFT:!0}),Object(Me.a)(t,Be.b.NFT,{WITHDRAW_NFT:!0,COLLECT_NFT:!0,INTERNAL_TRANSFER:!0}),Object(Me.a)(t,Be.a.DAO_REGISTRY,{UPDATE_DELEGATE_KEY:!0}),t)[e])}}function Ye(e){var t=[e.ADD_ADAPTER,e.REMOVE_ADAPTER,e.JAIL_MEMBER,e.UNJAIL_MEMBER,e.SUBMIT_PROPOSAL,e.SPONSOR_PROPOSAL,e.PROCESS_PROPOSAL,e.UPDATE_DELEGATE_KEY,e.SET_CONFIGURATION,e.ADD_EXTENSION,e.REMOVE_EXTENSION,e.NEW_MEMBER],n=[e.TRANSFER_NFT];return function(e){return e.map((function(e,t){return void 0!==e?Math.pow(2,t):0})).reduce((function(e,t){return e+t}))}([].concat(t,n))}var Ke=[{name:Be.a.CONFIGURATION,adapterId:Ve(Be.a.CONFIGURATION),contractAddress:b.e[b.k],abiFunctionName:"submitConfigurationProposal",description:"Manages storing and retrieving per-DAO settings required by shared adapters."},{name:Be.a.DISTRIBUTE,adapterId:Ve(Be.a.DISTRIBUTE),contractAddress:b.l[b.k],abiFunctionName:"submitProposal",description:"Allows the members to distribute funds to one or all members of the DAO."},{name:Be.a.FINANCING,adapterId:Ve(Be.a.FINANCING),contractAddress:b.q[b.k],abiFunctionName:"createFinancingRequest",description:"Allows individuals and/or organizations to request funds to finance their projects, and the members of the DAO have the power to vote and decide which projects should be funded."},{name:Be.a.GUILDKICK,adapterId:Ve(Be.a.GUILDKICK),contractAddress:b.t[b.k],abiFunctionName:"submitKickProposal",description:"Gives the members the freedom to choose which individuals or organizations should really be part of the DAO."},{name:Be.a.MANAGING,adapterId:Ve(Be.a.MANAGING),contractAddress:b.v[b.k],abiFunctionName:"submitProposal",description:"Enhances the DAO capabilities by adding/updating the DAO Adapters through a voting process."},{name:Be.a.ONBOARDING,adapterId:Ve(Be.a.ONBOARDING),contractAddress:b.A[b.k],abiFunctionName:"configureDao",description:"Triggers the process of minting internal tokens in exchange of a specific token at a fixed price."},{name:Be.a.RAGEQUIT,adapterId:Ve(Be.a.RAGEQUIT),contractAddress:b.B[b.k],abiFunctionName:"ragequit",description:"Gives the members the freedom to choose when it is the best time to exit the DAO for any given reason."},{name:Be.a.TRIBUTE,adapterId:Ve(Be.a.TRIBUTE),contractAddress:b.F[b.k],abiFunctionName:"configureDao",description:"Allows potential and existing DAO members to contribute any amount of ERC-20 tokens to the DAO in exchange for any amount of DAO internal tokens."},{name:Be.a.TRIBUTE_NFT,adapterId:Ve(Be.a.TRIBUTE_NFT),contractAddress:b.G[b.k],abiFunctionName:"provideTributeNFT",description:"Allows potential DAO members to contribute a registered ERC-721 asset to the DAO in exchange for any amount of DAO units."},{options:[{name:Be.a.VOTING,displayName:Be.a.OFFCHAINVOTING,adapterId:Ve(Be.a.VOTING),contractAddress:b.z[b.k],abiFunctionName:"configureDao",description:"Adds the offchain voting governance process to the DAO to support gasless voting.",setAclToExtensionForAdapter:!0},{name:Be.a.VOTING,displayName:Be.a.VOTING,adapterId:Ve(Be.a.VOTING),contractAddress:b.I[b.k],abiFunctionName:"configureDao",description:"Adds the simple on chain voting governance process to the DAO.",setAclToExtensionForAdapter:!0}],optionDefaultTarget:Be.a.VOTING},{name:Be.a.WATER,adapterId:Ve(Be.a.WATER),contractAddress:b.K[b.k],description:"Allows the members to trigger irrigation."},{name:Be.a.BANK,adapterId:Ve(Be.a.BANK),contractAddress:b.a[b.k],abiFunctionName:"withdraw",description:"Allows the members to withdraw their funds from the DAO bank."},{name:Be.a.NFT,adapterId:Ve(Be.a.NFT),contractAddress:b.y[b.k],abiFunctionName:"collect",description:"Transfers ownership of an NFT to the DAO collection."},{name:Be.a.COUPON_ONBOARDING,adapterId:Ve(Be.a.COUPON_ONBOARDING),contractAddress:b.f[b.k],abiFunctionName:"configureDao",description:"Provides a way to onboard an initial group of members quickly without requiring multiple proposals."},{name:Be.a.DAO_REGISTRY,adapterId:Ve(Be.a.DAO_REGISTRY),contractAddress:b.i[b.k],abiFunctionName:"updateDelegateKey",description:"Allows the member to update delegate key."}],He=n(29),ze=["DaoRegistryContract"];function qe(){var e=Object(c.c)((function(e){return e.contracts})),t=e.DaoRegistryContract,n=Object(x.a)(e,ze),r=Object(_e.a)(p.a,{pollInterval:b.r,variables:{daoAddress:null===t||void 0===t?void 0:t.contractAddress.toLowerCase()}}),a=Object(de.a)(r,2),s=a[0],o=a[1],i=o.called,u=o.data,d=o.error,l=Object(le.useState)(),j=Object(de.a)(l,2),f=j[0],O=j[1],h=Object(le.useState)(),m=Object(de.a)(h,2),N=m[0],g=m[1],E=Object(le.useState)(fe.a.STANDBY),A=Object(de.a)(E,2),w=A[0],I=A[1],y=Object(le.useCallback)((function(e,t){var n=[],r=[],a=function(t){return e.find((function(e){var n;return(null===(n=e.adapterId)||void 0===n?void 0:n.toLowerCase())===(null===t||void 0===t?void 0:t.toLowerCase())}))},c=function(e){return t.find((function(t){var n;return(null===(n=t.extensionId)||void 0===n?void 0:n.toLowerCase())===(null===e||void 0===e?void 0:e.toLowerCase())}))};return Ke.forEach((function(e){if(null===e||void 0===e?void 0:e.isExtension){var t=c(e.extensionId);t?n.push(Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{name:e.name,description:e.description})):r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}else if(null===e||void 0===e?void 0:e.options){var s=null===e||void 0===e?void 0:e.options.some((function(e){return!e.isExtension&&a(e.adapterId)})),o=null===e||void 0===e?void 0:e.options.some((function(e){return e.isExtension&&c(e.extensionId)}));if(s||o){var i,u=!1;null===e||void 0===e||null===(i=e.options)||void 0===i||i.forEach((function(e){if(!u)if(null===e||void 0===e?void 0:e.isExtension){var t=c(e.extensionId);if(t)return n.push(Object(v.a)(Object(v.a)(Object(v.a)({},t),e),{},{name:e.name,description:e.description})),void(u=!0);r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}else{var s=a(e.adapterId);if(s)return n.push(Object(v.a)(Object(v.a)(Object(v.a)({},s),e),{},{name:e.name,description:e.description})),void(u=!0);r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}}))}else r.push(e)}else{var d=a(e.adapterId);d?n.push(Object(v.a)(Object(v.a)(Object(v.a)({},d),e),{},{name:e.name,description:e.description})):r.push(Object(v.a)(Object(v.a)({},e),{},{name:e.name,description:e.description}))}})),{registeredList:n,unRegisteredList:r}}),[]);return Object(le.useEffect)((function(){i||s()}),[i,s]),Object(le.useEffect)((function(){if(null===t||void 0===t?void 0:t.contractAddress)try{if(I(fe.a.PENDING),u){var e=u.tributeDaos[0],n=e.adapters,r=e.extensions,a=y(n,r),c=a.registeredList,s=a.unRegisteredList;O(c),g(s),I(fe.a.FULFILLED)}else if(d)throw new Error(d.message)}catch(d){O(void 0),g(void 0),I(fe.a.REJECTED)}}),[t,u,d,y]),{adapterExtensionStatus:w,getAdapterOrExtensionFromRedux:function(e){return Object.keys(n).map((function(e){return n[e]})).filter((function(e){return e})).filter((function(t){return t.adapterOrExtensionName===e}))[0]},registeredAdaptersOrExtensions:f,unRegisteredAdaptersOrExtensions:N}}var Je,Qe=n(31);function Xe(){var e=Object(je.d)().defaultChain;return{isParamInputValid:function(t,n){var r=t.toString();return n===Je.ADDRESS?function(t){try{return!!t&&(Ue.a.utils.checkAddressChecksum(t,e)||Ue.a.utils.isAddress(t,e))}catch(n){return!1}}(r):n===Je.BYTES32?function(e){try{return!!e&&(66===e.length&&Ue.a.utils.isHex(e))}catch(t){return!1}}(r):n===Je.BYTES32_ARRAY?function(e){try{return Array.from(e.split(",")).every((function(e){return 66===e.length&&Ue.a.utils.isHex(e)}))}catch(t){return!1}}(r):n===Je.UINT256?function(e){return!isNaN(Number(e))}(r):n!==Je.UINT256_ARRAY||function(e){return Array.from(e.split(",")).every((function(e){return Number(e)}))}(r)},getFormFieldError:function(e){return e===Je.ADDRESS?Qe.a.INVALID_ETHEREUM_ADDRESS:e===Je.BYTES32?Qe.a.INVALID_BYTES32:e===Je.BYTES32_ARRAY?Qe.a.INVALID_BYTES32_ARRAY:e===Je.UINT256?Qe.a.INVALID_NUMBER:e===Je.UINT256_ARRAY?Qe.a.INVALID_NUMBER_ARRAY:Qe.a.REQUIRED},formatInputByType:function(e,t){return t===Je.BYTES32_ARRAY?Array.from(e.split(",")):t===Je.UINT256_ARRAY?Array.from(e.split(",").map((function(e){return Number(e)}))):t===Je.UINT256?Number(e):e}}}!function(e){e.ADDRESS="address",e.BYTES32="bytes32",e.BYTES32_ARRAY="bytes32[]",e.UINT256="uint256",e.UINT256_ARRAY="uint256[]"}(Je||(Je={}));var $e=n(39);function Ze(e){var t=e.adapterOrExtension,n=e.defaultTarget,r=e.renderActions,a=e.renderCheckboxAction,c=Object(le.useState)(n||null),s=Object(de.a)(c,2),o=s[0],i=s[1],u=Object(le.useState)({}),d=Object(de.a)(u,2),l=d[0],b=d[1];return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{className:"adapter-extension__inner-wrapper ",children:[a({selectedTargetOption:o}),Object(ie.jsxs)("div",{className:"adapter-extension__info",children:[Object(ie.jsxs)("span",{className:"adapter-extension__name",children:[null===t||void 0===t?void 0:t.optionDefaultTarget,(null===t||void 0===t?void 0:t.isExtension)&&"(EXTENSION)"]}),Object(ie.jsxs)("select",{className:"select",onChange:function(e){var n=e.target.value;i(n);var r=null===t||void 0===t?void 0:t.options.find((function(e){return e.displayName===n}));b(r)},children:[Object(ie.jsxs)("option",{value:"",disabled:null!==o,children:["Select a ",null===t||void 0===t?void 0:t.optionDefaultTarget," type\u2026"]},"adapterOrExtensionSelect"),null===t||void 0===t?void 0:t.options.map((function(e){return Object(ie.jsx)("option",{value:e.displayName,children:e.displayName.toUpperCase()},e.displayName)}))]}),function(e){if(!e)return null;try{var n=(null===t||void 0===t?void 0:t.options.find((function(t){return t.displayName===e})).description)||"";return Object(ie.jsx)("span",{className:"adapter-extension__desc",children:n})}catch(r){console.warn(r)}}(o)]})]}),r({selectedTargetOption:o,selectedTargetOptionProps:l})]})}var et=n(89),tt=n(5),nt=n(52),rt=n(27),at=["error"];function ct(e){var t=e.error,n=Object(x.a)(e,at);return Object(ie.jsx)(ie.Fragment,{children:t&&Object(ie.jsx)(Ie.a,{children:Object(ie.jsx)("p",Object(v.a)(Object(v.a)({},n),{},{className:"error-message ".concat(n.className||""),children:t}))})})}var st=n(41);function ot(e){var t=e.abiConfigurationInputs,n=e.abiMethodName,r=e.adapterOrExtension,a=e.closeHandler,s=Object(c.c)((function(e){return e.contracts})).DaoRegistryContract,o=Object(le.useState)(),i=Object(de.a)(o,2),u=i[0],d=i[1],l=Object(le.useState)(tt.f.STANDBY),b=Object(de.a)(l,2),j=b[0],p=b[1],O=Object(le.useState)(tt.f.STANDBY),h=Object(de.a)(O,2),m=h[0],x=h[1],N=Object(je.a)(),g=N.txError,E=N.txIsPromptOpen,A=N.txSend,w=N.txStatus,I=Object(je.b)().fast,y=Object(je.f)(),C=y.connected,D=y.account,k=Xe(),_=k.isParamInputValid,T=k.getFormFieldError,S=k.formatInputByType,R=qe().getAdapterOrExtensionFromRedux,P=Object(et.a)({mode:"onBlur",reValidateMode:"onChange"}),F=P.errors,L=P.formState,M=P.getValues,B=P.setValue,G=P.register,U=P.trigger,V=u||g,W=C&&D,Y=(null===r||void 0===r?void 0:r.isExtension)?"extension":"adapter",K=L.isValid,H=(w===tt.f.AWAITING_CONFIRM||w===tt.f.PENDING)&&(j===tt.f.AWAITING_CONFIRM||j===tt.f.PENDING),z=(w===tt.f.AWAITING_CONFIRM||w===tt.f.PENDING)&&(m===tt.f.AWAITING_CONFIRM||m===tt.f.PENDING),q=w===tt.f.FULFILLED&&j===tt.f.FULFILLED,J=w===tt.f.FULFILLED&&m===tt.f.FULFILLED,Q=(H||q)&&E,X=(z||J)&&E;function $(){return($=Object(De.a)(Ce.a.mark((function e(){var t,n,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,x(tt.f.AWAITING_CONFIRM),t=[null===r||void 0===r?void 0:r.extensionId],n=[null===r||void 0===r?void 0:r.adapterId,nt.a,0,[],[]],c=Object(v.a)({from:D||""},I?{gasPrice:I}:null),e.next=9,A((null===r||void 0===r?void 0:r.isExtension)?"removeExtension":"replaceAdapter",s.instance.methods,(null===r||void 0===r?void 0:r.isExtension)?t:n,c);case 9:x(tt.f.FULFILLED),a&&setTimeout((function(){a()}),3e3),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),d(e.t0),x(tt.f.REJECTED);case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Z(){return(Z=Object(De.a)(Ce.a.mark((function e(a){var c,s,o,i,u;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(tt.f.PENDING),c=R(null===r||void 0===r?void 0:r.name),s=c.contractAddress,o=c.instance.methods,W){e.next=5;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 5:if(s){e.next=7;break}throw new Error("No ".concat(null===r||void 0===r?void 0:r.name," contract found."));case 7:if(D){e.next=9;break}throw new Error("No account found.");case 9:return i=[],null===t||void 0===t||t.forEach((function(e){var t=Object.entries(a).find((function(t){return t[0]===e.name}));if(t){var n=S(t[1],e.type);i.push(n)}})),u=Object(v.a)({from:D||""},I?{gasPrice:I}:null),p(tt.f.AWAITING_CONFIRM),e.next=15,A(n,o,i,u);case 15:p(tt.f.FULFILLED),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),d(e.t0),p(tt.f.REJECTED);case 22:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}return Object(ie.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[t&&t.map((function(e){return Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:e.name}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(e.name),"aria-invalid":F[e.name]?"true":"false",name:e.name,placeholder:e.type,type:"text",onChange:function(){return B(e.name[0],M()[e.name])},ref:G({validate:function(t){return""===t?Qe.a.REQUIRED:!!_(t,e.type)||T(e.type)}}),disabled:Q}),Object(ie.jsx)(ct,{error:Object(f.f)(e.name,F),id:"error-".concat(e.name)})]})]},e.name)})),Object(ie.jsx)("button",{className:"button",disabled:Q||X,onClick:function(){Q||(K?function(e){Z.apply(this,arguments)}(M()):U())},type:"submit",children:H?Object(ie.jsx)(st.a,{}):q?"Done":"Submit"}),V&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while submitting the adapter configuration.",error:V})}),Object(ie.jsxs)("div",{className:"adapter-extension__remove",children:[Object(ie.jsxs)("p",{children:["Delete this ",Y,". Once you delete this"," ",Y,", it can be re-added if the DAO isn't finalized."]}),Object(ie.jsx)("button",{className:"button--secondary",disabled:X||Q,onClick:function(){return J?{}:function(){return $.apply(this,arguments)}()},children:z?Object(ie.jsx)(st.a,{}):J?"Done":"Remove"})]})]})}var it=n(146),ut=n(115);function dt(e){var t=e.abiMethodName,n=e.adapterOrExtension,r=e.configurationInputs,a=e.isOpen,c=e.closeHandler;return Object(ie.jsx)(it.a,{keyProp:"adapter-extension-configuration",modalClassNames:"adapter-extension-configure-modal",isOpen:a,isOpenHandler:function(){c()},children:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("span",{className:"modal__close-button",onClick:function(){c()},children:Object(ie.jsx)(ut.a,{})}),Object(ie.jsx)("h1",{children:null===n||void 0===n?void 0:n.name.toUpperCase()}),Object(ie.jsx)("p",{children:null===n||void 0===n?void 0:n.description}),Object(ie.jsx)(ot,{abiConfigurationInputs:r,abiMethodName:t,adapterOrExtension:n,closeHandler:c})]})})}var lt,bt=["size"];function jt(e){var t=e.size,n=Object(x.a)(e,bt);return Object(ie.jsxs)(le.Fragment,{children:[Object(ie.jsx)("input",Object(v.a)(Object(v.a)({},n),{},{"aria-checked":n.checked,checked:n.checked,className:"checkbox-input ".concat(n.className||""," "),id:n.id,name:n.name,onChange:n.onChange,type:"checkbox"})),Object(ie.jsxs)("label",{className:"checkbox-label",htmlFor:n.id,children:[Object(ie.jsx)("span",{className:"checkbox-box ".concat(t||lt.SMALL)}),Object(ie.jsx)("span",{className:"checkbox-text",children:n.label})]})]})}!function(e){e.LARGE="large",e.SMALL="small"}(lt||(lt={}));var ft=n(60),pt=n(61),Ot=n(69),ht=n(49);function mt(e){var t=e.isOpen,n=e.closeHandler,r=Object(le.useState)(),a=Object(de.a)(r,2),s=a[0],o=a[1],i=Object(c.c)((function(e){return e.contracts})).DaoRegistryContract,u=Object(je.a)(),d=u.txError,l=u.txEtherscanURL,b=u.txIsPromptOpen,j=u.txSend,p=u.txStatus,O=Object(je.b)().fast,h=Object($e.c)().dao,m=Object(je.f)(),x=m.connected,N=m.account,g=x&&N,E=p===tt.f.AWAITING_CONFIRM||p===tt.f.PENDING,A=p===tt.f.FULFILLED,w=E||A||b,I=s||d;function y(){return(y=Object(De.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(i){e.next=5;break}throw new Error("No DAO Registry contract was found.");case 5:return t=Object(v.a)({from:N||""},O?{gasPrice:O}:null),e.next=9,j("finalizeDao",i.instance.methods,[],t);case 9:n&&setTimeout((function(){n()}),3e3),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),o(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(ie.jsx)(it.a,{keyProp:"adapter-extension-finalize",isOpen:t,isOpenHandler:function(){n()},children:Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("span",{className:"modal__close-button",onClick:function(){n()},children:Object(ie.jsx)(ut.a,{})}),Object(ie.jsx)("h1",{children:"Finalize"}),Object(ie.jsxs)("h2",{children:[h&&h.name," ",Object(ie.jsx)("small",{children:h&&Object(f.k)(h.daoAddress,7)})]}),Object(ie.jsx)("p",{children:"After your DAO is finalized you will need to submit a proposal to make changes."}),Object(ie.jsx)("button",{className:"button",disabled:w,onClick:function(){w||function(){y.apply(this,arguments)}()},type:"submit",children:E?Object(ie.jsx)(st.a,{}):A?"Done":"Submit"}),w&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){switch(p){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Awaiting your confirmation",Object(ie.jsx)(pt.a,{})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:l,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Finalized!"}),Object(ie.jsx)(ht.a,{url:l})]});default:return null}}()}),I&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while trying to finalize the DAO.",error:I})})]})})}var vt,xt=["children"],Nt=function(e){var t=e.children,n=Object(x.a)(e,xt);return Object(ie.jsx)("div",Object(v.a)(Object(v.a)({style:{position:"relative"}},n),{},{children:t}))};function gt(){var e=Object(c.c)((function(e){return e.contracts})),t=e.DaoRegistryContract,n=e.DaoFactoryContract,r=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),a=Object(le.useState)(""),s=Object(de.a)(a,2),o=s[0],i=s[1],u=Object(le.useState)(),d=Object(de.a)(u,2),l=d[0],b=d[1],p=Object(le.useState)(),O=Object(de.a)(p,2),h=O[0],m=O[1],x=Object(le.useState)(),N=Object(de.a)(x,2),g=N[0],E=N[1],A=Object(le.useState)(),w=Object(de.a)(A,2),I=w[0],y=w[1],C=Object(le.useState)(!1),D=Object(de.a)(C,2),k=D[0],_=D[1],T=Object(le.useState)(!1),S=Object(de.a)(T,2),R=S[0],P=S[1],F=Object(le.useState)(!1),L=Object(de.a)(F,2),M=L[0],B=L[1],G=Object(le.useState)(0),U=Object(de.a)(G,2),V=U[0],W=U[1],Y=Object(le.useState)(),K=Object(de.a)(Y,2),H=K[0],z=K[1],q=Object(le.useState)(),J=Object(de.a)(q,2),Q=J[0],X=J[1],$=Object(le.useState)(),Z=Object(de.a)($,2),ee=Z[0],te=Z[1],ne=Object(le.useState)(),re=Object(de.a)(ne,2),ae=re[0],ce=re[1],se=Object(je.d)().defaultChainError,oe=Object(je.f)(),ue=oe.connected,be=oe.account,pe=oe.web3Instance,Oe=Object($e.c)(),he=Oe.dao,me=Oe.gqlError,ve=qe(),xe=ve.adapterExtensionStatus,Ne=ve.getAdapterOrExtensionFromRedux,ge=ve.registeredAdaptersOrExtensions,Ee=ve.unRegisteredAdaptersOrExtensions,Ae=function(){var e=Object(c.b)();function t(){return(t=Object(De.a)(Ce.a.mark((function t(n,r){return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next=t.t0===Be.a.CONFIGURATION?3:t.t0===Be.a.FINANCING?6:t.t0===Be.a.GUILDKICK?9:t.t0===Be.a.MANAGING?12:t.t0===Be.a.RAGEQUIT?15:t.t0===Be.a.BANK?18:t.t0===Be.b.NFT?21:t.t0===Be.a.ONBOARDING?24:t.t0===Be.a.TRIBUTE?27:t.t0===Be.a.DISTRIBUTE?30:t.t0===Be.a.VOTING?33:t.t0===Be.a.COUPON_ONBOARDING?36:t.t0===Be.a.TRIBUTE_NFT?39:t.t0===Be.a.NFT?42:t.t0===Be.a.DAO_REGISTRY?45:t.t0===Be.b.ERC20?48:51;break;case 3:return t.next=5,e(Object(j.F)(r));case 5:return t.abrupt("break",51);case 6:return t.next=8,e(Object(j.M)(r));case 8:return t.abrupt("break",51);case 9:return t.next=11,e(Object(j.N)(r));case 11:return t.abrupt("break",51);case 12:return t.next=14,e(Object(j.O)(r));case 14:return t.abrupt("break",51);case 15:return t.next=17,e(Object(j.S)(r));case 17:return t.abrupt("break",51);case 18:return t.next=20,e(Object(j.C)(r));case 20:return t.abrupt("break",51);case 21:return t.next=23,e(Object(j.Q)(r));case 23:return t.abrupt("break",51);case 24:return t.next=26,e(Object(j.R)(r));case 26:return t.abrupt("break",51);case 27:return t.next=29,e(Object(j.T)(r));case 29:return t.abrupt("break",51);case 30:return t.next=32,e(Object(j.K)(r));case 32:return t.abrupt("break",51);case 33:return t.next=35,e(Object(j.V)(r));case 35:return t.abrupt("break",51);case 36:return t.next=38,e(Object(j.G)(r));case 38:return t.abrupt("break",51);case 39:return t.next=41,e(Object(j.U)(r));case 41:return t.abrupt("break",51);case 42:return t.next=44,e(Object(j.P)(r));case 44:return t.abrupt("break",51);case 45:return t.next=47,e(Object(j.J)(r));case 47:return t.abrupt("break",51);case 48:return t.next=50,e(Object(j.L)(r));case 50:return t.abrupt("break",51);case 51:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{initAdapterExtensionContract:function(e,n){return t.apply(this,arguments)}}}().initAdapterExtensionContract,we=Object(je.a)().txSend,Ie=Object(je.b)().fast,ye=Object($e.f)(),ke=ye.isDisabled,_e=ye.openWhyDisabledModal,Te=ye.setOtherDisabledReasons,Se=ye.WhyDisabledModal,Re=ue&&be,Pe=he,Fe=l===He.a.READY,Le=xe===fe.a.REJECTED&&void 0===ge&&void 0===Ee,Ge=xe===fe.a.PENDING,Ue=0===(null===Ee||void 0===Ee?void 0:Ee.length),Ye=Object(le.useCallback)((function(){return ze.apply(this,arguments)}),[t,null===he||void 0===he?void 0:he.name,Te]);function ze(){return(ze=Object(De.a)(Ce.a.mark((function e(){var n,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,n="".concat(null===he||void 0===he?void 0:he.name," is already finalized"),e.next=6,Object(He.g)(t.instance);case 6:r=e.sent,b(r),r===He.a.READY&&Te([n]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),b(void 0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function Je(e){new Promise((function(t,n){try{t(Ne(e.name).contractAddress)}catch(a){var r=e.contractAddress;r?t(r):n(a)}})).then((function(t){Xe(t,e.name,"ADAPTER")})).catch((function(t){console.warn('Dao adapter contract not found, try adding the default "'.concat(e.name,'" contract'))}))}function Qe(e){new Promise((function(t,n){try{t(Ne(e.name).contractAddress)}catch(a){var r=e.contractAddress;r?t(r):n(a)}})).then((function(t){Xe(t,e.name,"EXTENSION")})).catch((function(t){console.warn('Dao extension contract not found, try adding the default "'.concat(e.name,'" contract'),t)}))}function Xe(e,t,n){return et.apply(this,arguments)}function et(){return(et=Object(De.a)(Ce.a.mark((function e(n,r,a){var c,s,o,i,u,d,l;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(void 0),t){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(pe){e.next=5;break}throw new Error("No Web3 instance was found.");case 5:if(e.prev=5,te((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(Me.a)({},r,!0))})),n){e.next=9;break}throw new Error("".concat(a," address must not be empty"));case 9:return c=Ve(r),s=We(r),o=s.acl,i="ADAPTER"===a?[c,n,o,[],[]]:[c,n,be],u=Object(v.a)({from:be||""},Ie?{gasPrice:Ie}:null),d="ADAPTER"===a?"replaceAdapter":"addExtension",e.next=16,we(d,t.instance.methods,i,u);case 16:te((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(Me.a)({},r,!1))})),m((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(Me.a)({},r,!0))})),Ae(r,pe),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(5),te((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(Me.a)({},r,!1))})),l=new Error(e.t0&&4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?e.t0.message:"Unable to add ".concat(r," ").concat(a,"; ").concat(e.t0)),y(l);case 26:case"end":return e.stop()}}),e,null,[[5,21]])})))).apply(this,arguments)}function tt(){return(tt=Object(De.a)(Ce.a.mark((function e(){var t,r,a,c,s,o,i,u,d;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(void 0),n){e.next=3;break}throw new Error("DaoFactoryContract not found");case 3:if(pe){e.next=5;break}throw new Error("No Web3 instance was found.");case 5:for(a in e.prev=5,t=[],r=function(e){if(H[e]){var n=Ke.filter((function(t){return t.name===e}))[0],r=n.adapterId,a=n.contractAddress;if(!a){var c=Ne(e);a=null===c||void 0===c?void 0:c.contractAddress}var s=We(e).acl;r&&a&&(t.push([r,a,s]),te((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(Me.a)({},e,!0))})))}},H)r(a);return c=[null===he||void 0===he?void 0:he.daoAddress,t],s=Object(v.a)({from:be||""},Ie?{gasPrice:Ie}:null),e.next=13,we("addAdapters",n.instance.methods,c,s);case 13:for(o in H)H[o]&&o&&Ae(o,pe);e.next=23;break;case 16:for(d in e.prev=16,e.t0=e.catch(5),i=new Error(e.t0&&4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?e.t0.message:"Unable to add adapters; ".concat(e.t0)),y(i),at(!1),u=function(e){te((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(Me.a)({},e,!1))}))},H)u(d);case 23:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}function nt(){return(nt=Object(De.a)(Ce.a.mark((function e(t){var n,r,a,c,s,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(void 0),e.prev=1,n=t.abiFunctionName,r=t.name,n){e.next=5;break}throw new Error("ABI function not found for ".concat(r));case 5:a=Ne(r),c=a.abi,s=c.filter((function(e){return e.name===n}))[0].inputs,i(n),X(t),E(s),_(!0),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=new Error(e.t0&&4001===(null===e.t0||void 0===e.t0?void 0:e.t0.code)?e.t0.message:"".concat(t.name," contract not found")),y(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})))).apply(this,arguments)}function at(e){B(e);var t=function(t){z((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(Me.a)({},t,e))}))};for(var n in H)t(n)}return Object(le.useEffect)((function(){Ye()}),[Ye,t]),Object(le.useEffect)((function(){B(!1),Ee&&Ee&&(null===Ee||void 0===Ee||Ee.forEach((function(e){!(null===e||void 0===e?void 0:e.options)&&!e.isExtension&&z((function(t){return Object(v.a)(Object(v.a)({},t),{},Object(Me.a)({},e.name,!1))}))})))}),[ke,Ee]),Object(le.useEffect)((function(){H&&W(Object.values(H).filter((function(e){return!0===e})).length)}),[H]),Re&&r&&!se?Object(ie.jsx)(Et,{children:Object(ie.jsxs)("div",{className:"adaptermanager",children:[!he&&me?(window.scrollTo({top:0,left:200,behavior:"smooth"}),Object(ie.jsx)(rt.a,{error:me,renderText:"Something went wrong"})):he?Object(ie.jsxs)("h3",{children:[he.name," ",Object(ie.jsx)("small",{children:Object(f.k)(he.daoAddress,7)})]}):void 0,I?(window.scrollTo({top:0,left:200,behavior:"smooth"}),Object(ie.jsx)(rt.a,{error:I,renderText:"Something went wrong"})):Object(ie.jsx)(ie.Fragment,{}),Object(ie.jsxs)("div",{className:"adapter-extension__selection",children:[Object(ie.jsx)("div",{children:Object(ie.jsx)(jt,{"data-testid":"selectall",role:"checkbox",id:"selectall",label:"".concat(V," selected"),checked:!0===M,disabled:ke||Le||Ue||!Pe,name:"selectall",size:lt.LARGE,onChange:function(e){at(e.target.checked)}})}),Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{className:"button--secondary",disabled:0===V||ke,onClick:function(){return tt.apply(this,arguments)},children:"Add selected"})})]}),Ge&&Object(ie.jsx)("div",{className:"adapter-extension__loader",children:Object(ie.jsx)(st.a,{text:"Loading data from subgraph..."})}),Le&&Object(ie.jsx)("p",{children:"No adapters/extensions available"}),Pe&&Ee&&(null===Ee||void 0===Ee?void 0:Ee.length)>0&&Ee.map((function(e,t){return Object(ie.jsx)("div",{className:"adapter-extension__grid unregistered",children:(null===e||void 0===e?void 0:e.options)?Object(ie.jsx)(Ze,{adapterOrExtension:e,renderCheckboxAction:function(t){var n=t.selectedTargetOption;return Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("div",{className:"adapter-extension__checkbox",children:Object(ie.jsx)(jt,{id:n||"empty",label:"",checked:n&&H&&!0===H[n]||!1,disabled:ke||null===n||(null===e||void 0===e?void 0:e.isExtension),name:n||"",size:lt.LARGE,onChange:function(e){n&&function(e){var t=e.event,n=e.selectedTargetOption;z((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(Me.a)({},n,t.target.checked))}))}({event:e,selectedTargetOption:n})}})})})},renderActions:function(e){var t=e.selectedTargetOption,n=e.selectedTargetOptionProps;return Object(ie.jsx)(ie.Fragment,{children:Object(ie.jsx)("div",{className:"adapter-extension__add",children:Object(ie.jsx)("button",{className:"button--secondary",disabled:null===t||ee&&ee[n.name]||ke,onClick:function(){return(null===n||void 0===n?void 0:n.isExtension)?Qe(n):Je(n)},children:ee&&ee[n.name]?Object(ie.jsx)(st.a,{}):h&&h[n.name]?"Done":"Add"})})})}}):Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{className:"adapter-extension__inner-wrapper ",children:[Object(ie.jsx)("div",{className:"adapter-extension__checkbox",children:!(null===e||void 0===e?void 0:e.isExtension)&&Object(ie.jsx)(jt,{id:e.name,label:"",checked:H&&!0===H[e.name]||!1,disabled:ke,name:e.name,size:lt.LARGE,onChange:function(t){z((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(Me.a)({},e.name,t.target.checked))}))}})}),Object(ie.jsxs)("div",{className:"adapter-extension__info",children:[Object(ie.jsxs)("span",{className:"adapter-extension__name",children:[e.name," ",(null===e||void 0===e?void 0:e.isExtension)&&"(EXTENSION)"]}),Object(ie.jsx)("span",{className:"adapter-extension__desc",children:e.description})]})]}),Object(ie.jsx)("div",{className:"adapter-extension__add",children:Object(ie.jsx)("button",{className:"button--secondary",disabled:ee&&ee[e.name]||h&&h[e.name]||ke,onClick:function(){return(null===e||void 0===e?void 0:e.isExtension)?Qe(e):Je(e)},children:ee&&ee[e.name]?Object(ie.jsx)(st.a,{}):h&&h[e.name]?"Done":"Add"})})]})},t)})),Pe&&ge&&(null===ge||void 0===ge?void 0:ge.length)>0&&ge.map((function(e,t){return Object(ie.jsxs)("div",{className:"adapter-extension__grid registered",children:[Object(ie.jsxs)("div",{className:"adapter-extension__info",children:[Object(ie.jsxs)("span",{className:"adapter-extension__name",children:[e.name," ",(null===e||void 0===e?void 0:e.isExtension)&&"(EXTENSION)"]}),Object(ie.jsx)("span",{className:"adapter-extension__desc",children:e.description})]}),Object(ie.jsx)("div",{className:"adapter-extension__configure",children:Object(ie.jsx)("button",{className:"button--secondary",disabled:ke||(null===e||void 0===e?void 0:e.isExtension),onClick:function(){return function(e){return nt.apply(this,arguments)}(e)},children:"Configure"})})]},"".concat(e.id,"-").concat(t))})),ke&&Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{className:"button--help",onClick:function(){_e(),ce(vt.CONFIGURATION_REASON)},children:vt.CONFIGURATION_REASON})}),Object(ie.jsxs)("div",{className:"adapter-adapter-extension__finalize",children:[Object(ie.jsx)("p",{children:"If you're happy with your setup, you can finalize your DAO. After your DAO is finalized you will need to submit a proposal to make changes."}),Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{"data-testid":"finalizedao",className:"button--secondary finalize",disabled:Le||!Pe||Fe,onClick:function(){return P(!0)},children:"Finalize Dao"})}),ke&&Object(ie.jsx)("div",{children:Object(ie.jsx)("button",{className:"button--help",onClick:function(){_e(),ce(vt.FINALIZED_REASON)},children:vt.FINALIZED_REASON})}),Object(ie.jsx)(Se,{title:ae})]}),k&&Object(ie.jsx)(dt,{abiMethodName:o,adapterOrExtension:Q,configurationInputs:g,isOpen:k,closeHandler:function(){_(!1)}}),R&&Object(ie.jsx)(mt,{isOpen:R,closeHandler:function(){P(!1),Ye()}})]})}):Object(ie.jsx)(Et,{children:Object(ie.jsx)("div",{className:"adapter-extension__unauthorized-message",children:Object(ie.jsx)("p",{children:Re?se?se.message:r?void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to manage the DAO adapters and extensions."})})})}function Et(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Adapter/Extension Manager"})}),e.children]})})}!function(e){e.FINALIZED_REASON="Why is finalizing disabled?",e.CONFIGURATION_REASON="Why are configurations disabled?"}(vt||(vt={}));var At,wt=n(20),It=n(37),yt=n(40),Ct=n(207);function Dt(e){var t=e.value;return t?Object(ie.jsxs)("details",{children:[Object(ie.jsx)("summary",{style:{cursor:"pointer",outline:"none"},children:Object(ie.jsx)("small",{children:"Preview Markdown"})}),Object(ie.jsx)("div",{style:{marginTop:"1em"},children:Object(ie.jsx)(Ct.a,{children:t})})]}):null}function kt(){var e=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),t=Object(le.useState)(),n=Object(de.a)(t,2),r=n[0],a=n[1],s=Object(je.f)(),o=s.connected,i=s.account,u=Object(yt.i)(),d=u.proposalSignAndSendStatus,l=u.signAndSendProposal,b=Object(je.d)().defaultChainError,j=Object(et.a)({mode:"onBlur",reValidateMode:"onChange"}),p=Object(oe.f)(),O=j.errors,h=j.getValues,m=j.register,v=j.trigger,x=j.watch,N=o&&i,g=d===tt.f.AWAITING_CONFIRM||d===tt.f.PENDING,E=d===tt.f.FULFILLED,A=g||E;function w(e){return I.apply(this,arguments)}function I(){return(I=Object(De.a)(Ce.a.mark((function e(t){var n,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({partialProposalData:{name:t.title,body:t.description,metadata:{type:It.d.Governance}},type:wt.SnapshotType.proposal});case 3:n=e.sent,r=n.uniqueId,p.push("/governance/".concat(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return N&&e&&!b?Object(ie.jsx)(_t,{children:Object(ie.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",htmlFor:At.title,children:"Title"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(At.title),"aria-invalid":O.title?"true":"false",id:At.title,name:At.title,ref:m({required:Qe.a.REQUIRED}),type:"text",disabled:A}),Object(ie.jsx)(ct,{error:Object(f.f)(At.title,O),id:"error-".concat(At.title)})]})]}),Object(ie.jsxs)("div",{className:"form__textarea-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",htmlFor:At.description,children:"Description"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("textarea",{"aria-describedby":"error-".concat(At.description),"aria-invalid":O.description?"true":"false",id:At.description,name:At.description,placeholder:"Say something about your governance proposal...",ref:m({required:Qe.a.REQUIRED}),disabled:A}),Object(ie.jsx)(ct,{error:Object(f.f)(At.description,O),id:"error-".concat(At.description)}),Object(ie.jsx)(Dt,{value:x(At.description)})]})]}),Object(ie.jsx)("button",{"aria-label":g?"Submitting your proposal...":"",className:"button",disabled:A,onClick:Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!A){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,v();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:w(h());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:g?Object(ie.jsx)(st.a,{}):E?"Done":"Submit"}),A&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){switch(d){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Awaiting your confirmation",Object(ie.jsx)(pt.a,{intervalMs:500})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:["Submitting",Object(ie.jsx)(pt.a,{intervalMs:500})]});case tt.f.FULFILLED:return"Done!";default:return""}}()}),r&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while submitting the proposal.",error:r})})]})}):Object(ie.jsx)(_t,{children:Object(ie.jsx)("div",{className:"form__description--unauthorized",children:Object(ie.jsx)("p",{children:N?b?b.message:e?void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to submit a governance proposal."})})})}function _t(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Governance Proposal"})}),Object(ie.jsxs)("div",{className:"form-wrapper",children:[Object(ie.jsx)("div",{className:"form__description"}),e.children]})]})})}!function(e){e.title="title",e.description="description"}(At||(At={}));var Tt,St=n(25),Rt=n(81);function Pt(){var e=Object(je.d)().defaultChainError,t=Object(je.f)(),n=t.connected,r=t.account,a=t.web3Instance,c=Object(yt.i)(),s=c.proposalData,o=c.proposalSignAndSendError,i=c.proposalSignAndSendStatus,u=c.signAndSendProposal,d=Object(et.a)({mode:"onBlur",reValidateMode:"onChange"}),l=Object(oe.f)(),j=Object(le.useState)(),p=Object(de.a)(j,2),O=p[0],h=p[1],m=Object(le.useState)(),v=Object(de.a)(m,2),x=v[0],N=v[1],g=d.errors,E=d.getValues,A=d.setValue,w=d.register,I=d.trigger,y=(0,d.watch)(Tt.ethAddress),C=O||o,D=n&&r,k=i===tt.f.AWAITING_CONFIRM||i===tt.f.PENDING,_=i===tt.f.FULFILLED,T=k||_,S=Object(yt.a)(y),R=S.checkApplicantError,P=S.checkApplicantInvalidMsg,F=S.checkApplicantStatus,L=S.isApplicantValid,M=Object(le.useCallback)((function(){return B.apply(this,arguments)}),[r,a]);function B(){return(B=Object(De.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&r){e.next=3;break}return N(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,a.eth.getBalance(r);case 6:t=e.sent,N(a.utils.fromWei(t,"ether")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),N(void 0);case 13:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function G(e){return U.apply(this,arguments)}function U(){return(U=Object(De.a)(Ce.a.mark((function e(t){var n,a,c,o,i,d,j,p,O,m,v;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,D){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(r){e.next=5;break}throw new Error("No account found.");case 5:if(R&&console.warn("Error checking if the applicant address is valid: ".concat(R.message)),F!==fe.a.FULFILLED||L||!P){e.next=8;break}throw new Error(P);case 8:if(n=(null===s||void 0===s?void 0:s.uniqueId)||"",a=t.ethAddress,c=t.ethAmount,o=Object(St.toChecksumAddress)(a),i=Object(St.toWei)(Object(f.j)(c),"ether"),d=Object(St.toChecksumAddress)(r),j={tributeAmount:c,tributeAmountUnit:"ETH"},p=[o,b.H,i],n){e.next=22;break}return O=Object(f.h)(a)===Object(f.h)(r)?"Membership for ".concat(Object(f.k)(o,7),"."):"Membership proposal from ".concat(Object(f.k)(d,7)," for applicant ").concat(Object(f.k)(o,7),"."),e.next=19,u({partialProposalData:{name:o,body:O,metadata:{proposalAmountValues:j,submitActionArgs:p,accountAuthorizedToProcessPassedProposal:d}},adapterName:tt.a.onboarding,type:wt.SnapshotType.draft});case 19:m=e.sent,v=m.uniqueId,n=v;case 22:l.push("/membership/".concat(n)),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),h(e.t0);case 28:case"end":return e.stop()}}),e,null,[[0,25]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){M()}),[M]),Object(le.useEffect)((function(){A(Tt.ethAddress,r)}),[r,A]),!D||e?Object(ie.jsx)(Ft,{children:Object(ie.jsx)("div",{className:"form__description--unauthorized",children:Object(ie.jsx)("p",{children:D?e?e.message:void 0:"Connect your wallet to submit a membership proposal."})})}):Object(ie.jsx)(Ft,{children:Object(ie.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",htmlFor:Tt.ethAddress,children:"Applicant Address"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(Tt.ethAddress),"aria-invalid":g.ethAddress?"true":"false",id:Tt.ethAddress,name:Tt.ethAddress,ref:w({validate:function(e){return e?!!Object(Rt.a)(e)||Qe.a.INVALID_ETHEREUM_ADDRESS:Qe.a.REQUIRED}}),type:"text",disabled:T}),Object(ie.jsx)(ct,{error:Object(f.f)(Tt.ethAddress,g),id:"error-".concat(Tt.ethAddress)})]})]}),Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",htmlFor:Tt.ethAmount,children:"Amount"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ie.jsxs)("div",{className:"input__suffix-wrap",children:[Object(ie.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Tt.ethAmount),"aria-invalid":g.ethAmount?"true":"false",id:Tt.ethAmount,name:Tt.ethAmount,onChange:function(){return A(Tt.ethAmount,Object(f.e)(E().ethAmount))},ref:w({validate:function(e){var t=Number(Object(f.j)(e));return""===e?Qe.a.REQUIRED:isNaN(t)?Qe.a.INVALID_NUMBER:t<=0?"The value must be greater than 0 ETH.":!(t>=Number(x))||"Insufficient funds."}}),type:"text",disabled:T}),Object(ie.jsx)("div",{className:"input__suffix-item",children:"ETH"})]}),Object(ie.jsx)(ct,{error:Object(f.f)(Tt.ethAmount,g),id:"error-".concat(Tt.ethAmount)})]}),Object(ie.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(ie.jsx)("span",{children:x?Number.isInteger(Number(x))?x:Object(f.d)(Number(x)):"---"})]})]}),Object(ie.jsx)("button",{"aria-label":k?"Submitting your proposal.":"",className:"button",disabled:T,onClick:Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!T){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,I();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(E());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:k?Object(ie.jsx)(st.a,{}):_?"Done":"Submit"}),T&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){switch(i){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Awaiting your confirmation",Object(ie.jsx)(pt.a,{intervalMs:500})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:["Submitting",Object(ie.jsx)(pt.a,{intervalMs:500})]});case tt.f.FULFILLED:return"Done!";default:return""}}()}),C&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while submitting the proposal.",error:C})})]})})}function Ft(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Join"})}),Object(ie.jsxs)("div",{className:"form-wrapper",children:[Object(ie.jsx)("div",{className:"form__description"}),e.children]})]})})}!function(e){e.ethAddress="ethAddress",e.ethAmount="ethAmount"}(Tt||(Tt={}));var Lt,Mt,Bt=n(444);function Gt(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),t=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DaoRegistryContract})),n=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.BankExtensionContract})),a=Object(c.c)((function(e){var t;return null===(t=e.connectedMember)||void 0===t?void 0:t.isActiveMember})),s=Object(je.d)().defaultChainError,o=Object(je.f)(),i=o.connected,u=o.account,d=o.web3Instance,l=Object(je.b)().fast,j=Object(je.a)(),p=j.txError,O=j.txEtherscanURL,h=j.txIsPromptOpen,m=j.txSend,x=j.txStatus,N=Object(yt.i)(),g=N.proposalData,E=N.proposalSignAndSendStatus,A=N.signAndSendProposal,w=Object(et.a)({mode:"onBlur",reValidateMode:"onChange"}),I=Object(oe.f)(),y=Object(le.useState)(),C=Object(de.a)(y,2),D=C[0],k=C[1],_=Object(le.useState)(),T=Object(de.a)(_,2),S=T[0],R=T[1],P=Object(le.useState)(),F=Object(de.a)(P,2),L=F[0],M=F[1],B=w.errors,G=w.getValues,U=w.setValue,V=w.register,W=w.trigger,Y=w.watch,K="all members"===Y("type"),H=Y("selectedToken"),z=D||p,q=i&&u,J=Bt,Q=x===tt.f.AWAITING_CONFIRM||x===tt.f.PENDING||E===tt.f.AWAITING_CONFIRM||E===tt.f.PENDING,X=x===tt.f.FULFILLED&&E===tt.f.FULFILLED,$=Q||X||h,Z=Object(le.useCallback)((function(){return te.apply(this,arguments)}),[n,u,J,d]),ee=Object(le.useCallback)((function(){return ne.apply(this,arguments)}),[u,H]);function te(){return(te=Object(De.a)(Ce.a.mark((function e(){var t,a,c,s,o,i,l,j,f,p,O,h,m,x,N,g,E,A,w,I,y,C,D,k,_,T,S;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&n&&d){e.next=3;break}return R(void 0),e.abrupt("return");case 3:return e.prev=3,t=n.abi,a=n.contractAddress,c=n.instance.methods,e.next=7,c.nbTokens().call();case 7:if(s=e.sent,!(Number(s)<1)){e.next=12;break}R([]),e.next=44;break;case 12:return o=[],i=t.find((function(e){return"getToken"===e.name})),l=Object(r.a)(Array(Number(s)).keys()).map((function(e){return[a,i,[e.toString()]]})),e.next=17,Object(He.j)({calls:l,web3Instance:d});case 17:return j=e.sent,f=t.find((function(e){return"balanceOf"===e.name})),p=j.map((function(e){return[a,f,[b.u,e]]})),e.next=22,Object(He.j)({calls:p,web3Instance:d});case 22:if(O=e.sent,h=j.map((function(e,t){return{address:e,daoBalance:O[t]}})).filter((function(e){return Object(St.toBN)(e.daoBalance).gt(Object(St.toBN)(0))})),(m=h.find((function(e){return e.address===b.p})))&&o.push(Object(v.a)(Object(v.a)({},m),{},{name:"Ether",symbol:"ETH",decimals:18})),!((x=h.filter((function(e){return e.address!==b.p}))).length>0)){e.next=43;break}return N=J.find((function(e){return"name"===e.name})),g=x.map((function(e){return[e.address,N,[]]})),E=J.find((function(e){return"symbol"===e.name})),A=x.map((function(e){return[e.address,E,[]]})),w=J.find((function(e){return"decimals"===e.name})),I=x.map((function(e){return[e.address,w,[]]})),y=[].concat(Object(r.a)(g),Object(r.a)(A),Object(r.a)(I)),e.next=37,Object(He.j)({calls:y,web3Instance:d});case 37:for(C=e.sent,D=[];C.length;)D.push(C.splice(0,x.length));k=D[0],_=D[1],T=D[2],S=x.map((function(e,t){return Object(v.a)(Object(v.a)({},e),{},{name:k[t],symbol:_[t],decimals:T[t]})})).sort((function(e,t){return e.name.localeCompare(t.name)})),o=[].concat(Object(r.a)(o),Object(r.a)(S));case 43:R(o);case 44:e.next=50;break;case 46:e.prev=46,e.t0=e.catch(3),console.error(e.t0),R(void 0);case 50:case"end":return e.stop()}}),e,null,[[3,46]])})))).apply(this,arguments)}function ne(){return(ne=Object(De.a)(Ce.a.mark((function e(){var t,n,r,a,c,s,o,i;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&H){e.next=3;break}return M(void 0),e.abrupt("return");case 3:try{t=JSON.parse(H),n=t.daoBalance,r=Object(St.toBN)(n),a=t.decimals,c=Object(St.toBN)(10).pow(Object(St.toBN)(a)),s=r.div(c),o=r.mod(c),i=o.eq(Object(St.toBN)(0))?s.toString():"".concat(s.toString(),".").concat(o.toString()),M(i)}catch(d){console.error(d),M(void 0)}case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e){return ae.apply(this,arguments)}function ae(){return(ae=Object(De.a)(Ce.a.mark((function n(r){var a,c,s,o,i,j,p,O,h,x,N,E,w,y,C,D,_,T,S,R,P,F,L,M,B,G,U,V;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,q){n.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(e){n.next=5;break}throw new Error("No DistributeContract found.");case 5:if(t){n.next=7;break}throw new Error("No DaoRegistryContract found.");case 7:if(u){n.next=9;break}throw new Error("No account found.");case 9:if(d){n.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(a=r.selectedToken,c=r.memberAddress,s=r.amount,o=r.notes,i=Object(St.toChecksumAddress)(c),j=JSON.parse(a),p=j.symbol,O=j.decimals,(h=j.address)===b.p?x=Object(St.toWei)(Object(f.j)(s),"ether"):(N=Object(St.toBN)(10).pow(Object(St.toBN)(O)),E=Object(St.toBN)(Object(f.j)(s)).mul(N),x=E.toString()),w=(null===g||void 0===g?void 0:g.uniqueId)||"",y=null===g||void 0===g?void 0:g.data,C=(null===g||void 0===g?void 0:g.signature)||"",D=K?"Transfer to all members pro rata.":"Transfer to ".concat(Object(f.k)(i,7),"."),_={transferAmount:s,transferAmountUnit:p},w){n.next=34;break}return T=o?"".concat(D,"\n").concat(o):D,S=K?"All members":i,R=Math.floor(Date.now()/1e3),n.next=27,A({partialProposalData:{name:S,body:T,metadata:{proposalAmountValues:_,isTypeAllMembers:K},timestamp:R.toString()},adapterName:tt.a.distribute,type:wt.SnapshotType.proposal});case 27:P=n.sent,F=P.uniqueId,L=P.data,M=P.signature,w=F,y=L,C=M;case 34:return B=K?nt.a:i,G=y?Object(wt.prepareVoteProposalData)({payload:{name:y.payload.name,body:y.payload.body,choices:y.payload.choices,snapshot:y.payload.snapshot.toString(),start:y.payload.start,end:y.payload.end},sig:C,space:y.space,timestamp:parseInt(y.timestamp)},d):"",U=[t.contractAddress,w,B,h,x,G],V=Object(v.a)({from:u||""},l?{gasPrice:l}:null),n.next=40,m("submitProposal",e.instance.methods,U,V);case 40:I.push("/transfers/".concat(w)),n.next=46;break;case 43:n.prev=43,n.t0=n.catch(0),k(n.t0);case 46:case"end":return n.stop()}}),n,null,[[0,43]])})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(De.a)(Ce.a.mark((function e(t){var r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=3;break}return console.error("No BankExtensionContract found."),e.abrupt("return",!1);case 3:return e.next=5,n.instance.methods.balanceOf(t,b.H).call();case 5:return r=e.sent,e.abrupt("return",Object(St.toBN)(r).gt(Object(St.toBN)(0)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(le.useEffect)((function(){Z()}),[Z]),Object(le.useEffect)((function(){ee()}),[ee]),q&&!s&&a?Object(ie.jsx)(Ut,{children:Object(ie.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Type"}),Object(ie.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(ie.jsxs)("select",{name:Lt.type,ref:V,disabled:$,children:[Object(ie.jsx)("option",{value:"single member",children:"Single member"}),Object(ie.jsx)("option",{value:"all members",children:"All members"})]})})]}),!K&&Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Member Address"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(Lt.memberAddress),"aria-invalid":B.memberAddress?"true":"false",name:Lt.memberAddress,ref:V({validate:function(){var e=Object(De.a)(Ce.a.mark((function e(t){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=4;break}e.t0=Qe.a.REQUIRED,e.next=17;break;case 4:if(Object(Rt.a)(t)){e.next=8;break}e.t1=Qe.a.INVALID_ETHEREUM_ADDRESS,e.next=16;break;case 8:return e.next=10,ce(t);case 10:if(e.sent){e.next=14;break}e.t2="The address is not an active member with membership tokens.",e.next=15;break;case 14:e.t2=!0;case 15:e.t1=e.t2;case 16:e.t0=e.t1;case 17:return e.abrupt("return",e.t0);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),type:"text",disabled:$}),Object(ie.jsx)(ct,{error:Object(f.f)(Lt.memberAddress,B),id:"error-".concat(Lt.memberAddress)})]})]}),Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Asset"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsxs)("select",{"aria-describedby":"error-".concat(Lt.selectedToken),"aria-invalid":B.selectedToken?"true":"false",name:Lt.selectedToken,ref:V({validate:function(e){return!S||S.length<1?"No tokens available for distribution.":!!e||Qe.a.REQUIRED}}),disabled:$,children:[Object(ie.jsx)("option",{value:"",children:"Select from DAO assets"}),null===S||void 0===S?void 0:S.map((function(e){return Object(ie.jsx)("option",{value:JSON.stringify(e),children:"".concat(e.name," (").concat(e.symbol,")")},e.address)}))]}),Object(ie.jsx)(ct,{error:Object(f.f)(Lt.selectedToken,B),id:"error-".concat(Lt.selectedToken)})]})]}),Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ie.jsxs)("div",{className:"input__suffix-wrap",children:[Object(ie.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Lt.amount),"aria-invalid":B.amount?"true":"false",name:Lt.amount,onChange:function(){return U(Lt.amount,Object(f.e)(G().amount))},ref:V({validate:function(e){var t=Number(Object(f.j)(e)),n=H&&JSON.parse(H),r=(null===n||void 0===n?void 0:n.address)===b.p;return""===e?Qe.a.REQUIRED:isNaN(t)?Qe.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(L)?"Insufficient funds.":!!r||(!!Number.isInteger(t)||"The value must be an integer for an ERC20 token.")}}),type:"text",disabled:$}),Object(ie.jsx)("div",{className:"input__suffix-item",children:H&&JSON.parse(H).symbol||"___"})]}),Object(ie.jsx)(ct,{error:Object(f.f)(Lt.amount,B),id:"error-".concat(Lt.amount)}),Object(ie.jsx)("div",{className:"form__input-description",children:K?"If the proposal passes, this total amount will be distributed pro rata to all members' internal accounts, based on the current number of membership tokens held by each member.":"If the proposal passes, this amount will be distributed to the member's internal account."})]}),Object(ie.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(ie.jsx)("span",{children:L?Number.isInteger(Number(L))?L:Object(f.d)(Number(L)):"---"})]})]}),Object(ie.jsxs)("div",{className:"form__textarea-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Notes"}),Object(ie.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(ie.jsx)("textarea",{name:Lt.notes,placeholder:"Transactions purpose...",ref:V,disabled:$})})]}),Object(ie.jsx)("button",{className:"button",disabled:$,onClick:Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!$){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,W();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:re(G());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:Q?Object(ie.jsx)(st.a,{}):X?"Done":"Submit"}),$&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){if(x===tt.f.AWAITING_CONFIRM||E===tt.f.AWAITING_CONFIRM)return"Awaiting your confirmation\u2026";switch(x){case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:O,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Proposal submitted!"}),Object(ie.jsx)(ht.a,{url:O})]});default:return null}}()}),z&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while submitting the proposal.",error:z})})]})}):Object(ie.jsx)(Ut,{children:Object(ie.jsx)("div",{className:"form__description--unauthorized",children:Object(ie.jsx)("p",{children:q?s?s.message:a?void 0:"Either you are not a member, or your membership is not active.":"Connect your wallet to submit a transfer proposal."})})})}function Ut(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Transfer Proposal"})}),Object(ie.jsxs)("div",{className:"form-wrapper",children:[Object(ie.jsx)("div",{className:"form__description"}),e.children]})]})})}function Vt(){var e=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.ERC20ExtensionContract})),t=Object(je.d)().defaultChainError,r=Object(je.f)(),a=r.connected,s=r.account,o=r.web3Instance,i=Object(yt.i)(),u=i.proposalData,d=i.proposalSignAndSendError,l=i.proposalSignAndSendStatus,j=i.signAndSendProposal,p=Object(et.a)({mode:"onBlur",reValidateMode:"onChange"}),O=Object(oe.f)(),h=Object(le.useState)(),m=Object(de.a)(h,2),v=m[0],x=m[1],N=Object(le.useState)(),g=Object(de.a)(N,2),E=g[0],A=g[1],w=Object(le.useState)(),I=Object(de.a)(w,2),y=I[0],C=I[1],D=Object(le.useState)(),k=Object(de.a)(D,2),_=k[0],T=k[1],S=p.errors,R=p.getValues,P=p.setValue,F=p.register,L=p.trigger,M=p.watch,B=M(Mt.erc20Address),G=M(Mt.applicantAddress),U=v||d,V=a&&s,W=l===tt.f.AWAITING_CONFIRM||l===tt.f.PENDING,Y=l===tt.f.FULFILLED,K=W||Y,H=Object(yt.a)(G),z=H.checkApplicantError,q=H.checkApplicantInvalidMsg,J=H.checkApplicantStatus,Q=H.isApplicantValid,X=Object(le.useCallback)((function(){return ee.apply(this,arguments)}),[B,o]),$=Object(le.useCallback)((function(){return te.apply(this,arguments)}),[s,_]),Z=Object(le.useCallback)((function(){return ne.apply(this,arguments)}),[s,_]);function ee(){return(ee=Object(De.a)(Ce.a.mark((function e(){var t,r,a,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&B){e.next=3;break}return T(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,Promise.resolve().then(n.t.bind(null,444,3));case 6:t=e.sent,r=t.default,a=r,c=new o.eth.Contract(a,B),T(c),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),T(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function te(){return(te=Object(De.a)(Ce.a.mark((function e(){var t,n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&_){e.next=3;break}return C(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,_.methods.symbol().call();case 6:return t=e.sent,e.next=9,_.methods.decimals().call();case 9:n=e.sent,C({symbol:t,decimals:Number(n)}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error(e.t0),C(void 0);case 17:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function ne(){return(ne=Object(De.a)(Ce.a.mark((function e(){var t,n,r,a,c,o,i;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s&&_){e.next=3;break}return A(void 0),e.abrupt("return");case 3:return e.prev=3,e.next=6,_.methods.balanceOf(s).call();case 6:return t=e.sent,n=Object(St.toBN)(t),e.next=10,_.methods.decimals().call();case 10:r=e.sent,a=Object(St.toBN)(10).pow(Object(St.toBN)(r)),c=n.div(a),o=n.mod(a),i=o.eq(Object(St.toBN)(0))?c.toString():"".concat(c.toString(),".").concat(o.toString()),A(i),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(3),console.error(e.t0),A(void 0);case 22:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}function re(){return ae.apply(this,arguments)}function ae(){return(ae=Object(De.a)(Ce.a.mark((function t(){return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.abrupt("return","UNITS");case 4:return t.prev=4,t.next=7,e.instance.methods.symbol().call();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(4),console.log(t.t0),t.abrupt("return","UNITS");case 14:case"end":return t.stop()}}),t,null,[[4,10]])})))).apply(this,arguments)}function ce(e){return se.apply(this,arguments)}function se(){return(se=Object(De.a)(Ce.a.mark((function e(t){var n,r,a,c,o,i,d,l,p,h,m,v,N,g,E,A,w;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,V){e.next=3;break}throw new Error("No user account was found. Please make sure your wallet is connected.");case 3:if(s){e.next=5;break}throw new Error("No account found.");case 5:if(_){e.next=7;break}throw new Error("No ERC20Contract found.");case 7:if(y){e.next=9;break}throw new Error("No ERC20 details found.");case 9:if(z&&console.warn("Error checking if the applicant address is valid: ".concat(z.message)),J!==fe.a.FULFILLED||Q||!q){e.next=12;break}throw new Error(q);case 12:if(n=t.applicantAddress,r=t.erc20Address,a=t.tributeAmount,c=t.requestAmount,o=t.description,i=Object(St.toBN)(10).pow(Object(St.toBN)(y.decimals)),d=Object(St.toBN)(Object(f.j)(a)).mul(i),l=Object(f.j)(c),p=Object(St.toChecksumAddress)(n),h=Object(St.toChecksumAddress)(s),m=(null===u||void 0===u?void 0:u.uniqueId)||""){e.next=35;break}return v=Object(f.h)(n)===Object(f.h)(s)?"Tribute from ".concat(Object(f.k)(p,7),"."):"Tribute from ".concat(Object(f.k)(h,7)," for applicant ").concat(Object(f.k)(p,7),"."),N=o?"".concat(v,"\n").concat(o):v,e.t0=c,e.next=25,re();case 25:return e.t1=e.sent,e.t2=a,e.t3=y.symbol,g={requestAmount:e.t0,requestAmountUnit:e.t1,tributeAmount:e.t2,tributeAmountUnit:e.t3},E=[p,b.H,l,Object(St.toChecksumAddress)(r),d.toString(),h],e.next=32,j({partialProposalData:{name:p,body:N,metadata:{proposalAmountValues:g,submitActionArgs:E,accountAuthorizedToProcessPassedProposal:h}},adapterName:tt.a.tribute,type:wt.SnapshotType.draft});case 32:A=e.sent,w=A.uniqueId,m=w;case 35:O.push("/tributes/".concat(m)),e.next=41;break;case 38:e.prev=38,e.t4=e.catch(0),x(e.t4);case 41:case"end":return e.stop()}}),e,null,[[0,38]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){X()}),[X]),Object(le.useEffect)((function(){$()}),[$]),Object(le.useEffect)((function(){Z()}),[Z]),Object(le.useEffect)((function(){P(Mt.applicantAddress,s)}),[s,P]),!V||t?Object(ie.jsx)(Wt,{children:Object(ie.jsx)("div",{className:"form__description--unauthorized",children:Object(ie.jsx)("p",{children:V?t?t.message:void 0:"Connect your wallet to submit a tribute proposal."})})}):Object(ie.jsx)(Wt,{children:Object(ie.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Applicant Address"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(Mt.applicantAddress),"aria-invalid":S.applicantAddress?"true":"false",name:Mt.applicantAddress,ref:F({validate:function(e){return e?!!Object(Rt.a)(e)||Qe.a.INVALID_ETHEREUM_ADDRESS:Qe.a.REQUIRED}}),type:"text",disabled:K}),Object(ie.jsx)(ct,{error:Object(f.f)(Mt.applicantAddress,S),id:"error-".concat(Mt.applicantAddress)})]})]}),Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"ERC20 Address"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(Mt.erc20Address),"aria-invalid":S.erc20Address?"true":"false",name:Mt.erc20Address,ref:F({validate:function(e){return e?!!Object(Rt.a)(e)||Qe.a.INVALID_ETHEREUM_ADDRESS:Qe.a.REQUIRED}}),type:"text",disabled:K}),Object(ie.jsx)(ct,{error:Object(f.f)(Mt.erc20Address,S),id:"error-".concat(Mt.erc20Address)})]})]}),Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Amount"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ie.jsxs)("div",{className:"input__suffix-wrap",children:[Object(ie.jsx)("input",{className:"input__suffix","aria-describedby":"error-".concat(Mt.tributeAmount),"aria-invalid":S.tributeAmount?"true":"false",name:Mt.tributeAmount,onChange:function(){return P(Mt.tributeAmount,Object(f.e)(R().tributeAmount))},ref:F({validate:function(e){var t=Number(Object(f.j)(e));return""===e?Qe.a.REQUIRED:isNaN(t)?Qe.a.INVALID_NUMBER:t<=0?"The value must be greater than 0.":t>Number(E)?"Insufficient funds.":!!Number.isInteger(t)||"The value must be an integer for an ERC20 token."}}),type:"text",disabled:K}),Object(ie.jsx)("div",{className:"input__suffix-item",children:(null===y||void 0===y?void 0:y.symbol)||"___"})]}),Object(ie.jsx)(ct,{error:Object(f.f)(Mt.tributeAmount,S),id:"error-".concat(Mt.tributeAmount)}),Object(ie.jsx)("div",{className:"form__input-description",children:"This amount will be held in escrow pending a member vote. If the proposal passes, the funds will automatically be sent to the DAO. If the proposal fails, the funds will be refunded to you."})]}),Object(ie.jsxs)("div",{className:"form__input-addon",children:["available: ",Object(ie.jsx)("span",{children:E?Number.isInteger(Number(E))?E:Object(f.d)(Number(E)):"---"})]})]}),Object(ie.jsxs)("div",{className:"form__input-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Request Amount"}),Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap--narrow",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(Mt.requestAmount),"aria-invalid":S.requestAmount?"true":"false",name:Mt.requestAmount,onChange:function(){return P(Mt.requestAmount,Object(f.e)(R().requestAmount))},ref:F({validate:function(e){var t=Number(Object(f.j)(e));return""===e?Qe.a.REQUIRED:isNaN(t)?Qe.a.INVALID_NUMBER:!(t<0)||"The value must be at least 0."}}),type:"text",disabled:K}),Object(ie.jsx)(ct,{error:Object(f.f)(Mt.requestAmount,S),id:"error-".concat(Mt.requestAmount)}),Object(ie.jsx)("div",{className:"form__input-description",children:"This is the amount of DAO membership tokens you are requesting be sent to the Applicant Address in exchange for your tribute."})]})]}),Object(ie.jsxs)("div",{className:"form__textarea-row",children:[Object(ie.jsx)("label",{className:"form__input-row-label",children:"Description"}),Object(ie.jsx)("div",{className:"form__input-row-fieldwrap",children:Object(ie.jsx)("textarea",{name:Mt.description,placeholder:"Say something about your tribute...",ref:F,disabled:K})})]}),Object(ie.jsx)("button",{className:"button",disabled:K,onClick:Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,L();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:ce(R());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:W?Object(ie.jsx)(st.a,{}):Y?"Done":"Submit"}),K&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){switch(l){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Awaiting your confirmation",Object(ie.jsx)(pt.a,{intervalMs:500})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:["Submitting",Object(ie.jsx)(pt.a,{intervalMs:500})]});case tt.f.FULFILLED:return"Done!";default:return""}}()}),U&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while submitting the proposal.",error:U})})]})})}function Wt(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Tribute Proposal"})}),Object(ie.jsxs)("div",{className:"form-wrapper",children:[Object(ie.jsx)("div",{className:"form__description"}),e.children]})]})})}!function(e){e.type="type",e.selectedToken="selectedToken",e.memberAddress="memberAddress",e.amount="amount",e.notes="notes"}(Lt||(Lt={})),function(e){e.applicantAddress="applicantAddress",e.erc20Address="erc20Address",e.tributeAmount="tributeAmount",e.requestAmount="requestAmount",e.description="description"}(Mt||(Mt={}));var Yt=n(445),Kt=n.n(Yt),Ht=(n(952),n.p+"static/media/compost.662c0eab.jpg"),zt=be.a.memo((function(){return Object(ie.jsx)("img",{alt:"Compost heap.",src:Ht})}));function qt(){return Object(ie.jsx)("div",{"data-testid":"header",className:"landing__header"})}function Jt(){var e=Object(oe.f)();return Object(le.useEffect)((function(){Kt.a.init({duration:800,offset:40,delay:120,mirror:!1,once:!0})}),[]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(qt,{}),Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)(Ne,{}),Object(ie.jsxs)("div",{className:"landing",children:[Object(ie.jsx)("div",{className:"landing__subtitle",children:"Managing our gardening community"}),Object(ie.jsx)("div",{className:"landing__img",children:Object(ie.jsx)(zt,{})}),Object(ie.jsx)("div",{className:"landing__button",children:Object(ie.jsx)("button",{className:"button",onClick:function(){e.push("/join")},children:"Join"})})]})]})})]})}var Qt=n(132);function Xt(e){var t,n,r=e.proposal,a=Object(yt.j)(null===(t=r.snapshotProposal)||void 0===t?void 0:t.msg.payload.start,null===(n=r.snapshotProposal)||void 0===n?void 0:n.msg.payload.end),c=a.hasVotingTimeEnded,s=a.hasVotingTimeStarted,o=a.votingTimeStartEndInitReady;return Object(ie.jsxs)(ie.Fragment,{children:[o&&s&&Object(ie.jsx)(Qt.c,{proposal:r}),o&&s&&!c&&Object(ie.jsx)(Qt.b,{proposal:r})]})}var $t=n(74);function Zt(){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsx)(Ie.a,{children:Object(ie.jsx)("div",{style:{textAlign:"center",fontSize:"5rem"},children:Object(ie.jsxs)("h3",{children:["4",Object(ie.jsx)("span",{className:"pulse",role:"img","aria-label":"404, not found",style:{display:"inline-block"},children:"\ud83d\ude35"}),"4"]})})})})}function en(e){var t=e.proposal,n=e.renderAmountBadge,r=e.renderActions,a=t.getCommonSnapshotProposalData();return a?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"proposaldetails__header",children:"Proposal Details"}),Object(ie.jsxs)("div",{className:"proposaldetails",children:[Object(ie.jsxs)("div",{className:"proposaldetails__content",children:[Object(ie.jsx)("h3",{children:Object(f.k)(a.msg.payload.name||"",7)}),Object(ie.jsx)(Ct.a,{children:a.msg.payload.body})]}),Object(ie.jsxs)("div",{className:"proposaldetails__status",children:[n&&n(),r()]})]})]}):null}function tn(){var e=Object(oe.h)().proposalId,t=Object(yt.d)(e,wt.SnapshotType.proposal),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(je.d)().defaultChainError,o=r||s;return c===fe.a.PENDING&&!o?Object(ie.jsx)(nn,{children:Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})})}):a?Object(ie.jsx)(nn,{children:Object(ie.jsx)(Zt,{})}):o?Object(ie.jsx)(nn,{children:Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:o,renderText:"Something went wrong while getting the proposal."})})}):n?Object(ie.jsx)(nn,{children:Object(ie.jsx)(en,{proposal:n,renderActions:function(){return Object(ie.jsx)(Xt,{proposal:n})}})}):Object(ie.jsx)(ie.Fragment,{})}function nn(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance")},children:"View all"})]}),e.children]})})}var rn=n(446),an=n(447),cn="View Proposal",sn=n.n(an)()()(rn.a);function on(e){var t=e.buttonText,n=void 0===t?cn:t,r=e.proposalOnClickId,a=e.linkPath,c=e.onClick,o=e.name,i=e.renderStatus,u=Object(oe.f)().location,d="/"===u.pathname?"":u.pathname,l="function"===typeof a?a(r):a||"".concat(d,"/").concat(r);return Object(ie.jsx)(s.b,{className:"proposalcard__link",to:l,onClick:function(){null===c||void 0===c||c(r)},children:Object(ie.jsxs)("div",{className:"proposalcard",children:[Object(ie.jsx)("h3",{className:"proposalcard__title",children:function(e){return Object(Rt.a)(e)?Object(f.k)(e,7):Object(ie.jsx)(sn,{text:e,maxLine:1,ellipsis:"...",trimRight:!0,basedOn:"letters"})}(o)}),i&&i(),Object(ie.jsx)("button",{className:"proposalcard__button",children:n||cn})]})})}function un(e){var t=e.actionId,n=void 0===t?nt.a:t,r=e.onProposalClick,a=void 0===r?function(){}:r,c=e.proposalLinkPath,s=e.renderProposalCard,o=Object(le.useState)([]),i=Object(de.a)(o,2),u=i[0],d=i[1],l=Object(le.useState)({failedProposals:[],passedProposals:[],votingProposals:[]}),j=Object(de.a)(l,2),p=j[0],O=j[1],h=function(e){var t=e.actionId,n=void 0===t?nt.a:t,r=Object(le.useState)([]),a=Object(de.a)(r,2),c=a[0],s=a[1],o=Object(le.useState)(),i=Object(de.a)(o,2),u=i[0],d=i[1],l=Object(le.useState)(fe.a.STANDBY),j=Object(de.a)(l,2),f=j[0],p=j[1],O=Object($e.e)().isMountedRef,h=Object(le.useCallback)((function(){return N.apply(this,arguments)}),[n,O]);function m(e){return x.apply(this,arguments)}function x(){return(x=Object(De.a)(Ce.a.mark((function e(t){var n,r,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="".concat(b.C,"/api/").concat(b.D),e.next=4,fetch("".concat(n,"/proposals/").concat(t,"?includeVotes=true"));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error("Something went wrong while fetching the Snapshot proposals.");case 7:return e.next=9,r.json();case 9:return a=e.sent,e.abrupt("return",Object.entries(a).map((function(e){var t=Object(de.a)(e,2),n=t[0],r=t[1];return{daoProposal:void 0,snapshotDraft:void 0,snapshotProposal:Object(v.a)(Object(v.a)({},r),{},{idInSnapshot:n,idInDAO:""}),getCommonSnapshotProposalData:function(){},refetchProposalOrDraft:function(){},snapshotType:wt.SnapshotType.proposal}})));case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function N(){return(N=Object(De.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(fe.a.PENDING),e.next=4,m(n);case 4:if(t=e.sent,O.current){e.next=7;break}return e.abrupt("return");case 7:p(fe.a.FULFILLED),s(t),e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(0),O.current){e.next=15;break}return e.abrupt("return");case 15:p(fe.a.REJECTED),s([]),d(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){h()}),[h]),{governanceProposals:c,governanceProposalsError:u,governanceProposalsStatus:f}}({actionId:n}),m=h.governanceProposals,x=h.governanceProposalsError,N=h.governanceProposalsStatus,g=Object(yt.c)(u),E=g.offchainVotingResults,A=g.offchainVotingResultsError,w=g.offchainVotingResultsStatus,I=Object(je.d)().defaultChainError,y=p.failedProposals,C=p.passedProposals,D=p.votingProposals,k=N===fe.a.STANDBY||N===fe.a.PENDING||w===fe.a.STANDBY&&u.length>0||w===fe.a.PENDING,_=x||A||I;function T(e){return e.map((function(e){var t,n,r,o=null===(t=e.snapshotProposal)||void 0===t?void 0:t.idInSnapshot,i=(null===(n=e.snapshotProposal)||void 0===n?void 0:n.msg.payload.name)||"";if(!o)return null;var u=null===(r=E.find((function(e){var t=Object(de.a)(e,2),n=t[0];t[1];return Object(f.h)(n)===Object(f.h)(o)})))||void 0===r?void 0:r[1];return s?Object(ie.jsx)(le.Fragment,{children:s({proposalData:e,votingResult:u})},o):Object(ie.jsx)(on,{name:i,linkPath:c,onClick:a,proposalOnClickId:o,renderStatus:function(){return Object(ie.jsx)(Qt.c,{proposal:e,votingResult:u})}},o)}))}return Object(le.useEffect)((function(){d(m.map((function(e){return e.snapshotProposal})))}),[m]),Object(le.useEffect)((function(){if(N===fe.a.FULFILLED){var e={failedProposals:[],passedProposals:[],votingProposals:[]};m.forEach((function(t){var n,r;if(((null===(n=t.snapshotProposal)||void 0===n?void 0:n.msg.payload.end)||0)<Math.ceil(Date.now()/1e3)){var a=null===(r=E.find((function(e){var n,r=Object(de.a)(e,2),a=r[0];r[1];return Object(f.h)(a)===Object(f.h)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInSnapshot)||"")})))||void 0===r?void 0:r[1];if(a){var c,s=(c=a).Yes.units>c.No.units;s?e.passedProposals.push(t):s||e.failedProposals.push(t)}}else e.votingProposals.push(t)})),O((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}}),[m,N,E]),k&&!_?Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})}):m.length||Object.values(p).flatMap((function(e){return e})).length||N!==fe.a.FULFILLED?_?Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:_,renderText:"Something went wrong while getting the proposals."})}):Object(ie.jsxs)("div",{className:"grid--fluid grid-container",children:[D.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.VOTING}),Object(ie.jsx)("div",{className:"grid__cards",children:T(D)})]}),C.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.PASSED}),Object(ie.jsx)("div",{className:"grid__cards",children:T(C)})]}),y.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.FAILED}),Object(ie.jsx)("div",{className:"grid__cards",children:T(y)})]})]}):Object(ie.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function dn(){return Object(ie.jsx)(ln,{children:Object(ie.jsx)(un,{actionId:nt.a,proposalLinkPath:function(e){return"/governance/".concat(e)}})})}function ln(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Governance"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/governance-proposal")},children:"New Proposal"})]}),e.children]})})}var bn=["createdAt","didFullyRagequit"];function jn(){var e=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),t=Object(c.c)((function(e){return e.contracts.BankExtensionContract})),n=Object(c.c)((function(e){return e.subgraphNetworkStatus.status})),a=Object(je.f)().web3Instance,s=Object(_e.a)(p.c,{pollInterval:b.r,variables:{daoAddress:null===e||void 0===e?void 0:e.contractAddress.toLowerCase()}}),o=Object(de.a)(s,2),i=o[0],u=o[1],d=u.called,l=u.loading,j=u.data,O=u.error,h=u.stopPolling,m=Object(le.useState)([]),N=Object(de.a)(m,2),g=N[0],E=N[1],A=Object(le.useState)(fe.a.STANDBY),w=Object(de.a)(A,2),I=w[0],y=w[1],C=Object(le.useState)(),D=Object(de.a)(C,2),k=D[0],_=D[1],T=Object(le.useCallback)((function(){return R.apply(this,arguments)}),[t,e,a]),S=Object(le.useCallback)((function(){try{if(y(fe.a.PENDING),!l&&j){var e=j.tributeDaos[0].members.filter((function(e){return!e.didFullyRagequit})).map((function(e){e.createdAt,e.didFullyRagequit;var t=Object(x.a)(e,bn);return Object(v.a)(Object(v.a)({},t),{},{address:Object(St.toChecksumAddress)(e.address),delegateKey:Object(St.toChecksumAddress)(e.delegateKey)})}));y(fe.a.FULFILLED),E(e)}else if(O)throw new Error(O.message)}catch(O){console.log("subgraph query error: ".concat(O.message)),h&&h(),T()}}),[j,O,T,l,h]);function R(){return(R=Object(De.a)(Ce.a.mark((function n(){var c,s,o,i,u,d,l,j,p,O,h,m,v,x,N,g,A;return Ce.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e&&t&&a){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,y(fe.a.PENDING),c=e.abi,s=e.contractAddress,o=e.instance.methods,n.next=7,o.getNbMembers().call();case 7:if(i=n.sent,!(Number(i)>0)){n.next=28;break}return u=c.find((function(e){return"getMemberAddress"===e.name})),d=Object(r.a)(Array(Number(i)).keys()).map((function(e){return[s,u,[e.toString()]]})),n.next=13,Object(He.j)({calls:d,web3Instance:a});case 13:return l=n.sent,j=c.find((function(e){return"memberAddressesByDelegatedKey"===e.name})),p=l.map((function(e){return[s,j,[e]]})),n.next=18,Object(He.j)({calls:p,web3Instance:a});case 18:return O=n.sent,h=t.abi,m=t.contractAddress,v=h.find((function(e){return"balanceOf"===e.name})),x=O.map((function(e){return[m,v,[e,b.H]]})),n.next=24,Object(He.j)({calls:x,web3Instance:a});case 24:N=n.sent,g=l.map((function(e,t){return{address:e,delegateKey:O[t],isDelegated:Object(f.h)(e)!==Object(f.h)(O[t]),units:N[t]}})),A=g.filter((function(e){return Object(St.toBN)(e.units).gt(Object(St.toBN)(0))})).reverse(),E(A);case 28:y(fe.a.FULFILLED),n.next=36;break;case 31:n.prev=31,n.t0=n.catch(2),y(fe.a.REJECTED),E([]),_(n.t0);case 36:case"end":return n.stop()}}),n,null,[[2,31]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){d||i()}),[d,i]),Object(le.useEffect)((function(){n===te.a.OK?!l&&(null===e||void 0===e?void 0:e.contractAddress)&&S():(h&&h(),T())}),[null===e||void 0===e?void 0:e.contractAddress,T,S,l,h,n]),{members:g,membersError:k,membersStatus:I}}var fn,pn,On,hn=n(194);function mn(e){return Object(ie.jsx)("svg",Object(v.a)(Object(v.a)({"aria-hidden":"true",focusable:"false","data-icon":"copy",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(ie.jsx)("path",{fill:"currentColor",d:"M433.941 65.941l-51.882-51.882A48 48 0 0 0 348.118 0H176c-26.51 0-48 21.49-48 48v48H48c-26.51 0-48 21.49-48 48v320c0 26.51 21.49 48 48 48h224c26.51 0 48-21.49 48-48v-48h80c26.51 0 48-21.49 48-48V99.882a48 48 0 0 0-14.059-33.941zM266 464H54a6 6 0 0 1-6-6V150a6 6 0 0 1 6-6h74v224c0 26.51 21.49 48 48 48h96v42a6 6 0 0 1-6 6zm128-96H182a6 6 0 0 1-6-6V54a6 6 0 0 1 6-6h106v88c0 13.255 10.745 24 24 24h88v202a6 6 0 0 1-6 6zm6-256h-64V48h9.632c1.591 0 3.117.632 4.243 1.757l48.368 48.368a6 6 0 0 1 1.757 4.243V112z"})}))}function vn(e){return Object(ie.jsx)("svg",Object(v.a)(Object(v.a)({"aria-hidden":"true",focusable:"false","data-icon":"wallet",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e),{},{children:Object(ie.jsx)("path",{fill:"currentColor",d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"})}))}function xn(e){var t=e.daoTokenDetails;function n(){return(n=Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:t}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return t?Object(ie.jsxs)("div",{children:["Token: ",Object(ie.jsx)("span",{children:Object(hn.a)(t.address,7)}),Object(ie.jsx)("div",{className:"daotoken__tooltip",children:Object(ie.jsxs)("button",{className:"daotoken__button",onClick:function(){if(t){var e=document.createElement("input");document.body.appendChild(e),e.setAttribute("value",t.address),e.select(),document.execCommand("copy"),document.body.removeChild(e),document.getElementById("copyTooltip").innerHTML="copied!"}},onMouseLeave:function(){document.getElementById("copyTooltip").innerHTML="copy address"},children:[Object(ie.jsx)("span",{className:"daotoken__tooltiptext",id:"copyTooltip",children:"copy address"}),Object(ie.jsx)(mn,{})]})}),Object(ie.jsx)("div",{className:"daotoken__tooltip",children:Object(ie.jsxs)("button",{className:"daotoken__button",onClick:function(){return n.apply(this,arguments)},children:[Object(ie.jsx)("span",{className:"daotoken__tooltiptext",children:"add to wallet"}),Object(ie.jsx)(vn,{})]})})]}):Object(ie.jsx)(ie.Fragment,{})}function Nn(e){return Object(ie.jsx)("svg",Object(v.a)(Object(v.a)({"aria-hidden":"true",focusable:"false","data-icon":"user",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),{},{children:Object(ie.jsx)("path",{fill:"currentColor",d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"})}))}function gn(e){var t=e.isOpen,n=e.closeHandler,r=e.currentStep,a=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),s=Object(c.c)((function(e){return e.contracts.DaoRegistryAdapterContract})),o=Object(c.c)((function(e){return e.connectedMember})),i=Object(je.f)(),u=i.account,d=i.web3Instance,l=Object(je.b)().fast,b=Object(je.a)(),p=b.txError,O=b.txEtherscanURL,h=b.txIsPromptOpen,m=b.txSend,x=b.txStatus,N=Object(et.a)({mode:"onBlur",reValidateMode:"onChange"}),g=Object(c.b)(),E=Object(le.useState)(),A=Object(de.a)(E,2),w=A[0],I=A[1],y=N.errors,C=N.getValues,D=N.register,k=N.trigger,_=N.watch,T=x===tt.f.AWAITING_CONFIRM||x===tt.f.PENDING,S=x===tt.f.FULFILLED,R=T||S||h,P=w||p,F=_(On.delegateAddress),L=_(On.confirmDelegation),M=!F||!L,B={setDelegation:function(){return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"modal__title",children:"Delegate"}),Object(ie.jsx)("p",{children:"Transfer your voting rights"}),Object(ie.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(ie.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault()},children:[Object(ie.jsx)("div",{className:"form__input-row",children:Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{"aria-describedby":"error-".concat(On.delegateAddress),"aria-invalid":y.delegateAddress?"true":"false",name:On.delegateAddress,ref:D({validate:function(e){return e?!(!Object(Rt.a)(e)||e===nt.a)||Qe.a.INVALID_ETHEREUM_ADDRESS:Qe.a.REQUIRED}}),type:"text",disabled:R,placeholder:"Enter delegate address"}),Object(f.f)(On.delegateAddress,y).includes("invalid")&&Object(ie.jsx)(ct,{error:Object(f.f)(On.delegateAddress,y),id:"error-".concat(On.delegateAddress)})]})}),Object(ie.jsx)("div",{className:"form__input-row",style:{marginTop:0},children:Object(ie.jsxs)("div",{className:"form__input-row-fieldwrap",children:[Object(ie.jsx)("input",{className:"checkbox-input","aria-describedby":"error-".concat(On.confirmDelegation),"aria-invalid":y.confirmDelegation?"true":"false",id:On.confirmDelegation,name:On.confirmDelegation,ref:D({required:Qe.a.REQUIRED}),type:"checkbox",disabled:R}),Object(ie.jsxs)("label",{className:"checkbox-label",htmlFor:On.confirmDelegation,children:[Object(ie.jsx)("span",{className:"checkbox-box ".concat(lt.SMALL)}),Object(ie.jsx)("span",{className:"checkbox-text",children:"Confirm delegation to the above address. You can revoke this at any time from your profile."})]})]})}),Object(ie.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R||M,onClick:Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k();case 4:if(e.sent){e.next=6;break}return e.abrupt("return");case 6:G(C());case 7:case"end":return e.stop()}}),e)}))),type:"submit",children:T?Object(ie.jsx)(st.a,{}):S?"Done":"Confirm"}),R&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:Y()}),P&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong with your delegation.",error:P})})]})]})},revokeDelegation:function(){if(o)return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"modal__title",children:"Revoke Delegation"}),Object(ie.jsx)("p",{children:Object(f.k)(o.delegateKey,7)}),Object(ie.jsx)("div",{className:"delegation-modal__arrow-down",children:"\u2193"}),Object(ie.jsxs)("p",{children:[Object(ie.jsx)(Nn,{}),"Back to you"]}),Object(ie.jsx)("div",{className:"delegation-modal__text",children:"You'll be able to resume voting from your account. You can delegate again at any time from your profile."}),Object(ie.jsx)("button",{"aria-label":T?"Updating your delegate key...":"",className:"button",disabled:R,onClick:V,children:T?Object(ie.jsx)(st.a,{}):S?"Done":"Confirm"}),R&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:Y()}),P&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong with your revocation.",error:P})})]});return Object(ie.jsx)(ie.Fragment,{})}};function G(e){return U.apply(this,arguments)}function U(){return(U=Object(De.a)(Ce.a.mark((function e(t){var r,c,o,i;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return r=t.delegateAddress,c=[a.contractAddress,Object(St.toChecksumAddress)(r)],o=Object(v.a)({from:u||""},l?{gasPrice:l}:null),e.next=14,m("updateDelegateKey",s.instance.methods,c,o);case 14:e.sent&&setTimeout(Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(j.B)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=24;break;case 18:e.prev=18,e.t0=e.catch(0),console.log(e.t0),i=e.t0,(e.t0.message.includes("cannot overwrite existing delegated keys")||e.t0.message.includes("address already taken as delegated key"))&&(i=new Error("The provided address cannot be another member or already in use as a delegate.")),I(i);case 24:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function V(){return W.apply(this,arguments)}function W(){return(W=Object(De.a)(Ce.a.mark((function e(){var t,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(s){e.next=5;break}throw new Error("No DAO Registry Adapter contract was found.");case 5:if(u){e.next=7;break}throw new Error("No account found.");case 7:if(d){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=[a.contractAddress,Object(St.toChecksumAddress)(u)],r=Object(v.a)({from:u||""},l?{gasPrice:l}:null),e.next=13,m("updateDelegateKey",s.instance.methods,t,r);case 13:e.sent&&setTimeout(Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(Object(j.B)({account:u,daoRegistryContract:a,web3Instance:d}));case 2:n();case 3:case"end":return e.stop()}}),e)}))),2e3),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0),I(e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}function Y(){switch(x){case tt.f.AWAITING_CONFIRM:return"Awaiting your confirmation\u2026";case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:O,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Submitted!"}),Object(ie.jsx)(ht.a,{url:O})]});default:return null}}return Object(ie.jsxs)(it.a,{keyProp:"delegation",isOpen:t,isOpenHandler:function(){},modalClassNames:"delegation-modal",children:[Object(ie.jsx)("span",{className:"modal__close-button",onClick:function(){n()},children:Object(ie.jsx)(ut.a,{})}),B[r]()]})}function En(){var e=Object(c.c)((function(e){return e.connectedMember})),t=Object(le.useState)(pn.SET_DELEGATION),n=Object(de.a)(t,2),r=n[0],a=n[1],s=Object(le.useState)(""),o=Object(de.a)(s,2),i=o[0],u=o[1],d=Object(le.useState)(!1),l=Object(de.a)(d,2),b=l[0],j=l[1],p=Object(le.useCallback)((function(){return O.apply(this,arguments)}),[e]);function O(){return(O=Object(De.a)(Ce.a.mark((function t(){var n,r;return Ce.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=3;break}throw new Error("No connected account found.");case 3:n=e.isAddressDelegated?pn.REVOKE_DELEGATION:pn.SET_DELEGATION,a(n),r=e.isAddressDelegated?fn.REVOKE_DELEGATION:fn.DELEGATE_VOTES,u(r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){p()}),[p]),e?Object(ie.jsxs)(ie.Fragment,{children:[""!==i&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"memberprofile__action-description",children:e.isAddressDelegated?Object(ie.jsxs)(ie.Fragment,{children:["Your voting rights have been delegated to"," ",Object(ie.jsx)("span",{className:"delegation__delegate-address-text",children:Object(f.k)(e.delegateKey,7)}),". You can revoke this at any time."]}):Object(ie.jsx)(ie.Fragment,{children:"You can delegate your voting rights to a different ETH address. The address cannot be another member or already in use as a delegate."})}),Object(ie.jsx)("button",{className:"memberprofile__action-button",onClick:function(){return j(!0)},children:i})]}),b&&Object(ie.jsx)(gn,{isOpen:b,closeHandler:function(){j(!1)},currentStep:r})]}):Object(ie.jsx)(ie.Fragment,{})}function An(){var e=jn(),t=e.members,n=e.membersError,r=e.membersStatus,a=Object(je.d)().defaultChainError,c=Object(je.f)().account,s=ke(),o=s.daoTokenDetails,i=s.daoTokenDetailsStatus,u=Object($e.d)(),d=u.totalUnits,l=u.totalUnitsStatus,b=Object(oe.h)().ethereumAddress,j=Object(le.useState)(),p=Object(de.a)(j,2),O=p[0],h=p[1],m=Object(le.useState)(!1),v=Object(de.a)(m,2),x=v[0],N=v[1];Object(le.useEffect)((function(){if(r===fe.a.FULFILLED){var e=t.find((function(e){return Object(f.h)(e.address)===Object(f.h)(b)}));h(e),e||N(!0)}}),[b,t,r]);var g=r===fe.a.STANDBY||r===fe.a.PENDING||i===fe.a.STANDBY||i===fe.a.PENDING||l===fe.a.STANDBY||l===fe.a.PENDING,E=r===fe.a.FULFILLED,A=n||a,w=!(!c||!O||Object(f.h)(c)!==Object(f.h)(O.address)),I=O&&"number"===typeof d?(Number(O.units)/d*100).toFixed(2):"";return g&&!A?Object(ie.jsx)(wn,{children:Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})})}):A?Object(ie.jsx)(wn,{children:Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:A,renderText:"Something went wrong while getting the member."})})}):x&&E?Object(ie.jsx)(wn,{children:Object(ie.jsx)("div",{className:"text-center error-message",children:Object(ie.jsx)("p",{children:"Member not found."})})}):Object(ie.jsx)(wn,{children:O?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"memberprofile__header",children:"Member Profile"}),Object(ie.jsxs)("div",{className:"proposaldetails",children:[Object(ie.jsxs)("div",{className:"memberprofile__left-column",children:[Object(ie.jsx)("h3",{children:Object(f.k)(O.address,7)}),function(){if(O)return Object(ie.jsxs)("div",{children:[Object(ie.jsx)("div",{className:"memberprofile__info-item",children:o?Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"DAO Tokens"}),Object(ie.jsx)("div",{children:"".concat(Object(f.e)(O.units)," ").concat(o.symbol||"tokens")}),w&&Object(ie.jsx)("small",{children:Object(ie.jsx)(xn,{daoTokenDetails:o})})]}):Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Membership Units"}),Object(ie.jsx)("div",{children:Object(f.e)(O.units)})]})}),Object(ie.jsxs)("div",{className:"memberprofile__info-item",children:[Object(ie.jsx)("div",{children:"Voting Weight"}),Object(ie.jsx)("div",{children:"".concat(I,"%")})]})]})}()]}),Object(ie.jsx)("div",{className:"memberprofile__right-column",children:w?Object(ie.jsx)("div",{children:Object(ie.jsxs)("div",{className:"memberprofile__action",children:[Object(ie.jsx)("div",{className:"memberprofile__action-header",children:"Delegation"}),Object(ie.jsx)(En,{})]})}):Object(ie.jsx)("div",{className:"memberprofile__actions-unavailable",children:"Connect your wallet with this member address to view available actions."})})]})]}):Object(ie.jsx)(ie.Fragment,{})})}function wn(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Members"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/members")},children:"View all"})]}),e.children]})})}!function(e){e.DELEGATE_VOTES="Delegate Votes",e.REVOKE_DELEGATION="Revoke Delegation"}(fn||(fn={})),function(e){e.SET_DELEGATION="setDelegation",e.REVOKE_DELEGATION="revokeDelegation"}(pn||(pn={})),function(e){e.delegateAddress="delegateAddress",e.confirmDelegation="confirmDelegation"}(On||(On={}));function In(e){var t=e.member,n=e.to,r=void 0===n?"#":n,a=Object(je.f)().account;return Object(ie.jsx)(s.b,{className:"membercard__link",to:r,children:Object(ie.jsx)("div",{className:"membercard ".concat(a&&a.toLowerCase()===t.address.toLowerCase()?"membercard--connected-account":""),children:Object(ie.jsx)("h3",{className:"membercard__title",children:Object(f.k)(t.address,7)})})})}function yn(){var e=jn(),t=e.members,n=e.membersError,r=e.membersStatus,a=Object(je.d)().defaultChainError,c=r===fe.a.STANDBY||r===fe.a.PENDING,s=r===fe.a.FULFILLED,o=n||a;return c&&!o?Object(ie.jsx)(Cn,{children:Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})})}):o?Object(ie.jsx)(Cn,{children:Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:o,renderText:"Something went wrong while getting the members."})})}):!Object.values(t).length&&s?Object(ie.jsx)(Cn,{children:Object(ie.jsx)("p",{className:"text-center",children:"No members, yet!"})}):Object(ie.jsx)(Cn,{children:Object(ie.jsx)("div",{className:"grid--fluid grid-container",children:Object(ie.jsxs)("div",{children:[Object(ie.jsx)("div",{className:"grid__header",children:"Active Members"}),Object(ie.jsx)("div",{className:"grid__cards",children:function(e){return e.map((function(e){return Object(ie.jsx)(In,{to:"/members/".concat(e.address),member:e},e.address)}))}(t)})]})})})}function Cn(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Members"})}),e.children]})})}var Dn=n(55),kn=n(50);function _n(e){var t=e.adapterName,n=e.onProposalClick,r=void 0===n?function(){}:n,a=e.proposalLinkPath,c=e.renderProposalCard,s=e.includeProposalsExistingOnlyOffchain,o=void 0!==s&&s,i=Object(le.useState)([]),u=Object(de.a)(i,2),d=u[0],l=u[1],b=Object(le.useState)({failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]}),j=Object(de.a)(b,2),p=j[0],O=j[1],h=Object(yt.f)({adapterName:t,includeProposalsExistingOnlyOffchain:o}),m=h.proposals,x=h.proposalsError,N=h.proposalsStatus,g=Object(yt.c)(d),E=g.offchainVotingResults,A=g.offchainVotingResultsError,w=g.offchainVotingResultsStatus,I=Object(je.d)().defaultChainError,y=p.failedProposals,C=p.nonsponsoredProposals,D=p.passedProposals,k=p.votingProposals,_=N===fe.a.STANDBY||N===fe.a.PENDING||w===fe.a.STANDBY&&d.length>0||w===fe.a.PENDING,T=x||A||I;function S(e){return e.map((function(e){var t,n,s,o,i=(null===(t=e.snapshotDraft)||void 0===t?void 0:t.idInDAO)||(null===(n=e.snapshotProposal)||void 0===n?void 0:n.idInDAO),u=(null===(s=e.snapshotDraft)||void 0===s?void 0:s.msg.payload.name)||(null===(o=e.snapshotProposal)||void 0===o?void 0:o.msg.payload.name)||"";return i?c?Object(ie.jsx)(le.Fragment,{children:c({proposalData:e})},i):Object(ie.jsx)(on,{linkPath:a,name:u,onClick:r,proposalOnClickId:i,renderStatus:function(){var t;switch(null===(t=e.daoProposalVotingAdapter)||void 0===t?void 0:t.votingAdapterName){case Be.c.OffchainVotingContract:return Object(ie.jsx)(Qt.c,{proposal:e});default:return Object(ie.jsx)(ie.Fragment,{})}}},i):null}))}return Object(le.useEffect)((function(){l(m.map((function(e){return e.snapshotProposal})))}),[m]),Object(le.useEffect)((function(){if(N===fe.a.FULFILLED){var e={failedProposals:[],nonsponsoredProposals:[],passedProposals:[],votingProposals:[]};m.forEach((function(t){var n,r,a,c,s=t.daoProposal,i=t.daoProposalVotingState,u=t.daoProposalVotes;if(s){var d=0===(null===(n=t.snapshotProposal)||void 0===n||null===(r=n.votes)||void 0===r?void 0:r.length),l=void 0!==i&&(Object(Dn.e)(kn.a.GRACE_PERIOD,i)||Object(Dn.e)(kn.a.TIE,i))&&Object(Dn.d)(It.b.SPONSORED,s.flags)&&(null===u||void 0===u||null===(a=u.OffchainVotingContract)||void 0===a?void 0:a.reporter)===nt.a;if(void 0!==i)if(void 0!==i&&Object(Dn.e)(kn.a.PASS,i)&&(Object(Dn.d)(It.b.SPONSORED,s.flags)||Object(Dn.d)(It.b.PROCESSED,s.flags)))e.passedProposals.push(t);else{var b=null===(c=E.find((function(e){var n,r=Object(de.a)(e,2),a=r[0];r[1];return Object(f.h)(a)===Object(f.h)((null===(n=t.snapshotProposal)||void 0===n?void 0:n.idInDAO)||"")})))||void 0===c?void 0:c[1];if(b){var j,p=(j=b).Yes.units>j.No.units;l&&!1===d&&p?e.votingProposals.push(t):void 0===i||!Object(Dn.e)(kn.a.NOT_PASS,i)&&!Object(Dn.e)(kn.a.TIE,i)||!Object(Dn.d)(It.b.SPONSORED,s.flags)&&!Object(Dn.d)(It.b.PROCESSED,s.flags)?void 0!==i&&l&&d?e.failedProposals.push(t):void 0===i||!l||p?void 0!==i&&(Object(Dn.e)(kn.a.GRACE_PERIOD,i)||Object(Dn.e)(kn.a.IN_PROGRESS,i))&&Object(Dn.d)(It.b.SPONSORED,s.flags)&&e.votingProposals.push(t):e.failedProposals.push(t):e.failedProposals.push(t)}}else(o||Object(Dn.d)(It.b.EXISTS,s.flags))&&e.nonsponsoredProposals.push(t)}})),O((function(t){return Object(v.a)(Object(v.a)({},t),e)}))}}),[o,E,m,N]),_&&!T?Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})}):T?Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:T,renderText:"Something went wrong while getting the proposals."})}):Object.values(p).flatMap((function(e){return e})).length||N!==fe.a.FULFILLED?Object(ie.jsxs)("div",{className:"grid--fluid grid-container",children:[k.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.VOTING}),Object(ie.jsx)("div",{className:"grid__cards",children:S(k)})]}),C.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.REQUESTS}),Object(ie.jsx)("div",{className:"grid__cards",children:S(C)})]}),D.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.PASSED}),Object(ie.jsx)("div",{className:"grid__cards",children:S(D)})]}),y.length>0&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{className:"grid__header",children:Qe.d.FAILED}),Object(ie.jsx)("div",{className:"grid__cards",children:S(y)})]})]}):Object(ie.jsx)("p",{className:"text-center",children:"No proposals, yet!"})}function Tn(){return Object(ie.jsx)(Sn,{children:Object(ie.jsx)(_n,{adapterName:Be.a.ONBOARDING,proposalLinkPath:function(e){return"/membership/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function Sn(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Membership"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/members")},children:"View members"})]}),e.children]})})}var Rn={skipIsActiveMemberCheck:!0};function Pn(e){var t=e.disabled,n=e.proposal.snapshotProposal,r=Object(le.useState)(),a=Object(de.a)(r,2),s=a[0],o=a[1],i=Object(le.useState)(),u=Object(de.a)(i,2),d=u[0],l=u[1],b=Object(le.useRef)({notProposerMessage:""}),f=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.OnboardingContract})),p=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),O=Object(je.f)(),h=O.account,m=O.web3Instance,x=Object(je.a)(),N=x.txEtherscanURL,g=x.txIsPromptOpen,E=x.txSend,A=x.txStatus,w=Object($e.f)(Rn),I=w.isDisabled,y=w.openWhyDisabledModal,C=w.WhyDisabledModal,D=w.setOtherDisabledReasons,k=Object(je.b)().fast,_=ke().daoTokenDetails,T=Object(c.b)(),S=A===tt.f.AWAITING_CONFIRM||A===tt.f.PENDING,R=A===tt.f.FULFILLED,P=S||R||g,F=I||P||t,L=Object(le.useCallback)((function(){return M.apply(this,arguments)}),[f,null===p||void 0===p?void 0:p.contractAddress,n]);function M(){return(M=Object(De.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n&&f){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,f.instance.methods.proposals(null===p||void 0===p?void 0:p.contractAddress,n.idInDAO).call();case 5:t=e.sent,l(t.amount),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),l(void 0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function B(){return(B=Object(De.a)(Ce.a.mark((function e(){var t,r;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(n){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(f){e.next=7;break}throw new Error("No OnboardingContract found.");case 7:if(h){e.next=9;break}throw new Error("No account found.");case 9:if(m){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:return t=[p.contractAddress,n.idInDAO],r=Object(v.a)({from:h||"",value:d},k?{gasPrice:k}:null),e.next=15,E("processProposal",f.instance.methods,t,r);case 15:if(!e.sent){e.next=22;break}return e.next=19,T(Object(j.B)({account:h,daoRegistryContract:p,web3Instance:m}));case 19:if(h.toLowerCase()!==n.msg.payload.metadata.submitActionArgs[0].toLowerCase()){e.next=22;break}return e.next=22,G();case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(0),o(e.t0);case 27:case"end":return e.stop()}}),e,null,[[0,24]])})))).apply(this,arguments)}function G(){return U.apply(this,arguments)}function U(){return(U=Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:_}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){L()}),[L]),Object(le.useEffect)((function(){var e=n.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&h&&(b.current=Object(v.a)(Object(v.a)({},b.current),{},{notProposerMessage:e.toLowerCase()!==h.toLowerCase()?"Only the original proposer can process the proposal.":""})),D(Object.values(b.current))}),[h,D,n]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:[Object(ie.jsx)("button",{className:"proposaldetails__button",disabled:F,onClick:F?function(){}:function(){return B.apply(this,arguments)},children:S?Object(ie.jsx)(st.a,{}):R?"Done":"Process"}),Object(ie.jsx)(rt.a,{error:s,renderText:"Something went wrong"}),P&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){switch(A){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Confirm to process the proposal",Object(ie.jsx)(pt.a,{})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:N,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Proposal submitted!"}),Object(ie.jsx)(ht.a,{url:N})]});default:return null}}()}),I&&Object(ie.jsx)("button",{className:"button--help-centered",onClick:y,children:"Why is processing disabled?"})]}),Object(ie.jsx)(C,{title:"Why is processing disabled?"})]})}var Fn=Object(le.lazy)((function(){return n.e(9).then(n.bind(null,1011))})),Ln={duration:150},Mn={display:"inline-block",width:"100%",fontSize:"1.5rem"};function Bn(e){var t,n=e.adapterName,r=e.proposal,a=e.renderAction,s=Object(c.c)((function(e){var t;return null===(t=e.contracts.VotingContract)||void 0===t?void 0:t.adapterOrExtensionName})),o=(null===(t=r.daoProposalVotingAdapter)||void 0===t?void 0:t.votingAdapterName)||s;return Object(ie.jsx)(le.Suspense,{fallback:Object(ie.jsx)("span",{className:"text-center",style:Mn,children:Object(ie.jsx)(pt.a,{intervalMs:200,fadeInProps:Ln})}),children:function(){if(!o)return Object(ie.jsx)(ie.Fragment,{});switch(o){case Be.c.OffchainVotingContract:return Object(ie.jsx)(Fn,{adapterName:n,proposal:r,renderAction:a});case Be.c.VotingContract:return Object(ie.jsx)(ie.Fragment,{});default:return Object(ie.jsx)(rt.a,{error:new Error('"'.concat(o,'" is not a valid voting adapter name.')),renderText:"Something went wrong"})}}()})}var Gn=n(199);function Un(e){var t=e.amount,n=e.amountUnit,r=e.amount2,a=e.amount2Unit;return Object(ie.jsx)("div",{className:"proposaldetails__amount",children:Object(ie.jsxs)("span",{children:["".concat(t," ").concat(n),r&&Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("br",{}),Object(ie.jsx)("small",{children:"for"}),Object(ie.jsx)("br",{}),"".concat(r," ").concat(a)]})]})})}function Vn(){var e=Object(oe.h)().proposalId,t=Object(yt.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(je.d)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===It.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(ie.jsx)(Gn.a,{checkApplicant:s,proposal:r})}return a===It.c.Process||a===It.c.OffchainVotingGracePeriod?n&&kn.a[n]!==kn.a[kn.a.PASS]?Object(ie.jsx)(ie.Fragment,{}):Object(ie.jsx)(Pn,{disabled:a===It.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===fe.a.PENDING&&!o)return Object(ie.jsx)(Wn,{children:Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})})});if(a)return Object(ie.jsx)(Wn,{children:Object(ie.jsx)(Zt,{})});if(o)return Object(ie.jsx)(Wn,{children:Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:o,renderText:"Something went wrong while getting the proposal."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.tributeAmount,l=b.tributeAmountUnit}catch(o){d="\u2014",l=""}return Object(ie.jsx)(Wn,{children:Object(ie.jsx)(en,{proposal:n,renderAmountBadge:function(){return Object(ie.jsx)(Un,{amount:d,amountUnit:l})},renderActions:function(){return Object(ie.jsx)(Bn,{adapterName:tt.a.onboarding,proposal:n,renderAction:i})}})})}return Object(ie.jsx)(ie.Fragment,{})}function Wn(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Membership"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/membership")},children:"View all"})]}),e.children]})})}function Yn(e){var t=e.showAfterMs,n=Object(le.useState)(!1),r=Object(de.a)(n,2),a=r[0],c=r[1];return Object(le.useEffect)((function(){var e=t&&setTimeout((function(){return c(!0)}),t);return function(){e&&clearTimeout(e)}}),[t]),!t||t&&a?Object(ie.jsx)("div",{className:"loader--emoji",children:Object(ie.jsx)("span",{role:"img","aria-label":"Loading content...",children:e.emoji})}):null}var Kn=n(198),Hn=n(147),zn={skipIsActiveMemberCheck:!0};function qn(e){var t=e.redeemables,n=e.daoTokenDetails;return Object(ie.jsx)(Qn,{children:Object(ie.jsx)(Jn,{redeemable:t[0],daoTokenDetails:n})})}function Jn(e){var t=e.redeemable,n=e.daoTokenDetails,r=Object(le.useRef)({invalidApplicantMessage:""}),a=Object(Hn.b)(),c=a.redeemCoupon,s=a.submitStatus,o=a.submitError,i=a.txStatus,u=a.txEtherscanURL,d=a.txIsPromptOpen,l=Object($e.f)(zn),b=l.isDisabled,j=l.openWhyDisabledModal,p=l.WhyDisabledModal,O=l.setOtherDisabledReasons,h=Object(yt.a)(t.recipient),m=h.checkApplicantError,x=h.checkApplicantInvalidMsg,N=h.checkApplicantStatus,g=h.isApplicantValid,E=s===Hn.a.PENDING||i===tt.f.AWAITING_CONFIRM||i===tt.f.PENDING,A=s===Hn.a.FULFILLED||i===tt.f.FULFILLED||t.isRedeemd,w=E||A||d;return Object(le.useEffect)((function(){t.recipient&&(m&&console.warn("Error checking if the applicant address '".concat(t.recipient,"' is valid: ").concat(m.message)),N===fe.a.FULFILLED&&!g&&x&&(r.current=Object(v.a)(Object(v.a)({},r.current),{},{invalidApplicantMessage:x})),O(Object.values(r.current)))}),[m,x,N,g,t.recipient,O]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{className:"redeemcard redeemcard__content ".concat(A?"fireworks":""," "),children:[Object(ie.jsxs)("p",{className:"redeemcard__recipient",children:["Recipient:"," ",Object(f.k)(Object(St.toChecksumAddress)(t.recipient),7)]}),Object(ie.jsxs)("p",{className:"redeemcard__unit",children:[Object(f.e)(t.amount),Object(ie.jsx)("sup",{children:Object(ie.jsx)("small",{children:(null===n||void 0===n?void 0:n.symbol)||"tokens"})})]}),Object(ie.jsx)(xn,{daoTokenDetails:n}),A&&Object(ie.jsx)("p",{className:"redeemcard__redeemed",children:Object(ie.jsx)("span",{className:"pulse",role:"img","aria-label":"Redeemed!",style:{display:"inline-block"},children:"\ud83e\udd73"})}),Object(ie.jsx)("button",{className:"button",style:{marginTop:A?"1rem":"1.5rem"},onClick:Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t,n);case 2:case"end":return e.stop()}}),e)}))),disabled:b||w,children:E?Object(ie.jsx)(st.a,{}):A?"Redeemed!":"Redeem"}),w&&!t.isRedeemd&&Object(ie.jsx)("div",{className:"form__submit-status-container",style:{marginTop:"1rem"},children:function(){switch(i){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Awaiting your confirmation",Object(ie.jsx)(Kn.a,{})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:u,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Finalized!"}),Object(ie.jsx)(ht.a,{url:u})]});default:return null}}()}),b&&Object(ie.jsx)("button",{className:"button--help-centered",onClick:j,style:{margin:"1rem auto 0"},children:"Why is redeeming disabled?"}),o&&Object(ie.jsx)("div",{className:"form__submit-error-container",children:Object(ie.jsx)(rt.a,{renderText:"Something went wrong while redeeming the coupon.",error:o})})]}),Object(ie.jsx)(p,{title:"Why is redeeming disabled?"})]})}function Qn(e){return Object(ie.jsx)(Ie.a,{children:Object(ie.jsx)("div",{className:"grid--fluid grid-container",children:e.children})})}function Xn(){var e=Object(le.useState)([]),t=Object(de.a)(e,2),n=t[0],r=t[1],a=Object(le.useState)(fe.a.STANDBY),c=Object(de.a)(a,2),s=c[0],o=c[1],i=Object(je.f)(),u=i.connected,d=i.account,l=Object(je.d)().defaultChainError,j=Object($e.a)(),f=j.abortController,p=j.isMountedRef,O=ke(),h=O.daoTokenDetails,m=O.daoTokenDetailsStatus,v=Object(oe.g)(),x=new URLSearchParams(v.search).get("coupon"),N=s===fe.a.STANDBY||s===fe.a.PENDING||m===fe.a.STANDBY||m===fe.a.PENDING,g=Object(le.useCallback)((function(){return E.apply(this,arguments)}),[null===f||void 0===f?void 0:f.signal,x,p]);function E(){return(E=Object(De.a)(Ce.a.mark((function e(){var t,n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===f||void 0===f?void 0:f.signal){e.next=3;break}return e.abrupt("return");case 3:return o(fe.a.PENDING),e.next=6,fetch("".concat(b.g,"/api/coupon/redeem"),{method:"POST",body:JSON.stringify({signature:x}),headers:{"Content-Type":"application/json"},signal:f.signal});case 6:if(t=e.sent,p.current){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,t.json();case 11:n=e.sent,r(n),o(fe.a.FULFILLED),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(0),p.current){e.next=20;break}return e.abrupt("return");case 20:o(fe.a.REJECTED);case 21:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){d&&u&&!l&&g()}),[d,u,g,l]),u?l?Object(ie.jsx)($n,{children:Object(ie.jsx)("p",{className:"color-brightsalmon",children:l.message})}):u&&N?Object(ie.jsxs)($n,{children:[Object(ie.jsx)(Yn,{emoji:"\ud83c\udf9f"}),Object(ie.jsx)("p",{children:"Checking\u2026 please wait."})]}):void 0!==x&&x?n&&n.length?Object(ie.jsx)($n,{children:Object(ie.jsx)(qn,{daoTokenDetails:h,redeemables:n})}):Object(ie.jsx)($n,{children:Object(ie.jsx)("p",{className:"color-brightsalmon",children:"Coupon not found."})}):Object(ie.jsx)($n,{children:Object(ie.jsx)("p",{className:"color-brightsalmon",children:"Coupon signature missing."})}):Object(ie.jsx)($n,{children:Object(ie.jsx)("p",{className:"color-brightsalmon",children:"Connect your wallet to view the coupon."})})}function $n(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Redeem Coupon"})}),Object(ie.jsxs)("div",{className:"form-wrapper",children:[Object(ie.jsx)("div",{className:"form__description",children:Object(ie.jsx)("p",{children:"Redeem coupon to issue the membership tokens."})}),e.children]})]})})}function Zn(e){var t=e.proposal.snapshotProposal,n=Object(le.useState)(),r=Object(de.a)(n,2),a=r[0],s=r[1],o=Object(le.useRef)({alreadyCompletedMessage:""}),i=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.DistributeContract})),u=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),d=Object(je.f)(),l=d.account,b=d.web3Instance,f=Object(je.a)(),p=f.txEtherscanURL,O=f.txIsPromptOpen,h=f.txSend,m=f.txStatus,x=Object($e.f)(),N=x.isDisabled,g=x.openWhyDisabledModal,E=x.WhyDisabledModal,A=x.setOtherDisabledReasons,w=Object(je.b)().fast,I=Object(c.b)(),y=m===tt.f.AWAITING_CONFIRM||m===tt.f.PENDING,C=m===tt.f.FULFILLED,D=y||C||O,k=N||D;function _(){return(_=Object(De.a)(Ce.a.mark((function e(){var n,r,a,c;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(t){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:if(l){e.next=9;break}throw new Error("No account found.");case 9:if(b){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:if(n="0",!(null===t||void 0===t?void 0:t.msg.payload.metadata.isTypeAllMembers)){e.next=24;break}return e.prev=14,e.next=17,u.instance.methods.getNbMembers().call();case 17:r=e.sent,n=r.toString(),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(14),new Error("Error while retrieving number of DAO members");case 24:return a=[u.contractAddress,n],c=Object(v.a)({from:l||""},w?{gasPrice:w}:null),e.next=28,h("distribute",i.instance.methods,a,c);case 28:if(!e.sent){e.next=32;break}return e.next=32,I(Object(j.B)({account:l,daoRegistryContract:u,web3Instance:b}));case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(0),s(e.t1);case 37:case"end":return e.stop()}}),e,null,[[0,34],[14,21]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){function e(){return(e=Object(De.a)(Ce.a.mark((function e(){var n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}throw new Error("No Snapshot proposal was found.");case 3:if(u){e.next=5;break}throw new Error("No DAO Registry contract was found.");case 5:if(i){e.next=7;break}throw new Error("No DistributeContract found.");case 7:return e.next=9,i.instance.methods.distributions(u.contractAddress,t.idInDAO).call();case 9:n=e.sent,o.current=Object(v.a)(Object(v.a)({},o.current),{},{alreadyCompletedMessage:It.a[n.status]!==It.a[It.a.IN_PROGRESS]?"The transfer has already been completed.":""}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error(e.t0);case 16:A(Object.values(o.current));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[i,u,A,t]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:[Object(ie.jsx)("button",{className:"proposaldetails__button",disabled:k,onClick:k?function(){}:function(){return _.apply(this,arguments)},children:y?Object(ie.jsx)(st.a,{}):C?"Transfer done":"Transfer assets"}),Object(ie.jsx)(rt.a,{error:a,renderText:"Something went wrong"}),D&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){switch(m){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Confirm to transfer assets",Object(ie.jsx)(pt.a,{})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:p,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Assets transferred!"}),Object(ie.jsx)(ht.a,{url:p})]});default:return null}}()}),N&&Object(ie.jsx)("button",{className:"button--help-centered",onClick:g,children:"Why is action disabled?"})]}),Object(ie.jsx)(E,{title:"Why is transfer disabled?"})]})}function er(){var e=Object(oe.h)().proposalId,t=Object(yt.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(je.d)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal;return t.status===It.c.Completed&&n&&kn.a[n]===kn.a[kn.a.PASS]?Object(ie.jsx)(Zn,{proposal:r}):null}if(c===fe.a.PENDING&&!o)return Object(ie.jsx)(tr,{children:Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})})});if(a)return Object(ie.jsx)(tr,{children:Object(ie.jsx)(Zt,{})});if(o)return Object(ie.jsx)(tr,{children:Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d="\u2014",l="";try{var b=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=b.transferAmount,l=b.transferAmountUnit}catch(o){d="\u2014",l=""}return Object(ie.jsx)(tr,{children:Object(ie.jsx)(en,{proposal:n,renderAmountBadge:function(){return Object(ie.jsx)(Un,{amount:d,amountUnit:l})},renderActions:function(){return Object(ie.jsx)(Bn,{adapterName:tt.a.distribute,proposal:n,renderAction:i})}})})}return Object(ie.jsx)(ie.Fragment,{})}function tr(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfers")},children:"View all"})]}),e.children]})})}function nr(){return Object(ie.jsx)(rr,{children:Object(ie.jsx)(_n,{adapterName:Be.a.DISTRIBUTE,proposalLinkPath:function(e){return"/transfers/".concat(e)}})})}function rr(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Transfers"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/transfer")},children:"Make Transfer"})]}),e.children]})})}var ar={skipIsActiveMemberCheck:!0};function cr(e){var t=e.disabled,r=e.proposal.snapshotProposal,a=Object(le.useState)(),s=Object(de.a)(a,2),o=s[0],i=s[1],u=Object(le.useState)(),d=Object(de.a)(u,2),l=d[0],b=d[1],f=Object(le.useRef)({notProposerMessage:""}),p=Object(c.c)((function(e){var t;return null===(t=e.contracts)||void 0===t?void 0:t.TributeContract})),O=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),h=Object(je.f)(),m=h.account,x=h.web3Instance,N=Object(je.a)(),g=N.txEtherscanURL,E=N.txIsPromptOpen,A=N.txSend,w=N.txStatus,I=Object(je.a)(),y=I.txEtherscanURL,C=I.txIsPromptOpen,D=I.txSend,k=I.txStatus,_=Object($e.f)(ar),T=_.isDisabled,S=_.openWhyDisabledModal,R=_.WhyDisabledModal,P=_.setOtherDisabledReasons,F=Object(je.b)().fast,L=ke().daoTokenDetails,M=Object(c.b)(),B=w===tt.f.AWAITING_CONFIRM||w===tt.f.PENDING||k===tt.f.AWAITING_CONFIRM||k===tt.f.PENDING,G=w===tt.f.FULFILLED,U=B||G||E||C,V=T||U||t,W=Object(le.useCallback)((function(){return Y.apply(this,arguments)}),[p,null===O||void 0===O?void 0:O.contractAddress,r]);function Y(){return(Y=Object(De.a)(Ce.a.mark((function e(){var t,n,a;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r&&p){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,p.instance.methods.proposals(null===O||void 0===O?void 0:O.contractAddress,r.idInDAO).call();case 5:t=e.sent,n=t.token,a=t.tributeAmount,b({tokenAddress:n,tributeAmount:a}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0),b(void 0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function K(){return H.apply(this,arguments)}function H(){return(H=Object(De.a)(Ce.a.mark((function e(){var t,r,a,c,s,o,i,u,d,b,j,f,O;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,l){e.next=3;break}throw new Error("No Tribute proposal details found.");case 3:if(p){e.next=5;break}throw new Error("No TributeContract found.");case 5:if(m){e.next=7;break}throw new Error("No account found.");case 7:if(x){e.next=9;break}throw new Error("No Web3 instance was found.");case 9:return t=l.tokenAddress,r=l.tributeAmount,e.next=12,Promise.resolve().then(n.t.bind(null,444,3));case 12:return a=e.sent,c=a.default,s=c,o=new x.eth.Contract(s,t),e.next=18,o.methods.allowance(m,p.contractAddress).call();case 18:if(i=e.sent,u=Object(St.toBN)(r),d=Object(St.toBN)(i),!u.gt(d)){e.next=34;break}return e.prev=22,b=u.sub(d),j=d.add(b),f=[p.contractAddress,j.toString()],O=Object(v.a)({from:m||""},F?{gasPrice:F}:null),e.next=29,D("approve",o.methods,f,O);case 29:e.next=34;break;case 31:throw e.prev=31,e.t0=e.catch(22),e.t0;case 34:e.next=39;break;case 36:throw e.prev=36,e.t1=e.catch(0),e.t1;case 39:case"end":return e.stop()}}),e,null,[[0,36],[22,31]])})))).apply(this,arguments)}function z(){return(z=Object(De.a)(Ce.a.mark((function e(){var t,n;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,O){e.next=3;break}throw new Error("No DAO Registry contract was found.");case 3:if(r){e.next=5;break}throw new Error("No Snapshot proposal was found.");case 5:if(p){e.next=7;break}throw new Error("No TributeContract found.");case 7:if(m){e.next=9;break}throw new Error("No account found.");case 9:if(x){e.next=11;break}throw new Error("No Web3 instance was found.");case 11:return e.next=13,K();case 13:return t=[O.contractAddress,r.idInDAO],n=Object(v.a)({from:m||""},F?{gasPrice:F}:null),e.next=17,A("processProposal",p.instance.methods,t,n);case 17:if(!e.sent){e.next=24;break}return e.next=21,M(Object(j.B)({account:m,daoRegistryContract:O,web3Instance:x}));case 21:if(m.toLowerCase()!==r.msg.payload.metadata.submitActionArgs[0].toLowerCase()){e.next=24;break}return e.next=24,q();case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),i(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function q(){return J.apply(this,arguments)}function J(){return(J=Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,window.ethereum.request({method:"wallet_watchAsset",params:{type:"ERC20",options:L}});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){W()}),[W]),Object(le.useEffect)((function(){var e=r.msg.payload.metadata.accountAuthorizedToProcessPassedProposal;e&&m&&(f.current=Object(v.a)(Object(v.a)({},f.current),{},{notProposerMessage:e.toLowerCase()!==m.toLowerCase()?"Only the original proposer can process the proposal.":""})),P(Object.values(f.current))}),[m,P,r]),Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:[Object(ie.jsx)("button",{className:"proposaldetails__button",disabled:V,onClick:V?function(){}:function(){return z.apply(this,arguments)},children:B?Object(ie.jsx)(st.a,{}):G?"Done":"Process"}),Object(ie.jsx)(rt.a,{error:o,renderText:"Something went wrong"}),U&&Object(ie.jsx)("div",{className:"form__submit-status-container",children:function(){if(k===tt.f.AWAITING_CONFIRM)return Object(ie.jsxs)(ie.Fragment,{children:["Confirm to transfer your tokens",Object(ie.jsx)(pt.a,{})]});if(k===tt.f.PENDING)return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsxs)("div",{children:["Approving your tokens for transfer",Object(ie.jsx)(pt.a,{})]}),Object(ie.jsx)(ht.a,{url:y,isPending:!0})]});switch(w){case tt.f.AWAITING_CONFIRM:return Object(ie.jsxs)(ie.Fragment,{children:["Confirm to process the proposal",Object(ie.jsx)(pt.a,{})]});case tt.f.PENDING:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Ot.a,{intervalMs:2e3,messages:ft.b,useFirstItemStart:!0,render:function(e){return Object(ie.jsx)(Ie.a,{children:e},e)}}),Object(ie.jsx)(ht.a,{url:g,isPending:!0})]});case tt.f.FULFILLED:return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)("div",{children:"Proposal submitted!"}),Object(ie.jsx)(ht.a,{url:g})]});default:return null}}()}),T&&Object(ie.jsx)("button",{className:"button--help-centered",onClick:S,children:"Why is processing disabled?"})]}),Object(ie.jsx)(R,{title:"Why is processing disabled?"})]})}var sr="\u2014";function or(){var e=Object(oe.h)().proposalId,t=Object(yt.d)(e),n=t.proposalData,r=t.proposalError,a=t.proposalNotFound,c=t.proposalStatus,s=Object(je.d)().defaultChainError,o=r||s;function i(e){var t=e.OffchainVotingContract,n=t.daoProposalVoteResult,r=t.proposal,a=t.status;if(a===It.c.Submit){var c=r.snapshotDraft,s=null===c||void 0===c?void 0:c.msg.payload.metadata.submitActionArgs[0];return Object(ie.jsx)(Gn.a,{checkApplicant:s,proposal:r})}return a===It.c.Process||a===It.c.OffchainVotingGracePeriod?n&&kn.a[n]!==kn.a[kn.a.PASS]?Object(ie.jsx)(ie.Fragment,{}):Object(ie.jsx)(cr,{disabled:a===It.c.OffchainVotingGracePeriod,proposal:r}):null}if(c===fe.a.PENDING&&!o)return Object(ie.jsx)(ir,{children:Object(ie.jsx)("div",{className:"loader--large-container",children:Object(ie.jsx)($t.a,{})})});if(a)return Object(ie.jsx)(ir,{children:Object(ie.jsx)(Zt,{})});if(o)return Object(ie.jsx)(ir,{children:Object(ie.jsx)("div",{className:"text-center",children:Object(ie.jsx)(rt.a,{error:o,renderText:"Something went wrong."})})});if(n){var u=n.getCommonSnapshotProposalData(),d=sr,l="",b=sr,j="";try{var f=null===u||void 0===u?void 0:u.msg.payload.metadata.proposalAmountValues;d=f.tributeAmount,l=f.tributeAmountUnit,b=f.requestAmount,j=f.requestAmountUnit}catch(o){d=sr,l="",b=sr,j=""}return Object(ie.jsx)(ir,{children:Object(ie.jsx)(en,{proposal:n,renderAmountBadge:function(){return Object(ie.jsx)(Un,{amount:d,amountUnit:l,amount2:b,amount2Unit:j})},renderActions:function(){return Object(ie.jsx)(Bn,{adapterName:tt.a.tribute,proposal:n,renderAction:i})}})})}return Object(ie.jsx)(ie.Fragment,{})}function ir(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tributes")},children:"View all"})]}),e.children]})})}function ur(){return Object(ie.jsx)(dr,{children:Object(ie.jsx)(_n,{adapterName:Be.a.TRIBUTE,proposalLinkPath:function(e){return"/tributes/".concat(e)},includeProposalsExistingOnlyOffchain:!0})})}function dr(e){var t=Object(oe.f)();return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsxs)("div",{className:"titlebar",children:[Object(ie.jsx)("h2",{className:"titlebar__title",children:"Tributes"}),Object(ie.jsx)("button",{className:"titlebar__action",onClick:function(e){e.preventDefault(),t.push("/tribute")},children:"Provide Tribute"})]}),e.children]})})}var lr=new Ue.a(Ue.a.givenProvider||b.n);function br(){var e=Object(le.useState)(),t=Object(de.a)(e,2),r=t[0],a=t[1],c=Object(le.useState)("\ud83d\udea8 Error: Cannot determine status."),s=Object(de.a)(c,2),o=s[0],i=s[1],u=Object(le.useState)(),d=Object(de.a)(u,2),l=d[0],j=d[1],f=b.K[b.k],p=Object(le.useCallback)((function(){return h.apply(this,arguments)}),[f]),O=Object(le.useCallback)(m,[r,o]);function h(){return(h=Object(De.a)(Ce.a.mark((function e(){var t,r,c,s,o;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(lr&&f){e.next=4;break}return a(void 0),console.log("water contract not found"),e.abrupt("return");case 4:return e.prev=4,e.next=7,n.e(3).then(n.t.bind(null,991,3));case 7:for(o in t=e.sent,r=t.default,c=r,s=new lr.eth.Contract(c,f),a(s),console.log("water contract set: "+s),console.log("methods: "+s.methods),s.methods)console.log(o);return e.abrupt("return",s);case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0),a(void 0);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})))).apply(this,arguments)}function m(){return v.apply(this,arguments)}function v(){return(v=Object(De.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return console.log("error getting irrigation status"),e.abrupt("return");case 3:return e.prev=3,e.next=6,r.methods.getIrrigation().call();case 6:t=e.sent,i(String(t)),console.log("Result "+t),j(o?"\ud83d\udfe2 The pump is running.":o?"\ud83d\udea8 Error: Cannot determine status.":"\ud83d\udd34 The pump is not running."),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(3),console.error(e.t0),i(""),j("\ud83d\udea8 Error: Cannot determine status.");case 17:case"end":return e.stop()}}),e,null,[[3,12]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){p()}),[p]),Object(le.useEffect)((function(){O()}),[O]),Object(ie.jsxs)(jr,{children:[Object(ie.jsx)("button",{className:"titlebar__action",onClick:m,children:"Get Status"}),Object(ie.jsx)("p",{children:l})]})}function jr(e){return Object(ie.jsx)(Nt,{className:"section-wrapper",children:Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{className:"titlebar",children:Object(ie.jsx)("h2",{className:"titlebar__title",children:"Water"})}),e.children]})})}var fr,pr=":proposalId";function Or(){return Object(ie.jsx)(oe.c,{children:[Object(ie.jsx)(oe.a,{exact:!0,path:"/",render:function(){return Object(ie.jsx)(Jt,{})}},"splash"),Object(ie.jsx)(oe.a,{exact:!0,path:"/join",render:function(){return Object(ie.jsx)(Pt,{})}},"join"),Object(ie.jsx)(oe.a,{exact:!0,path:"/membership",render:function(){return Object(ie.jsx)(Tn,{})}},"membership"),Object(ie.jsx)(oe.a,{exact:!0,path:"/membership/".concat(pr),render:function(){return Object(ie.jsx)(Vn,{})}},"membership-details"),Object(ie.jsx)(oe.a,{exact:!0,path:"/transfer",render:function(){return Object(ie.jsx)(Gt,{})}},"transfer"),Object(ie.jsx)(oe.a,{exact:!0,path:"/transfers",render:function(){return Object(ie.jsx)(nr,{})}},"transfers"),Object(ie.jsx)(oe.a,{exact:!0,path:"/transfers/".concat(pr),render:function(){return Object(ie.jsx)(er,{})}},"transfer-details"),Object(ie.jsx)(oe.a,{exact:!0,path:"/tribute",render:function(){return Object(ie.jsx)(Vt,{})}},"tribute"),Object(ie.jsx)(oe.a,{exact:!0,path:"/tributes",render:function(){return Object(ie.jsx)(ur,{})}},"tributes"),Object(ie.jsx)(oe.a,{exact:!0,path:"/tributes/".concat(pr),render:function(){return Object(ie.jsx)(or,{})}},"tribute-details"),Object(ie.jsx)(oe.a,{exact:!0,path:"/water",render:function(){return Object(ie.jsx)(br,{})}},"water"),Object(ie.jsx)(oe.a,{exact:!0,path:"/governance-proposal",render:function(){return Object(ie.jsx)(kt,{})}},"governance-proposal"),Object(ie.jsx)(oe.a,{exact:!0,path:"/governance",render:function(){return Object(ie.jsx)(dn,{})}},"governance-proposals"),Object(ie.jsx)(oe.a,{exact:!0,path:"/governance/".concat(pr),render:function(){return Object(ie.jsx)(tn,{})}},"governance-proposal-details"),Object(ie.jsx)(oe.a,{exact:!0,path:"/members",render:function(){return Object(ie.jsx)(yn,{})}},"members"),Object(ie.jsx)(oe.a,{exact:!0,path:"/members/:ethereumAddress",render:function(){return Object(ie.jsx)(An,{})}},"member-profile"),Object(ie.jsx)(oe.a,{exact:!0,path:"/dao-manager",render:function(){return Object(ie.jsx)(gt,{})}},"dao-manager"),Object(ie.jsx)(oe.a,{exact:!0,path:"/redeem",render:function(){return Object(ie.jsx)(Xn,{})}},"redeem"),Object(ie.jsx)(oe.a,{component:Zt},"no-match")]})}function hr(e){var t=Object(oe.g)().pathname,n=(e||{}).renderMainContent,r=Object(ie.jsx)("main",{children:n?n():Object(ie.jsx)(Or,{})});return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(me,{}),"/"===t?Object(ie.jsx)(ie.Fragment,{children:r}):Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(Le,{}),r,Object(ie.jsx)(ue,{})]}),Object(ie.jsx)(Oe,{})]})}function mr(e){var t=e.render,n=Object(c.c)((function(e){return e.contracts.DaoRegistryContract})),r=Object(le.useState)(),a=Object(de.a)(r,2),s=a[0],o=a[1],i=Object(le.useState)(!1),u=Object(de.a)(i,2),d=u[0],l=u[1],f=Object(le.useState)(Object(Me.a)({},fr.initSnapshotAPI,fe.a.STANDBY)),p=Object(de.a)(f,2),O=p[0],h=p[1],m=Object(je.f)(),x=m.account,N=m.web3Instance,g=Object(je.d)().isDefaultChain,E=Object($e.e)().isMountedRef,A=Object(je.c)(),w=Object(c.b)(),I=Object(le.useCallback)((function(){return k.apply(this,arguments)}),[A,g,N]),y=Object(le.useCallback)((function(){return _.apply(this,arguments)}),[x,n,w,g,N]),C=Object(le.useCallback)((function(){return D.apply(this,arguments)}),[E]);function D(){return(D=Object(De.a)(Ce.a.mark((function e(){var t;return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.C){e.next=3;break}throw new Error("No Snapshot Hub API URL was found.");case 3:return e.next=5,Object(wt.getApiStatus)(b.C);case 5:if(t=e.sent,t.data.version){e.next=9;break}throw new Error("Snapshot API is not ready.");case 9:if(E.current){e.next=11;break}return e.abrupt("return");case 11:h((function(e){return Object(v.a)(Object(v.a)({},e),{},Object(Me.a)({},fr.initSnapshotAPI,fe.a.FULFILLED))})),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(0),E.current){e.next=18;break}return e.abrupt("return");case 18:o(new Error("Snapshot API is not responding."));case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function k(){return(k=Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,g&&N){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,A({web3Instance:N});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(){return(_=Object(De.a)(Ce.a.mark((function e(){return Ce.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,x&&n&&g&&N){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w(Object(j.B)({account:x,daoRegistryContract:n,web3Instance:N}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),o(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return Object(le.useEffect)((function(){l(Object.values(O).every((function(e){return e===fe.a.FULFILLED})))}),[O]),Object(le.useEffect)((function(){I()}),[I,N]),Object(le.useEffect)((function(){y()}),[y]),Object(le.useEffect)((function(){C()}),[C]),t({error:s,isInitComplete:d})}function vr(e){var t=e.error;return Object(ie.jsxs)(Ie.a,{children:[Object(ie.jsx)("div",{style:{padding:"2em 1em 1em",textAlign:"center"},children:Object(ie.jsxs)("h1",{style:{fontSize:"2rem"},children:[Object(ie.jsx)("span",{className:"pulse",role:"img","aria-label":"Emoji with eyes crossed out.",style:{display:"inline-block"},children:"\ud83d\ude35"})," ","Oops, something went wrong."]})}),Object(ie.jsx)("div",{style:{textAlign:"center",maxWidth:600,display:"block",margin:"0 auto"},children:Object(ie.jsx)(rt.a,{error:t,renderText:""})})]})}!function(e){e.initSnapshotAPI="initSnapshotAPI"}(fr||(fr={}));var xr=function(e){e&&e instanceof Function&&n.e(11).then(n.bind(null,1010)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Nr=n(205),gr=(n(953),document.getElementById("root"));"production"===b.m&&Object(f.b)(),window.ethereum&&window.ethereum.autoRefreshOnNetworkChange&&(window.ethereum.autoRefreshOnNetworkChange=!1);var Er=function(e){return new i.a({link:Object(u.concat)(Object(p.e)(e),new d.a({uri:function(e){var t=e.operationName;return"".concat(b.s,"?").concat(t)}})),cache:new l.a({typePolicies:{Adapter:{fields:{adapters:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}},Extension:{fields:{extensions:{merge:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(r.a)(e),Object(r.a)(t))}}}}}})})};null!==gr&&Object(a.render)(Object(ie.jsx)(c.a,{store:se,children:Object(ie.jsx)(s.a,{children:Object(ie.jsx)(Nr.b,{onBeforeDisconnect:function(){se.dispatch(Object(j.x)()),se.dispatch(Object(j.y)())},onBeforeConnect:function(){se.dispatch(Object(j.y)())},providerOptions:b.J,children:Object(ie.jsx)(o.a,{client:Er(se),children:Object(ie.jsx)(mr,{render:function(e){var t=e.error,n=e.isInitComplete;return t?Object(ie.jsx)(hr,{renderMainContent:function(){return Object(ie.jsx)(vr,{error:t})}}):n?Object(ie.jsx)(hr,{}):null}})})})})}),gr),xr()},99:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(205);function c(){return Object(r.useContext)(a.a)}}},[[957,5,6]]]);
//# sourceMappingURL=main.006798fd.chunk.js.map